import*as t from"@wordpress/interactivity";var e={d:(t,o)=>{for(var n in o)e.o(o,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:o[n]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)};const o=(n={getContext:()=>t.getContext,store:()=>t.store},a={},e.d(a,n),a);var n,a;(0,o.store)("prc-platform/dataset-download",{actions:{onButtonClick:t=>{t.preventDefault();const e=(0,o.getContext)(),{datasetId:n,isATP:a}=e,r=(0,o.getContext)("prc-user-accounts/content-gate"),{userToken:i,userId:s}=r;if(console.log('onButtonClick: "Hit the api with this information..." ->',r,i,s,n),a){const{actions:t}=(0,o.store)("prc-block/popup-controller");window?.wp?.apiFetch({path:"/prc-api/v3/datasets/check-atp/",method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({uid:s,userToken:i})}).then((e=>{console.log("ATP CHECK",e),t.open()}))}else!function(t,e,o){window?.wp?.apiFetch({path:`/prc-api/v3/datasets/get-download/?datasetId=${t}`,method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({uid:e,userToken:o})}).then((t=>{t?.file_url&&window.open(t.file_url,"_blank")})).catch((t=>{console.error("Error fetching dataset download",t)}))}(n,s,i)}}});
//# sourceMappingURL=view.js.map