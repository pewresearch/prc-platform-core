import*as t from"@wordpress/interactivity";var e={d:(t,a)=>{for(var o in a)e.o(a,o)&&!e.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:a[o]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)};const a=(n={getContext:()=>t.getContext,getElement:()=>t.getElement,store:()=>t.store},r={},e.d(r,n),r),{actions:o}=(0,a.store)("prc-platform/dataset-download",{actions:{downloadDataset:(t,e,a,o)=>{window?.wp?.apiFetch({path:`/prc-api/v3/datasets/get-download/?datasetId=${t}`,method:"POST",data:{uid:e,userToken:a,NONCE:o}}).then((t=>{t?.file_url&&window.open(t.file_url,"_blank")})).catch((t=>{}))},async checkATP(t,e,n,r){const{ref:s}=(0,a.getElement)(),c=await(window?.wp?.apiFetch({path:"/prc-api/v3/datasets/check-atp/",method:"POST",data:{uid:t,userToken:e,NONCE:r}}));if(!0===c&&o.downloadDataset(n,t,e,r),!1===c){const t=s.parentElement.parentElement.parentElement.getAttribute("id"),{actions:e,state:o}=(0,a.store)("prc-block/popup-controller");e.open(null,t)}},onButtonClick:t=>{t.preventDefault();const e=(0,a.getContext)(),{datasetId:n,isATP:r,NONCE:s}=e,{state:c}=(0,a.store)("prc-user-accounts/content-gate"),{token:d,uid:p}=c;r?o.checkATP(p,d,n,s):o.downloadDataset(n,p,d,s)}}});var n,r;
//# sourceMappingURL=view.js.map