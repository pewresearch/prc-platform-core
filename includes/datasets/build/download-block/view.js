import*as t from"@wordpress/interactivity";var e={d:(t,o)=>{for(var a in o)e.o(o,a)&&!e.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:o[a]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)};const o=(n={getContext:()=>t.getContext,getElement:()=>t.getElement,store:()=>t.store},r={},e.d(r,n),r),{actions:a}=(0,o.store)("prc-platform/dataset-download",{actions:{downloadDataset:(t,e,o,a)=>{window?.wp?.apiFetch({path:`/prc-api/v3/datasets/get-download/?datasetId=${t}`,method:"POST",data:{uid:e,userToken:o,NONCE:a}}).then((t=>{t?.file_url&&window.open(t.file_url,"_blank")})).catch((t=>{console.error(t)}))},async checkATP(t,e,n,r){const{ref:s}=(0,o.getElement)(),c=await(window?.wp?.apiFetch({path:"/prc-api/v3/datasets/check-atp/",method:"POST",data:{uid:t,userToken:e,NONCE:r}}));if(!0===c&&a.downloadDataset(n,t,e,r),!1===c){const t=s.parentElement.parentElement.parentElement.getAttribute("id"),{actions:e,state:a}=(0,o.store)("prc-block/popup-controller");e.open(null,t)}},onButtonClick:t=>{t.preventDefault();const e=(0,o.getContext)(),{datasetId:n,isATP:r,NONCE:s}=e,{state:c}=(0,o.store)("prc-user-accounts/content-gate"),{token:d,uid:p}=c;r?a.checkATP(p,d,n,s):a.downloadDataset(n,p,d,s)}}});var n,r;
//# sourceMappingURL=view.js.map