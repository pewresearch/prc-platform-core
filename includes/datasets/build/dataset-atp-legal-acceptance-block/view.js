import*as e from"@wordpress/interactivity";var t={d:(e,o)=>{for(var a in o)t.o(o,a)&&!t.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:o[a]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const o=(r={getContext:()=>e.getContext,getElement:()=>e.getElement,store:()=>e.store},l={},t.d(l,r),l),{apiFetch:a}=window.wp,{actions:n}=(0,o.store)("prc-platform/dataset-download",{actions:{*closeModal(){const e=yield(0,o.store)("prc-block/popup-controller"),{actions:t}=e;t.closeAll()},*atpModalAgree(){const{ref:e}=(0,o.getElement)(),t=e.parentElement.parentElement.parentElement.parentElement.parentElement.getAttribute("id");console.log("test",t);const r=(0,o.getContext)(),{datasetId:l}=r,s=(0,o.getContext)("prc-user-accounts/content-gate"),{userToken:c,userId:p}=s;console.log("atpModalAgree",l,c,p),yield a({path:"/prc-api/v3/datasets/accept-atp",method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({uid:p,userToken:c})}).then((e=>{n.downloadDataset(l,p,c),console.log("ATP ACCEPT",e,n),n.closeModal()})).catch((e=>{console.error("Error fetching ATP check",e),n.closeModal()}))},*atpModalDisagree(){n.closeModal()}}});var r,l;
//# sourceMappingURL=view.js.map