import*as e from"@wordpress/interactivity";var t={438:e=>{e.exports=import("@wordpress/interactivity-router")}},o={};function r(e){var c=o[e];if(void 0!==c)return c.exports;var s=o[e]={exports:{}};return t[e](s,s.exports,r),s.exports}r.d=(e,t)=>{for(var o in t)r.o(t,o)&&!r.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{const t=(n={getContext:()=>e.getContext,getElement:()=>e.getElement,store:()=>e.store},l={},r.d(l,n),l),{addQueryArgs:o}=window.wp.url,{state:c,actions:s}=(0,t.store)("prc-platform/facets-context-provider",{state:{mouseEnterPreFetchTimer:500,navigateTimer:1e3,get getSelected(){return c.selected},get getUpdatedUrl(){const e={};if(void 0===c.selected)return;Object.keys(c.selected).forEach((t=>{Array.isArray(c.selected[t])?e[`_${t}`]=c.selected[t].join(","):e[`_${t}`]=c.selected[t]})),Object.keys(e).forEach((t=>{""===e[t]&&delete e[t]}));const t=window.location.href.split("?")[0].replace(/\/page\/\d+\//,"/"),r=o(t,e);return console.log("facets-context-provider::getUpdatedUrl = :::::",t,e,r),r}},actions:{*updateResults(){const e=c.getSelected,t=window.location.href,o=c.getUpdatedUrl;if(o===t)return void console.log("facets-context-provider::updateResults (NO CHANGE)","No change...");c.isProcessing=!0,console.log("facets-context-provider::updateResults (CHANGE DETECTED)",Object.keys(e),o,t);const s=yield Promise.resolve().then(r.bind(r,438));yield s.actions.navigate(o),c.isProcessing=!1},onCheckboxClick:e=>{"LABEL"===e.target.tagName&&e.preventDefault();const o=(0,t.getContext)(),{ref:r}=(0,t.getElement)(),s=r.querySelector("input"),{id:n}=s,{checked:l,value:d,type:i}=c[n];c[n].checked=!l;const a=r.parentElement.parentElement.dataset.wpKey;c.selected[a]||(c.selected[a]=[]),c.selected[a].includes(d)?c.selected[a]=c.selected[a].filter((e=>e!==d)):c.selected[a]="radio"===i?[d]:[...c.selected[a],d],console.log("facets-context-provider::onCheckboxClick",r,c,n,o)},onSelectChange:(e,t)=>{const o=t.parentElement.parentElement.parentElement.dataset.wpKey,r=c.getSelected,s=r;r[o]&&r[o].includes(e)?s[o]=s[o].filter((t=>t!==e)):s[o]=[e],c.selected=s},*prefetch(){const e=yield Promise.resolve().then(r.bind(r,438)),t=c.getUpdatedUrl;c.prefetched.includes(t)||(c.prefetched.push(t),console.log("facets-context-provider::prefetch",t,c.prefetched),yield e.actions.prefetch(t))},*onCheckboxMouseEnter(){yield s.prefetch()},onClear:e=>{const t=c.selected;if(!e)return c.selected={},void s.updateResults();Object.keys(c).find((o=>{"object"==typeof c[o]&&t[e].includes(c[o]?.value)&&(c[o].checked=!1)})),delete t[e],c.selected={...t}}},callbacks:{onSelection(){const e=c.getSelected,t=Object.keys(e).length;console.log("facets-context-provider::onSelection()",e,Object.keys(e),t),t<=0?c.isDisabled=!0:(s.updateResults(),c.isDisabled=!1)}}});var n,l})();
//# sourceMappingURL=view.js.map