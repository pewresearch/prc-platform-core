import*as e from"@wordpress/interactivity";var t={438:e=>{e.exports=import("@wordpress/interactivity-router")}},o={};function c(e){var s=o[e];if(void 0!==s)return s.exports;var n=o[e]={exports:{}};return t[e](n,n.exports,c),n.exports}c.d=(e,t)=>{for(var o in t)c.o(t,o)&&!c.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},c.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{const t=(r={getContext:()=>e.getContext,getElement:()=>e.getElement,store:()=>e.store},l={},c.d(l,r),l),{addQueryArgs:o}=window.wp.url,{state:s,actions:n}=(0,t.store)("prc-platform/facets-context-provider",{state:{processing:!1,mouseEnterPreFetchTimer:500,navigateTimer:1e3,get getSelected(){return s.selected},get getUpdatedUrl(){console.log("facets-context-provider::getUpdatedUrl...",s);const e={};if(void 0===s.selected)return;Object.keys(s.selected).forEach((t=>{Array.isArray(s.selected[t])?e[t]=s.selected[t].join(","):e[t]=s.selected[t]})),Object.keys(e).forEach((t=>{console.log(e[t]),""===e[t]&&delete e[t]}));const t=window.location.href.split("?")[0].replace(/\/page\/\d+\//,"/"),c=o(t,e);return console.log("facets-context-provider::getUpdatedUrl = :::::",t,e,c),c}},actions:{*updateResults(){const e=s.getSelected,t=window.location.href,o=s.getUpdatedUrl;o!==t?(console.log("facets-context-provider::updateResults (CHANGE DETECTED)",Object.keys(e),o,t),yield Promise.resolve().then(c.bind(c,438)),s.isProcessing=!1):console.log("facets-context-provider::updateResults (NO CHANGE)","No change...")},*onButtonClick(){window.location.href=window.location.href},onCheckboxClick:e=>{"LABEL"===e.target.tagName&&e.preventDefault();const o=(0,t.getContext)(),{ref:c}=(0,t.getElement)(),n=c.querySelector("input"),{id:r}=n,{checked:l,value:d,type:a}=s[r];s[r].checked=!l;const i=c.parentElement.parentElement.dataset.wpKey;s.selected[i]||(s.selected[i]=[]),s.selected[i].includes(d)?s.selected[i]=s.selected[i].filter((e=>e!==d)):s.selected[i]="radio"===a?[d]:[...s.selected[i],d],console.log("facets-context-provider::onCheckboxClick",c,s,r,o)},onSelectChange:(e,t)=>{const o=t.parentElement.dataset.wpKey;console.log("facets-context-provider::onSelectChange",o,e),s.selected[o]||(s.selected[o]=[e]),s.selected[o].includes(e)?s.selected[o]=s.selected[o].filter((t=>t!==e)):s.selected[o]=[e]},onClear:e=>{console.log("facets-context-provider::onClear",e,s);const t=s.selected;Object.keys(s).find((o=>{"object"==typeof s[o]&&t[e].includes(s[o]?.value)&&(s[o].checked=!1)})),delete t[e],s.selected={...t}},onFacetTokenClick:()=>{const{ref:e,props:o}=(0,t.getElement)(),c=`_${o["data-wp-key"]}`;n.onClear(c)}},callbacks:{onInit(){s["update-results-button"].isDisabled=!0,console.log("facets-context-provider::onInit",s)},*onSelection(){const e=s.getSelected;console.log("facets-context-provider::onSelection",e,Object.keys(e)),Object.keys(e).length<=0?(console.log("If there are no selected facets, don't enable the button and dont run the query..."),s["update-results-button"].isDisabled=!1):setTimeout((()=>{console.log("Looks like we do have some selectiosn...",Object.keys(e)),n.updateResults()}),500)}}});var r,l})();
//# sourceMappingURL=view.js.map