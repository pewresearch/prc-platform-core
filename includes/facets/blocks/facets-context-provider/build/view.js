import*as e from"@wordpress/interactivity";var t={438:e=>{e.exports=import("@wordpress/interactivity-router")}},o={};function n(e){var c=o[e];if(void 0!==c)return c.exports;var r=o[e]={exports:{}};return t[e](r,r.exports,n),r.exports}n.d=(e,t)=>{for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{const t=(s={getContext:()=>e.getContext,getElement:()=>e.getElement,store:()=>e.store},l={},n.d(l,s),l),{addQueryArgs:o}=window.wp.url,{state:c,actions:r}=(0,t.store)("prc-platform/facets-context-provider",{state:{processing:!1,mouseEnterPreFetchTimer:500,navigateTimer:1e3,get getSelected(){return c.selected},get getUpdatedUrl(){console.log("facets-context-provider::getUpdatedUrl...",c);const e={};if(void 0===c.selected)return;Object.keys(c.selected).forEach((t=>{Array.isArray(c.selected[t])?e[`_${t}`]=c.selected[t].join(","):e[`_${t}`]=c.selected[t]})),Object.keys(e).forEach((t=>{console.log(e[t]),""===e[t]&&delete e[t]}));const t=window.location.href.split("?")[0].replace(/\/page\/\d+\//,"/"),n=o(t,e);return console.log("facets-context-provider::getUpdatedUrl = :::::",t,e,n),n}},actions:{*updateResults(){const e=c.getSelected,t=window.location.href,o=c.getUpdatedUrl;if(o===t)return void console.log("facets-context-provider::updateResults (NO CHANGE)","No change...");console.log("facets-context-provider::updateResults (CHANGE DETECTED)",Object.keys(e),o,t);const r=yield Promise.resolve().then(n.bind(n,438));yield r.actions.navigate(o),c.isProcessing=!1},*onButtonClick(){window.location.href=window.location.href},onCheckboxClick:e=>{"LABEL"===e.target.tagName&&e.preventDefault();const o=(0,t.getContext)(),{ref:n}=(0,t.getElement)(),r=n.querySelector("input"),{id:s}=r,{checked:l,value:a,type:d}=c[s];c[s].checked=!l;const i=n.parentElement.parentElement.dataset.wpKey;c.selected[i]||(c.selected[i]=[]),c.selected[i].includes(a)?c.selected[i]=c.selected[i].filter((e=>e!==a)):c.selected[i]="radio"===d?[a]:[...c.selected[i],a],console.log("facets-context-provider::onCheckboxClick",n,c,s,o)},onSelectChange:(e,t)=>{const o=t.parentElement.parentElement.parentElement.dataset.wpKey,n=c.getSelected,r=n;n[o]||(r[o]=[e]),n[o].includes(e)?r[o]=r[o].filter((t=>t!==e)):r[o]=[e],c.selected=r},onClear:e=>{console.log("facets-context-provider::onClear",e,c);const t=c.selected;Object.keys(c).find((o=>{"object"==typeof c[o]&&t[e].includes(c[o]?.value)&&(c[o].checked=!1)})),delete t[e],c.selected={...t}},onFacetTokenClick:()=>{const{ref:e,props:o}=(0,t.getElement)(),n=`_${o["data-wp-key"]}`;r.onClear(n)}},callbacks:{onInit(){c["update-results-button"].isDisabled=!0,console.log("facets-context-provider::onInit",c)},*onSelection(){const e=c.getSelected,t=Object.keys(e).length;console.log("facets-context-provider::onSelection",e,Object.keys(e),t),t<=0?(console.log("enabling button",Object.keys(e).length),c["update-results-button"].isDisabled=!0):(r.updateResults(),c["update-results-button"].isDisabled=!1)}}});var s,l})();
//# sourceMappingURL=view.js.map