import*as e from"@wordpress/interactivity";var t={438:e=>{e.exports=import("@wordpress/interactivity-router")}},o={};function c(e){var r=o[e];if(void 0!==r)return r.exports;var s=o[e]={exports:{}};return t[e](s,s.exports,c),s.exports}c.d=(e,t)=>{for(var o in t)c.o(t,o)&&!c.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},c.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{const t=(n={getContext:()=>e.getContext,getElement:()=>e.getElement,store:()=>e.store},l={},c.d(l,n),l),{addQueryArgs:o}=window.wp.url,{state:r,actions:s}=(0,t.store)("prc-platform/facets-context-provider",{state:{mouseEnterPreFetchTimer:500,navigateTimer:1e3,get getSelected(){return r.selected},get getUpdatedUrl(){console.log("facets-context-provider::getUpdatedUrl...",r);const e={};if(void 0===r.selected)return;Object.keys(r.selected).forEach((t=>{Array.isArray(r.selected[t])?e[`_${t}`]=r.selected[t].join(","):e[`_${t}`]=r.selected[t]})),Object.keys(e).forEach((t=>{console.log(e[t]),""===e[t]&&delete e[t]}));const t=window.location.href.split("?")[0].replace(/\/page\/\d+\//,"/"),c=o(t,e);return console.log("facets-context-provider::getUpdatedUrl = :::::",t,e,c),c}},actions:{*updateResults(){const e=r.getSelected,t=window.location.href,o=r.getUpdatedUrl;if(o===t)return void console.log("facets-context-provider::updateResults (NO CHANGE)","No change...");r.isProcessing=!0,console.log("facets-context-provider::updateResults (CHANGE DETECTED)",Object.keys(e),o,t);const s=yield Promise.resolve().then(c.bind(c,438));yield s.actions.navigate(o),r.isProcessing=!1},onCheckboxClick:e=>{"LABEL"===e.target.tagName&&e.preventDefault();const o=(0,t.getContext)(),{ref:c}=(0,t.getElement)(),s=c.querySelector("input"),{id:n}=s,{checked:l,value:d,type:i}=r[n];r[n].checked=!l;const a=c.parentElement.parentElement.dataset.wpKey;r.selected[a]||(r.selected[a]=[]),r.selected[a].includes(d)?r.selected[a]=r.selected[a].filter((e=>e!==d)):r.selected[a]="radio"===i?[d]:[...r.selected[a],d],console.log("facets-context-provider::onCheckboxClick",c,r,n,o)},onSelectChange:(e,t)=>{const o=t.parentElement.parentElement.parentElement.dataset.wpKey,c=r.getSelected,s=c;c[o]?c[o].includes(e)?(console.log("removing...",o,e),s[o]=s[o].filter((t=>t!==e))):(console.log("adding...",o,e),s[o]=[e]):(console.log("added...",o,e),s[o]=[e]),console.log("onSelectChange",c,s,o,e),r.selected=s},*prefetch(){const e=yield Promise.resolve().then(c.bind(c,438)),t=r.getUpdatedUrl;r.prefetched.includes(t)||(r.prefetched.push(t),console.log("facets-context-provider::prefetch",t,r.prefetched),yield e.actions.prefetch(t))},*onCheckboxMouseEnter(){console.log("facets-context-provider::onCheckboxMouseEnter"),yield s.prefetch()},onClear:e=>{console.log("facets-context-provider::onClear",e,r);const t=r.selected;if(!e)return r.selected={},void s.updateResults();Object.keys(r).find((o=>{"object"==typeof r[o]&&t[e].includes(r[o]?.value)&&(r[o].checked=!1)})),delete t[e],r.selected={...t}}},callbacks:{onSelection(){const e=r.getSelected,t=Object.keys(e).length;console.log("facets-context-provider::onSelection()",e,Object.keys(e),t),t<=0?(console.log("disabling...",r,Object.keys(e).length),r.isDisabled=!0):(s.updateResults(),r.isDisabled=!1)}}});var n,l})();
//# sourceMappingURL=view.js.map