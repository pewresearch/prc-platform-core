import*as e from"@wordpress/interactivity";var t={438:e=>{e.exports=import("@wordpress/interactivity-router")}},o={};function l(e){var s=o[e];if(void 0!==s)return s.exports;var c=o[e]={exports:{}};return t[e](c,c.exports,l),c.exports}l.d=(e,t)=>{for(var o in t)l.o(t,o)&&!l.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},l.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{const t=(n={getContext:()=>e.getContext,getElement:()=>e.getElement,store:()=>e.store},r={},l.d(r,n),r),{addQueryArgs:o}=window.wp.url,{state:s,actions:c}=(0,t.store)("prc-platform/facets-context-provider",{state:{mouseEnterPreFetchTimer:500,navigateTimer:1e3,get getSelected(){return s.selected},get getUpdatedUrl(){console.log("getUpdatedUrl...",s);const e={};if(void 0===s.selected)return;Object.keys(s.selected).forEach((t=>{Array.isArray(s.selected[t])?e[t]=s.selected[t].join(","):e[t]=s.selected[t]})),Object.keys(e).forEach((t=>{console.log(e[t]),""===e[t]&&delete e[t]}));const t=window.location.href.split("?")[0].replace(/\/page\/\d+\//,"/"),l=o(t,e);return console.log("getUpdatedUrl=",t,e,l),l}},actions:{*updateResults(){const e=s.getSelected,t=yield Promise.resolve().then(l.bind(l,438));console.log("updateResults",e,Object.keys(e));const o=s.getUpdatedUrl;console.log("updating...",o,Object.keys(e),e),yield t.actions.navigate(o),s.isProcessing=!1},*onButtonClick(){window.location.href=window.location.href},onCheckboxClick:e=>{"LABEL"===e.target.tagName&&e.preventDefault();const o=(0,t.getContext)(),{ref:l}=(0,t.getElement)(),c=l.querySelector("input"),{id:n}=c,{checked:r,value:d,type:a}=s[n];s[n].checked=!r;const i=l.parentElement.parentElement.dataset.wpKey;s.selected[i]||(s.selected[i]=[]),s.selected[i].includes(d)?s.selected[i]=s.selected[i].filter((e=>e!==d)):s.selected[i]="radio"===a?[d]:[...s.selected[i],d],console.log("onCheckboxClick",l,s,n,o)},onSelectChange:(e,t)=>{const o=t.parentElement.dataset.wpKey;console.log("onSelectChange",o,e,t),s.selected[o]||(s.selected[o]=[e]),s.selected[o].includes(e)?s.selected[o]=s.selected[o].filter((t=>t!==e)):s.selected[o]=[e]},onClear:e=>{console.log("onClear",e,s);const t=s.selected;Object.keys(s).find((o=>{"object"==typeof s[o]&&t[e].includes(s[o]?.value)&&(s[o].checked=!1)})),delete t[e],s.selected={...t}},onFacetTokenClick:()=>{const{ref:e,props:o}=(0,t.getElement)(),l=`_${o["data-wp-key"]}`;c.onClear(l)}},callbacks:{onInit(){s["update-results-button"].isDisabled=!0,console.log("facets context provider onInit",s)},*onSelection(){const e=s.getSelected;console.log("onSelection",e,Object.keys(e)),Object.keys(e).length>0&&(s["update-results-button"].isDisabled=!1,yield c.updateResults())}}});var n,r})();
//# sourceMappingURL=view.js.map