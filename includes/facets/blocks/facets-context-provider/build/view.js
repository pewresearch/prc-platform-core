import*as e from"@wordpress/interactivity";var t={438:e=>{e.exports=import("@wordpress/interactivity-router")}},o={};function n(e){var l=o[e];if(void 0!==l)return l.exports;var s=o[e]={exports:{}};return t[e](s,s.exports,n),s.exports}n.d=(e,t)=>{for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{const t=(c={getContext:()=>e.getContext,getElement:()=>e.getElement,store:()=>e.store},r={},n.d(r,c),r),{addQueryArgs:o}=window.wp.url,{state:l,actions:s}=(0,t.store)("prc-platform/facets-context-provider",{state:{mouseEnterPreFetchTimer:500,navigateTimer:1e3,get getSelected(){return l.selected},get getUpdatedUrl(){console.log("getUpdatedUrl...",l);const e={};if(void 0===l.selected)return;Object.keys(l.selected).forEach((t=>{Array.isArray(l.selected[t])?e[t]=l.selected[t].join(","):e[t]=l.selected[t]})),Object.keys(e).forEach((t=>{console.log(e[t]),""===e[t]&&delete e[t]}));const t=window.location.href.split("?")[0].replace(/\/page\/\d+\//,"/"),n=o(t,e);return console.log("getUpdatedUrl=",t,e,n),n}},actions:{*updateResults(){const e=l.getSelected,t=yield Promise.resolve().then(n.bind(n,438));console.log("updateResults",e,Object.keys(e));const o=l.getUpdatedUrl;console.log("updating...",o,Object.keys(e),e),yield t.actions.navigate(o),l.isProcessing=!1},*onButtonClick(){window.location.href=window.location.href},onCheckboxClick:e=>{"LABEL"===e.target.tagName&&e.preventDefault();const o=(0,t.getContext)(),{ref:n}=(0,t.getElement)(),s=n.querySelector("input"),{id:c}=s,{checked:r,value:d,type:a}=l[c];l[c].checked=!r;const i=n.parentElement.parentElement.dataset.wpKey;l.selected[i]||(l.selected[i]=[]),l.selected[i].includes(d)?l.selected[i]=l.selected[i].filter((e=>e!==d)):l.selected[i]="radio"===a?[d]:[...l.selected[i],d],console.log("onCheckboxClick",n,l,c,o)},onSelectChange:(e,t)=>{const o=t.parentElement.dataset.wpKey;console.log("onSelectChange",o,e,t),l.selected[o]||(l.selected[o]=[e]),l.selected[o].includes(e)?l.selected[o]=l.selected[o].filter((t=>t!==e)):l.selected[o]=[e]},onClear:e=>{console.log("onClear",e,l);const t=l.selected;Object.keys(l).find((o=>{"object"==typeof l[o]&&t[e].includes(l[o]?.value)&&(l[o].checked=!1)})),delete t[e],l.selected={...t}},onFacetTokenClick:()=>{const{ref:e,props:o}=(0,t.getElement)(),n=`_${o["data-wp-key"]}`;s.onClear(n)}},callbacks:{onInit(){l["update-results-button"].isDisabled=!0,console.log("facets context provider onInit",l)},*onSelection(){const e=l.getSelected;console.log("onSelection",e,Object.keys(e)),Object.keys(e).length>0&&(console.log("If there are no selected facets, don't enable the button and dont run the query..."),l["update-results-button"].isDisabled=!1,setTimeout((()=>{s.updateResults()}),500))}}});var c,r})();
//# sourceMappingURL=view.js.map