import*as e from"@wordpress/interactivity";var t={438:e=>{e.exports=import("@wordpress/interactivity-router")}},o={};function s(e){var l=o[e];if(void 0!==l)return l.exports;var c=o[e]={exports:{}};return t[e](c,c.exports,s),c.exports}s.d=(e,t)=>{for(var o in t)s.o(t,o)&&!s.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{const t=(n={getContext:()=>e.getContext,getElement:()=>e.getElement,store:()=>e.store},r={},s.d(r,n),r),{addQueryArgs:o}=window.wp.url,{state:l,actions:c}=(0,t.store)("prc-platform/facets-context-provider",{state:{mouseEnterPreFetchTimer:500,navigateTimer:1e3,get getSelected(){return l.selected},get getUpdatedUrl(){console.log("getUpdatedUrl...",l);const e={};if(void 0===l.selected)return;Object.keys(l.selected).forEach((t=>{Array.isArray(l.selected[t])?e[t]=l.selected[t].join(","):e[t]=l.selected[t]})),Object.keys(e).forEach((t=>{console.log(e[t]),""===e[t]&&delete e[t]}));const t=window.location.href.split("?")[0].replace(/\/page\/\d+\//,"/"),s=o(t,e);return console.log("getUpdatedUrl=",t,e,s),s}},actions:{*updateResults(){const e=l.getSelected,t=yield Promise.resolve().then(s.bind(s,438));console.log("updateResults",e,Object.keys(e));const o=l.getUpdatedUrl;console.log("navigating...",o,Object.keys(e),e),yield t.actions.navigate(o),l.isProcessing=!1},*onButtonClick(){yield c.updateResults()},onCheckboxClick:e=>{"LABEL"===e.target.tagName&&e.preventDefault();const o=(0,t.getContext)(),{ref:s}=(0,t.getElement)(),c=s.querySelector("input"),{id:n}=c,{checked:r,value:d,type:a}=l[n];l[n].checked=!r;const i=s.parentElement.parentElement.dataset.wpKey;l.selected[i]||(l.selected[i]=[]),l.selected[i].includes(d)?l.selected[i]=l.selected[i].filter((e=>e!==d)):l.selected[i]="radio"===a?[d]:[...l.selected[i],d],console.log("onCheckboxClick",s,l,n,o)},onSelectChange:(e,t)=>{const o=t.parentElement.dataset.wpKey;console.log("onSelectChange",o,e,t),l.selected[o]||(l.selected[o]=[e]),l.selected[o].includes(e)?l.selected[o]=l.selected[o].filter((t=>t!==e)):l.selected[o]=[e]},onClear:e=>{console.log("onClear",e,l);const t=l.selected;Object.keys(l).find((o=>{"object"==typeof l[o]&&t[e].includes(l[o]?.value)&&(l[o].checked=!1)})),delete t[e],l.selected={...t}},onFacetTokenClick:()=>{const{ref:e,props:o}=(0,t.getElement)(),s=`_${o["data-wp-key"]}`;c.onClear(s)}},callbacks:{onInit(){l["update-results-button"].isDisabled=!0,console.log("facets context provider onInit",l)},*onSelection(){const e=l.getSelected;console.log("onSelection",e,Object.keys(e)),Object.keys(e).length>0&&(l["update-results-button"].isDisabled=!1)}}});var n,r})();
//# sourceMappingURL=view.js.map