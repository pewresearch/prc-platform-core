import*as e from"@wordpress/interactivity";var t={438:e=>{e.exports=import("@wordpress/interactivity-router")}},o={};function r(e){var c=o[e];if(void 0!==c)return c.exports;var n=o[e]={exports:{}};return t[e](n,n.exports,r),n.exports}r.d=(e,t)=>{for(var o in t)r.o(t,o)&&!r.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{const t=(c={getContext:()=>e.getContext,getElement:()=>e.getElement,store:()=>e.store},n={},r.d(n,c),n),{addQueryArgs:o}=window.wp.url;var c,n;function s(e=!1){const t={};if(!1===e)return;Object.keys(e).forEach((o=>{Array.isArray(e[o])?t[`_${o}`]=e[o].join(","):t[`_${o}`]=e[o]})),Object.keys(t).forEach((e=>{""===t[e]&&delete t[e]}));const r=window.location.href.split("?")[0].replace(/\/page\/\d+\//,"/");return o(r,t)}const{state:l,actions:d}=(0,t.store)("prc-platform/facets-context-provider",{state:{mouseEnterPreFetchTimer:500,navigateTimer:1e3,get getSelected(){return l.selected},get getUpdatedUrl(){if(void 0!==l.selected)return s(l.selected)}},actions:{*updateResults(){const e=l.getSelected,t=window.location.href,o=l.getUpdatedUrl;if(o===t)return void console.log("facets-context-provider::updateResults (NO CHANGE)","No change...");l.isProcessing=!0,console.log("facets-context-provider::updateResults (CHANGE DETECTED)",Object.keys(e),o,t);const c=yield Promise.resolve().then(r.bind(r,438));yield c.actions.navigate(o),l.isProcessing=!1},onCheckboxClick:e=>{"LABEL"===e.target.tagName&&e.preventDefault();const o=(0,t.getContext)(),{ref:r}=(0,t.getElement)(),c=r.querySelector("input"),{id:n}=c,{checked:s,value:d,type:i}=l[n];l[n].checked=!s;const a=r.parentElement.parentElement.dataset.wpKey;l.selected[a]||(l.selected[a]=[]),l.selected[a].includes(d)?l.selected[a]=l.selected[a].filter((e=>e!==d)):l.selected[a]="radio"===i?[d]:[...l.selected[a],d],console.log("facets-context-provider::onCheckboxClick",r,l,n,o)},onSelectChange:(e,t)=>{const o=t.parentElement.parentElement.parentElement.dataset.wpKey,r=l.getSelected,c=r;r[o]&&r[o].includes(e)?c[o]=c[o].filter((t=>t!==e)):c[o]=[e],l.selected=c},*prefetch(e){const t=yield Promise.resolve().then(r.bind(r,438));l.prefetched.includes(e)||(l.prefetched.push(e),console.log("facets-context-provider::prefetch",e,l.prefetched),yield t.actions.prefetch(e))},*onCheckboxMouseEnter(e){"LABEL"===e.target.tagName&&e.preventDefault(),(0,t.getContext)();const{ref:o}=(0,t.getElement)(),r=o.querySelector("input"),{id:c}=r,{value:n}=l[c],i=o.parentElement.parentElement.dataset.wpKey,a=s({...l.selected,[i]:n});yield d.prefetch(a)},onClear:(e,t=null)=>{const o=l.selected;return e?t?(o[e]=o[e].filter((e=>e!==t)),void(l.selected={...o})):(Object.keys(l).find((t=>{"object"==typeof l[t]&&o[e].includes(l[t]?.value)&&(l[t].checked=!1)})),delete o[e],void(l.selected={...o})):(l.selected={},void d.updateResults())}},callbacks:{onSelection(){const e=l.getSelected,t=Object.keys(e).length;console.log("facets-context-provider::onSelection()",e,Object.keys(e),t),t<=0?l.isDisabled=!0:(d.updateResults(),l.isDisabled=!1)}}})})();
//# sourceMappingURL=view.js.map