<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: item.jsx</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: item.jsx</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * WordPress Dependencies
 */
import { useEffect, useState } from '@wordpress/element';
import { dispatch } from '@wordpress/data';
import { decodeEntities } from '@wordpress/html-entities';
import { Icon, IconButton } from '@wordpress/components';
import { dragHandle } from '@wordpress/icons';

/**
 * List Store Item
 * @param {object} props
 * @param {string} props.label
 * @param {string} props.defaultLabel
 * @param {string} props.keyValue
 * @param {number} props.index
 * @param {object} props.children
 * @param {function} props.onRemove
 * @param {string} props.storeName
 * @param {boolean} props.lastItem
 * @param {boolean} props.icon
 * @returns {JSX.Element}
 */
function ListStoreItem({
	label,
	defaultLabel,
	keyValue,
	index,
	children,
	onRemove = false,
	storeName = null,
	lastItem = false,
	icon = false,
}) {
	const [labelText, setLabelText] = useState(
		undefined !== label ? label : defaultLabel,
	);

	const getPostTitleByKey = (postId) => {
		const { api } = window.wp;
		const post = new api.models.Post({ id: postId });
		if (null === postId) {
			setLabelText(defaultLabel);
		} else {
			post.fetch().then((matched) => {
				console.log(matched);
				setLabelText(
					`${decodeEntities(matched.title.rendered)} (${matched.id})`,
				);
			});
		}
	};

	useEffect(() => {
		console.log(
			'getPostTitleByKey',
			label,
			defaultLabel,
			keyValue,
			index,
			storeName,
		);
		if (undefined === label &amp;&amp; undefined !== keyValue) {
			getPostTitleByKey(keyValue);
		}
	}, [keyValue]);

	return (
		&lt;div
			style={{
				background: 'white',
				paddingBottom: '1em',
				marginBottom: '1em',
				borderBottom: lastItem ? 'none' : '1px solid #EAEAEA',
			}}
		>
			&lt;div
				style={{
					display: 'flex',
					flexDirection: 'row',
					width: '100%',
					alignItems: 'center',
				}}
			>
				&lt;div style={{ display: 'flex' }}>
					&lt;Icon icon={dragHandle} />
				&lt;/div>
				&lt;div
					style={{
						display: 'flex',
						flexGrow: '1',
						paddingLeft: '1em',
					}}
				>
					{false !== icon &amp;&amp; { icon }}
					&lt;span>{labelText}&lt;/span>
				&lt;/div>
				&lt;div style={{ display: 'flex' }}>
					&lt;IconButton
						icon="no-alt"
						onClick={() => {
							if (false !== onRemove &amp;&amp; 'function' === typeof onRemove) {
								onRemove();
							}
							if ( null !== storeName ) {
								const { remove } = dispatch(`prc/${storeName}`);
								remove(index);
							}
						}}
					/>
				&lt;/div>
			&lt;/div>
			{children}
		&lt;/div>
	);
}

export default ListStoreItem;
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#ListStoreItem">ListStoreItem</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.2</a> on Thu Nov 30 2023 17:34:20 GMT-0500 (Eastern Standard Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
