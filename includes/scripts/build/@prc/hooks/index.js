(()=>{"use strict";const e=window.React,t=window.wp.element,n=window.wp.data,o=window.wp.coreData,r=window.wp.htmlEntities;function s(e,t){window.prcHooks[e]||(window.prcHooks[e]=t)}window.prcHooks={},s("useClientWidth",(function(t,n){const[o,r]=(0,e.useState)();function s(){r(t?.current?.clientWidth)}return(0,e.useEffect)(s,[t,n]),(0,e.useEffect)((()=>{if(console.log("useClientWidth",t,n),void 0===t?.current?.ownerDocument)return;const{defaultView:e}=t?.current?.ownerDocument;return e.addEventListener("resize",s),()=>{e.removeEventListener("resize",s)}}),[t]),o})),s("useDebounce",((e,n)=>{const[o,r]=(0,t.useState)(e);return(0,t.useEffect)((()=>{const t=setTimeout((()=>{r(e)}),n);return()=>{clearTimeout(t)}}),[e,n]),o})),s("useFetch",(e=>{const n=(0,t.useRef)({}),o={status:"idle",error:null,data:[]},[r,s]=(0,t.useReducer)(((e,t)=>{switch(t.type){case"FETCHING":return{...o,status:"fetching"};case"FETCHED":return{...o,status:"fetched",data:t.payload};case"FETCH_ERROR":return{...o,status:"error",error:t.payload};default:return e}}),o);return(0,t.useEffect)((()=>{let t=!1;if(e)return(async()=>{if(s({type:"FETCHING"}),n.current[e]){const t=n.current[e];s({type:"FETCHED",payload:t})}else try{const o=await fetch(e),r=await o.json();n.current[e]=r,t||s({type:"FETCHED",payload:r})}catch(e){t||s({type:"FETCH_ERROR",payload:e.message})}})(),function(){t=!0}}),[e]),r})),s("useKeyPress",((e=null,n=null)=>{const[o,r]=(0,t.useState)(!1);function s({key:t,code:o}){o===n&&r(!0),t===e&&r(!0)}const i=({key:t,code:o})=>{o===n&&r(!1),t===e&&r(!1)};return(0,t.useEffect)((()=>(window.addEventListener("keydown",s),window.addEventListener("keyup",i),()=>{window.removeEventListener("keydown",s),window.removeEventListener("keyup",i)})),[]),o})),s("useLocalStorage",((e,n)=>{const[o,r]=(0,t.useState)((()=>{try{const t=window.localStorage.getItem(e);return t?JSON.parse(t):n}catch(e){return console.log(e),n}}));return[o,t=>{try{const n=t instanceof Function?t(o):t;r(n),window.localStorage.setItem(e,JSON.stringify(n))}catch(e){console.log(e)}}]})),s("useWindowSize",(()=>{const[e,n]=(0,t.useState)({width:void 0,height:void 0});return(0,t.useEffect)((()=>{function e(){n({width:window.innerWidth,height:window.innerHeight})}return window.addEventListener("resize",e),e(),()=>window.removeEventListener("resize",e)}),[]),e})),s("useTaxonomy",(function(e=null,t=null,r=["id","name"]){const{taxId:s,taxName:i}=(0,n.useSelect)((n=>{const{getEntityRecords:s}=n(o.store),i=null!==t?s("taxonomy",e,{context:"view",per_page:1,_fields:r,slug:t}):null;return{taxId:i?.[0]?.id,taxName:i?.[0]?.name}}));return[s,i]})),s("useHasSelectedInnerBlock",(function(e){return(0,n.useSelect)((t=>{const n=t("core/block-editor").hasSelectedInnerBlock(e,!0),o=t("core/block-editor").getSelectedBlockClientId()===e;return n||o}),[e])})),s("useMultiEntityRecords",(function(e="postType",o=[],r={},s={enabled:!1}){const[i,c]=(0,t.useState)(!1),[u,l]=(0,t.useState)([]);return(0,t.useEffect)((()=>{s.enabled&&(c(!0),(async()=>{const t=(await Promise.all(o.map((t=>(0,n.select)("core").getEntityRecords(e,t,r))))).filter((e=>null!==e)).flat();l(t),c(!1)})())}),[e,o,r,s.enabled]),{records:u,isResolving:i}})),s("useAfterPreview",(()=>{const[e,o]=(0,t.useState)(!1),[r,s]=(0,t.useState)(!1),i=(0,t.useRef)(!1),{isPreviewing:c,isAutosavingPost:u}=(0,n.useSelect)((e=>({isPreviewing:e("core/editor").isPreviewingPost(),isAutosavingPost:e("core/editor").isAutosavingPost()})),[]);return(0,t.useEffect)((()=>{!c&&!u||i.current||(console.log("start preview",i.current),o(!1),s(!0),i.current=!0),console.log("check preview",c,i.current),c||u||!i.current||(console.log("end preview",i.current),o(!0),s(!1),i.current=!1)}),[c,u]),{isPreviewed:e,isPreviewing:r}})),s("useAfterPublish",(()=>{const[e,o]=(0,t.useState)(!1),[r,s]=(0,t.useState)(!1),i=(0,t.useRef)(!1),{isPublishing:c,isAutosavingPost:u}=(0,n.useSelect)((e=>({isPublishing:e("core/editor").isPublishingPost(),isAutosavingPost:e("core/editor").isAutosavingPost()})),[]);return(0,t.useEffect)((()=>{!c&&!u||i.current||(console.log("start publish",i.current),o(!1),s(!0),i.current=!0),console.log("check publish",c,i.current),c||u||!i.current||(console.log("end publish",i.current),o(!0),s(!1),i.current=!1)}),[c,u]),{isPublished:e,isPublishing:r}})),s("usePostIdsAsOptions",(function(e=[],o="post"){const[s,i]=(0,t.useState)([]);return(0,t.useEffect)((()=>{if(e.length){const t=e.map((e=>{const t=(0,n.select)("core").getEntityRecord("postType",o,e);return t?{value:e,label:(0,r.decodeEntities)(t.title.rendered)}:null}));i(t)}}),[e,o]),s.filter((e=>null!==e))})),s("useDeviceBoundAttribute",(function(e,t){var o;const{updateBlockAttributes:r}=(0,n.useDispatch)("core/block-editor"),{attributes:s,deviceType:i}=(0,n.useSelect)((t=>{const n=t("core/editor").getDeviceType();return{attributes:t("core/block-editor").getBlockAttributes(e),deviceType:n.toLowerCase()}}),[e]),c=s[t]||{desktop:"",tablet:"",mobile:""};return[null!==(o=c[i])&&void 0!==o?o:"",n=>{r(e,{[t]:{...c,[i]:n}})}]})),console.log("Loading @prc/hooks...",window.prcHooks)})();
//# sourceMappingURL=index.js.map