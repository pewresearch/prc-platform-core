(()=>{"use strict";const t=window.wp.hooks,o=window.wp.data,s="prc-platform/post-publish-pipeline",e={postStatus:null},p=(0,o.createReduxStore)(s,{reducer:(t=e,o)=>"SET_POST_STATUS"===o.type?{...t,postStatus:o.postStatus}:t,actions:{setPostStatus:t=>({type:"SET_POST_STATUS",postStatus:t})},selectors:{getPostStatus:t=>t.postStatus}});(0,o.register)(p),(0,t.addFilter)("editor.preSavePost","editor",(e=>{const p=(0,o.select)(s).getPostStatus(),i=(0,o.select)("core/editor").getEditedPostAttribute("status"),r=(0,o.select)("core/editor").getCurrentPostId(),d=(0,o.select)("core/editor").getCurrentPostType(),l=(0,o.select)("core/edit-site")?.getEditorMode()||!1;return l?(console.log("prc-platform.onSiteEdit",{edits:e,postId:r,postType:d,postStatus:i}),(0,t.doAction)("prc-platform.onSiteEdit",{edits:e,postId:r,postType:d,postStatus:i}),e):(null===p&&"auto-draft"===i&&(console.log("prc-platform.onPostInit",{edits:e,postId:r,postType:d,postStatus:i}),(0,t.doAction)("prc-platform.onPostInit",{edits:e,postId:r,postType:d,isSiteEditor:l})),"draft"!==p&&null!==p||"draft"!==i||(console.log("prc-platform.onIncrementalSave",{edits:e,postId:r,postType:d,postStatus:i}),(0,t.doAction)("prc-platform.onIncrementalSave",{edits:e,postId:r,postType:d,isSiteEditor:l})),"draft"===p&&"publish"===i&&(console.log("prc-platform.onPublish",{edits:e,postId:r,postType:d,postStatus:i}),(0,t.doAction)("prc-platform.onPublish",{edits:e,postId:r,postType:d,isSiteEditor:l})),"publish"!==p&&null!==p||"publish"!==i||(console.log("prc-platform.onUpdate",{edits:e,postId:r,postType:d,postStatus:i}),(0,t.doAction)("prc-platform.onUpdate",{edits:e,postId:r,postType:d,isSiteEditor:l})),"publish"===p&&"draft"===i&&(console.log("prc-platform.onUnpublish",{edits:e,postId:r,postType:d,postStatus:i}),(0,t.doAction)("prc-platform.onUnpublish",{edits:e,postId:r,postType:d,isSiteEditor:l})),(0,o.dispatch)(s).setPostStatus(i),e)}))})();