{"version":3,"file":"index.js","mappings":"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","sources":["webpack://@pewresearch/prc-platform-staff-info-panel/external window [\"wp\",\"element\"]","webpack://@pewresearch/prc-platform-staff-info-panel/external window [\"wp\",\"plugins\"]","webpack://@pewresearch/prc-platform-staff-info-panel/external window \"prcComponents\"","webpack://@pewresearch/prc-platform-staff-info-panel/external window [\"wp\",\"data\"]","webpack://@pewresearch/prc-platform-staff-info-panel/external window [\"wp\",\"coreData\"]","webpack://@pewresearch/prc-platform-staff-info-panel/external window [\"wp\",\"components\"]","webpack://@pewresearch/prc-platform-staff-info-panel/external window [\"wp\",\"editPost\"]","webpack://@pewresearch/prc-platform-staff-info-panel/external window \"ReactJSXRuntime\"","webpack://@pewresearch/prc-platform-staff-info-panel/./src/maelstrom.jsx","webpack://@pewresearch/prc-platform-staff-info-panel/external window [\"wp\",\"i18n\"]","webpack://@pewresearch/prc-platform-staff-info-panel/./src/staff-info.jsx","webpack://@pewresearch/prc-platform-staff-info-panel/./src/wp-user.jsx","webpack://@pewresearch/prc-platform-staff-info-panel/./src/index.js"],"sourcesContent":["const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"element\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"plugins\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"prcComponents\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"data\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"coreData\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"components\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"editPost\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"ReactJSXRuntime\"];","/**\n * External Dependencies\n */\nimport { TermSelect } from '@prc/components';\n\n/**\n * WordPress Dependencies\n */\n\nimport { useMemo } from '@wordpress/element';\nimport { useSelect, useDispatch } from '@wordpress/data';\nimport { useEntityProp } from '@wordpress/core-data';\nimport { ToggleControl } from '@wordpress/components';\nimport { PluginDocumentSettingPanel } from '@wordpress/edit-post';\n\nexport default function MaelstromPanel() {\n\tconst { postType, postId } = useSelect(\n\t\t(select) => ({\n\t\t\tpostType: select('core/editor').getCurrentPostType(),\n\t\t\tpostId: select('core/editor').getCurrentPostId(),\n\t\t}),\n\t\t[]\n\t);\n\tconst [meta, setMeta] = useEntityProp('postType', postType, 'meta', postId);\n\tconst { _maelstrom } = meta;\n\tconst { enabled, restricted } = useMemo(() => {\n\t\tif (_maelstrom && _maelstrom.enabled && _maelstrom.restricted) {\n\t\t\treturn {\n\t\t\t\tenabled: true,\n\t\t\t\trestricted: _maelstrom.restricted,\n\t\t\t};\n\t\t}\n\t\treturn {\n\t\t\tenabled: false,\n\t\t\trestricted: [],\n\t\t};\n\t}, [_maelstrom]);\n\n\tconst updateRestricted = (value) => {\n\t\tconst newValue = restricted;\n\t\t// if the value is not in the array, add it\n\t\tif (!newValue.includes(value)) {\n\t\t\tnewValue.push(value);\n\t\t} else {\n\t\t\t// if the value is in the array, remove it\n\t\t\tnewValue.splice(newValue.indexOf(value), 1);\n\t\t}\n\t\tsetMeta({\n\t\t\t_maelstrom: {\n\t\t\t\tenabled,\n\t\t\t\trestricted: newValue,\n\t\t\t},\n\t\t});\n\t\tconsole.log('meta...',meta);\n\t};\n\n\tconst updateEnabled = (value) => {\n\t\tsetMeta({\n\t\t\t_maelstrom: {\n\t\t\t\tenabled: value,\n\t\t\t\trestricted,\n\t\t\t},\n\t\t});\n\t};\n\n\treturn (\n\t\t<PluginDocumentSettingPanel\n\t\t\tname=\"prc-staff-info-safety\"\n\t\t\ttitle=\"Staff Safety (Maelstrom)\"\n\t\t>\n\t\t\t<ToggleControl\n\t\t\t\tlabel=\"Enable Maelstrom\"\n\t\t\t\tchecked={enabled}\n\t\t\t\tonChange={() => {\n\t\t\t\t\tupdateEnabled(!enabled);\n\t\t\t\t}}\n\t\t\t/>\n\t\t\t{enabled && (\n\t\t\t\t<TermSelect\n\t\t\t\t\t{...{\n\t\t\t\t\t\tonChange: (x) => {\n\t\t\t\t\t\t\tconsole.log('MAELSTROM', x);\n\t\t\t\t\t\t\tupdateRestricted(x.name);\n\t\t\t\t\t\t},\n\t\t\t\t\t\ttaxonomy: 'regions-countries',\n\t\t\t\t\t\tvalue: restricted,\n\t\t\t\t\t\tmaxTerms: 5,\n\t\t\t\t\t\tlabel: 'Select a region to restrict',\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t)}\n\t\t</PluginDocumentSettingPanel>\n\t);\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"i18n\"];","/**\n * WordPress Dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { Fragment } from '@wordpress/element';\nimport { useSelect } from '@wordpress/data';\nimport { useEntityProp } from '@wordpress/core-data';\nimport { CardDivider, ToggleControl, TextControl } from '@wordpress/components';\nimport { PluginDocumentSettingPanel } from '@wordpress/edit-post';\n\nexport default function StaffInfoPanel() {\n\tconst { postType, postId } = useSelect(\n\t\t(select) => ({\n\t\t\tpostType: select('core/editor').getCurrentPostType(),\n\t\t\tpostId: select('core/editor').getCurrentPostId(),\n\t\t}),\n\t\t[]\n\t);\n\n\tconst [meta, setMeta] = useEntityProp('postType', postType, 'meta', postId);\n\tconst { jobTitle, jobTitleExtended, socialProfiles, bylineLinkEnabled } =\n\t\tmeta;\n\n\treturn (\n\t\t<PluginDocumentSettingPanel\n\t\t\tname=\"prc-staff-info\"\n\t\t\ttitle=\"Staff Information\"\n\t\t>\n\t\t\t<ToggleControl\n\t\t\t\tlabel={__('Display Byline Link')}\n\t\t\t\thelp={__(\n\t\t\t\t\t'All staff are assigned a byline tem, however not all staff have a link to a byline archive \"staff bio\" page. If this staff member has a bio page, enable this option to link their byline to their bio page.'\n\t\t\t\t)}\n\t\t\t\tchecked={bylineLinkEnabled}\n\t\t\t\tonChange={() => {\n\t\t\t\t\tsetMeta({\n\t\t\t\t\t\t...meta,\n\t\t\t\t\t\tbylineLinkEnabled: !bylineLinkEnabled,\n\t\t\t\t\t});\n\t\t\t\t}}\n\t\t\t/>\n\t\t\t<CardDivider />\n\t\t\t<TextControl\n\t\t\t\tlabel={__('Job Title')}\n\t\t\t\tvalue={jobTitle}\n\t\t\t\tonChange={(value) => {\n\t\t\t\t\tsetMeta({ ...meta, jobTitle: value });\n\t\t\t\t}}\n\t\t\t\tplaceholder=\"Research Assistant\"\n\t\t\t/>\n\t\t\t<TextControl\n\t\t\t\tlabel={__('Job Title Extended')}\n\t\t\t\thelp={__(\n\t\t\t\t\t'This extended job title appears under Short Read posts.'\n\t\t\t\t)}\n\t\t\t\tvalue={jobTitleExtended}\n\t\t\t\tonChange={(value) => {\n\t\t\t\t\tsetMeta({\n\t\t\t\t\t\t...meta,\n\t\t\t\t\t\tjobTitleExtended: value,\n\t\t\t\t\t});\n\t\t\t\t}}\n\t\t\t\tplaceholder=\"is a Research Assistant at Pew Research Center.\"\n\t\t\t/>\n\t\t</PluginDocumentSettingPanel>\n\t);\n}\n","/**\n * External Dependencies\n */\n\n/**\n * WordPress Dependencies\n */\n\nimport { useMemo } from '@wordpress/element';\nimport { useSelect, useDispatch } from '@wordpress/data';\nimport { useEntityProp } from '@wordpress/core-data';\nimport { ToggleControl } from '@wordpress/components';\nimport { PluginDocumentSettingPanel } from '@wordpress/edit-post';\n\nexport default function WPUserPanel() {\n\tconst { postType, postId } = useSelect(\n\t\t(select) => ({\n\t\t\tpostType: select('core/editor').getCurrentPostType(),\n\t\t\tpostId: select('core/editor').getCurrentPostId(),\n\t\t}),\n\t\t[]\n\t);\n\tconst [meta, setMeta] = useEntityProp('postType', postType, 'meta', postId);\n\tconst { _wp_user } = meta;\n\n\treturn (\n\t\t<PluginDocumentSettingPanel\n\t\t\tname=\"prc-staff-wp-user\"\n\t\t\ttitle=\"WordPress User\"\n\t\t>\n\t\t\t<p>WIP</p>\n\t\t\t<p>\n\t\t\t\tControl to tie a wp_user profile to a staff profile will go\n\t\t\t\there. This will enable slack notifications and the like in the\n\t\t\t\tfuture.\n\t\t\t</p>\n\t\t</PluginDocumentSettingPanel>\n\t);\n}\n","/**\n * WordPress Dependencies\n */\nimport { Fragment } from '@wordpress/element';\nimport { registerPlugin } from '@wordpress/plugins';\n\n/**\n * Internal Dependencies\n */\nimport MaelstromPanel from './maelstrom';\nimport StaffInfoPanel from './staff-info';\nimport WPUserPanel from './wp-user';\n\nregisterPlugin('prc-staff-info', {\n\trender: () => {\n\t\treturn (\n\t\t\t<Fragment>\n\t\t\t\t<StaffInfoPanel />\n\t\t\t\t<MaelstromPanel />\n\t\t\t\t<WPUserPanel />\n\t\t\t</Fragment>\n\t\t);\n\t},\n\ticon: null,\n});\n"],"names":["window","MaelstromPanel","postType","postId","useSelect","select","getCurrentPostType","getCurrentPostId","meta","setMeta","useEntityProp","_maelstrom","enabled","restricted","useMemo","_jsxs","PluginDocumentSettingPanel","name","title","children","_jsx","ToggleControl","label","checked","onChange","TermSelect","x","console","log","value","newValue","includes","splice","indexOf","push","updateRestricted","taxonomy","maxTerms","StaffInfoPanel","jobTitle","jobTitleExtended","socialProfiles","bylineLinkEnabled","__","help","CardDivider","TextControl","placeholder","WPUserPanel","_wp_user","registerPlugin","render","Fragment","icon"],"sourceRoot":""}