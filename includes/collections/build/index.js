(()=>{"use strict";const e=window.wp.element,t=window.wp.plugins,r=window.wp.editor,n=window.wp.coreData,i=window.wp.data,o=window.wp.i18n,s=window.wp.components,l=window.React,a=window.ReactJSXRuntime;function c({kickerSlug:t,onChange:r=()=>{}}){const{siteUrl:i}=window.prcPlatform,c=i?`${i}/wp-admin/site-editor.php?path=%2Fpatterns&categoryType=wp_template_part&categoryId=kicker`:"",{kickerOptions:p,hasKickers:u,selectedKickerAndExists:d}=function({kickerSlug:e,setKickerSlug:t=()=>{}}){const{hasResolved:r,records:i}=(0,n.useEntityRecords)("postType","wp_template_part",{per_page:-1}),o=(0,l.useMemo)((()=>{if(!i||!i.length)return[];const t=i.find((t=>t.slug===e));return t?[{label:t.title.rendered,value:t.slug}]:i.filter((e=>"kicker"===e.area||e.title.rendered.includes("kicker"))).map((e=>({label:e.title.rendered,value:e.slug})))}),[e,i]),s=(0,l.useMemo)((()=>o.length>0),[o]),a=(0,l.useMemo)((()=>e&&o?.length&&o.some((t=>t.value===e))),[e,o]),c=(0,l.useMemo)((()=>{if(!(e&&r&&i&&i.length))return;const t=r&&i&&i.find((t=>t.slug===e));return t.theme&&t.slug?`${t.theme}//${t.slug}`:void 0}),[e,r,i]);return console.log("useKickerTemplatePart",o,s,a,i,c),{kickerOptions:o,hasKickers:s,selectedKickerAndExists:a,kickerId:c,setKickerSlug:t}}({kickerSlug:t,setKickerSlug:e=>r(e)}),k=(0,a.jsx)(s.Notice,{status:"warning",isDismissible:!1,children:(0,e.createInterpolateElement)((0,o.__)("No kicker templates could be found. Create a new one in the <a>Site Editor</a>.","kicker-control"),{a:(0,a.jsx)("a",{href:c,target:"_blank",rel:"noreferrer"})})}),g=(0,a.jsx)(s.Notice,{status:"warning",isDismissible:!1,children:(0,o.__)("The selected kicker template no longer exists. Choose another.","kicker-control")});return(0,a.jsxs)(e.Fragment,{children:[(0,a.jsx)(s.ComboboxControl,{label:(0,o.__)("Kicker Template","kicker-control"),value:t,options:p,onChange:r,help:u&&(0,e.createInterpolateElement)((0,o.__)("Create and modify kicker templates in the <a>Site Editor</a>.","kicker-control"),{a:(0,a.jsx)("a",{href:c,target:"_blank",rel:"noreferrer"})})}),!u&&k,u&&!d&&g]})}const p="prc-platform--collections";(0,t.registerPlugin)(p,{render:function(){const{postType:t,parentId:o}=(0,i.useSelect)((e=>{const t=e(r.store).getEditedPostAttribute("post_parent"),n=e(r.store).getCurrentPostType(),i=e(r.store).getCurrentPostId();return{postType:n,postId:i,parentId:0!==t?t:i,isChildPost:0!==t}}),[]),[s,l]=(0,n.useEntityProp)("postType",t,"meta",o),u=(0,e.useMemo)((()=>s.kicker_pattern_slug),[s]);return(0,a.jsx)(r.PluginDocumentSettingPanel,{name:p,title:"Collection Kicker",children:(0,a.jsx)(c,{kickerSlug:u,onChange:e=>{return t=e,l({...s,kicker_pattern_slug:t});var t}})})}})})();
//# sourceMappingURL=index.js.map