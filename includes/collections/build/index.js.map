{"version":3,"file":"index.js","mappings":"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","sources":["webpack://@pewresearch/prc-platform-collections/external window [\"wp\",\"element\"]","webpack://@pewresearch/prc-platform-collections/external window [\"wp\",\"plugins\"]","webpack://@pewresearch/prc-platform-collections/external window [\"wp\",\"editor\"]","webpack://@pewresearch/prc-platform-collections/external window [\"wp\",\"coreData\"]","webpack://@pewresearch/prc-platform-collections/external window [\"wp\",\"data\"]","webpack://@pewresearch/prc-platform-collections/external window [\"wp\",\"i18n\"]","webpack://@pewresearch/prc-platform-collections/external window [\"wp\",\"components\"]","webpack://@pewresearch/prc-platform-collections/external window \"React\"","webpack://@pewresearch/prc-platform-collections/external window \"ReactJSXRuntime\"","webpack://@pewresearch/prc-platform-collections/./src/control-template-part-kicker.jsx","webpack://@pewresearch/prc-platform-collections/./src/use-kicker-template-part.js","webpack://@pewresearch/prc-platform-collections/./src/index.js"],"sourcesContent":["const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"element\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"plugins\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"editor\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"coreData\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"data\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"i18n\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"components\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"React\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"ReactJSXRuntime\"];","/**\n * WordPress Dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { useSelect } from '@wordpress/data';\n// eslint-disable-next-line no-restricted-imports\nimport { createInterpolateElement, Fragment } from '@wordpress/element';\nimport {\n\tComboboxControl,\n\tNotice,\n\t__experimentalHStack as HStack, // eslint-disable-line\n\t__experimentalToggleGroupControl as ToggleGroupControl, // eslint-disable-line\n\t__experimentalToggleGroupControlOptionIcon as ToggleGroupControlOptionIcon, // eslint-disable-line\n} from '@wordpress/components';\n\n/**\n * Internal Dependencies\n */\nimport useKickerTemplatePart from './use-kicker-template-part';\n\nexport default function KickerTemplatePartControl({\n\tkickerSlug,\n\tonChange = () => {},\n}) {\n\tconst { siteUrl } = window.prcPlatform;\n\tconst kickerTemplateUrl = siteUrl\n\t\t? `${siteUrl}/wp-admin/site-editor.php?path=%2Fpatterns&categoryType=wp_template_part&categoryId=kicker`\n\t\t: '';\n\n\t// Fetch all template parts.\n\tconst { kickerOptions, hasKickers, selectedKickerAndExists } =\n\t\tuseKickerTemplatePart({\n\t\t\tkickerSlug,\n\t\t\tsetKickerSlug: (newVal) => onChange(newVal),\n\t\t});\n\n\t// Notice for when no kickers have been created.\n\tconst noKickersNotice = (\n\t\t<Notice status=\"warning\" isDismissible={false}>\n\t\t\t{createInterpolateElement(\n\t\t\t\t__(\n\t\t\t\t\t'No kicker templates could be found. Create a new one in the <a>Site Editor</a>.',\n\t\t\t\t\t'kicker-control'\n\t\t\t\t),\n\t\t\t\t{\n\t\t\t\t\ta: (\n\t\t\t\t\t\t<a // eslint-disable-line\n\t\t\t\t\t\t\thref={kickerTemplateUrl}\n\t\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\t\trel=\"noreferrer\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t),\n\t\t\t\t}\n\t\t\t)}\n\t\t</Notice>\n\t);\n\n\t// Notice for when the selected kicker template no longer exists.\n\tconst kickerDoesntExistNotice = (\n\t\t<Notice status=\"warning\" isDismissible={false}>\n\t\t\t{__(\n\t\t\t\t'The selected kicker template no longer exists. Choose another.',\n\t\t\t\t'kicker-control'\n\t\t\t)}\n\t\t</Notice>\n\t);\n\n\treturn (\n\t\t<Fragment>\n\t\t\t<ComboboxControl\n\t\t\t\tlabel={__('Kicker Template', 'kicker-control')}\n\t\t\t\tvalue={kickerSlug}\n\t\t\t\toptions={kickerOptions}\n\t\t\t\tonChange={onChange}\n\t\t\t\thelp={\n\t\t\t\t\thasKickers &&\n\t\t\t\t\tcreateInterpolateElement(\n\t\t\t\t\t\t__(\n\t\t\t\t\t\t\t'Create and modify kicker templates in the <a>Site Editor</a>.',\n\t\t\t\t\t\t\t'kicker-control'\n\t\t\t\t\t\t),\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ta: (\n\t\t\t\t\t\t\t<a // eslint-disable-line\n\t\t\t\t\t\t\t\t\thref={kickerTemplateUrl}\n\t\t\t\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\t\t\t\trel=\"noreferrer\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t}\n\t\t\t\t\t)\n\t\t\t\t}\n\t\t\t/>\n\t\t\t{!hasKickers && noKickersNotice}\n\t\t\t{hasKickers && !selectedKickerAndExists && kickerDoesntExistNotice}\n\t\t</Fragment>\n\t);\n}\n","/**\n * WordPress Dependencies\n */\nimport { useEntityRecords } from '@wordpress/core-data';\nimport { useMemo } from 'react';\n\nexport default function useKickerTemplatePart({\n\tkickerSlug,\n\tsetKickerSlug = () => {},\n}) {\n\t// Fetch all template parts.\n\tconst { hasResolved, records } = useEntityRecords(\n\t\t'postType',\n\t\t'wp_template_part',\n\t\t{\n\t\t\tper_page: -1,\n\t\t}\n\t);\n\n\t// Filter the template parts for those in the 'kicker' area.\n\tconst kickerOptions = useMemo(() => {\n\t\tif (!records || !records.length) {\n\t\t\treturn [];\n\t\t}\n\t\tconst selectedKicker = records.find((item) => item.slug === kickerSlug);\n\t\tif (selectedKicker) {\n\t\t\treturn [\n\t\t\t\t{\n\t\t\t\t\tlabel: selectedKicker.title.rendered,\n\t\t\t\t\tvalue: selectedKicker.slug,\n\t\t\t\t},\n\t\t\t];\n\t\t}\n\t\treturn records\n\t\t\t.filter(\n\t\t\t\t(item) =>\n\t\t\t\t\titem.area === 'kicker' ||\n\t\t\t\t\titem.title.rendered.includes('kicker')\n\t\t\t)\n\t\t\t.map((item) => ({\n\t\t\t\tlabel: item.title.rendered,\n\t\t\t\tvalue: item.slug,\n\t\t\t}));\n\t}, [kickerSlug, records]);\n\n\tconst hasKickers = useMemo(() => kickerOptions.length > 0, [kickerOptions]);\n\tconst selectedKickerAndExists = useMemo(\n\t\t() =>\n\t\t\tkickerSlug &&\n\t\t\tkickerOptions?.length &&\n\t\t\tkickerOptions.some((item) => item.value === kickerSlug),\n\t\t[kickerSlug, kickerOptions]\n\t);\n\tconst kickerId = useMemo(() => {\n\t\tif (!kickerSlug || !hasResolved || !records || !records.length) {\n\t\t\treturn;\n\t\t}\n\t\tconst r =\n\t\t\thasResolved &&\n\t\t\trecords &&\n\t\t\trecords.find((item) => item.slug === kickerSlug);\n\t\tif (r.theme && r.slug) {\n\t\t\treturn `${r.theme}//${r.slug}`;\n\t\t}\n\t}, [kickerSlug, hasResolved, records]);\n\n\tconsole.log(\n\t\t'useKickerTemplatePart',\n\t\tkickerOptions,\n\t\thasKickers,\n\t\tselectedKickerAndExists,\n\t\trecords,\n\t\tkickerId\n\t);\n\n\treturn {\n\t\tkickerOptions,\n\t\thasKickers,\n\t\tselectedKickerAndExists,\n\t\tkickerId,\n\t\tsetKickerSlug,\n\t};\n}\n","/**\n * External Dependencies\n */\n\n/**\n * WordPress Dependencies\n */\nimport { useMemo } from '@wordpress/element';\nimport { registerPlugin } from '@wordpress/plugins';\nimport {\n\tPluginDocumentSettingPanel,\n\tstore as editorStore,\n} from '@wordpress/editor';\nimport { useEntityProp } from '@wordpress/core-data';\nimport { useSelect } from '@wordpress/data';\n\n/**\n * Internal Dependencies\n */\nimport KickerTemplatePartControl from './control-template-part-kicker';\n\nconst PLUGIN_NAME = 'prc-platform--collections';\n\nexport default function CollectionPanel() {\n\tconst { postType, parentId } = useSelect((select) => {\n\t\tconst postParentId =\n\t\t\tselect(editorStore).getEditedPostAttribute('post_parent');\n\t\tconst currentPostType = select(editorStore).getCurrentPostType();\n\t\tconst currentPostId = select(editorStore).getCurrentPostId();\n\t\tconst currentParentId =\n\t\t\t0 !== postParentId ? postParentId : currentPostId;\n\t\treturn {\n\t\t\tpostType: currentPostType,\n\t\t\tpostId: currentPostId,\n\t\t\tparentId: currentParentId,\n\t\t\tisChildPost: 0 !== postParentId,\n\t\t};\n\t}, []);\n\tconst [meta, setMeta] = useEntityProp(\n\t\t'postType',\n\t\tpostType,\n\t\t'meta',\n\t\tparentId\n\t);\n\tconst kickerSlug = useMemo(() => {\n\t\treturn meta.kicker_pattern_slug;\n\t}, [meta]);\n\tconst updateKickerSlug = (newSlug) =>\n\t\tsetMeta({\n\t\t\t...meta,\n\t\t\tkicker_pattern_slug: newSlug,\n\t\t});\n\treturn (\n\t\t<PluginDocumentSettingPanel\n\t\t\tname={PLUGIN_NAME}\n\t\t\ttitle=\"Collection Kicker\"\n\t\t>\n\t\t\t<KickerTemplatePartControl\n\t\t\t\tkickerSlug={kickerSlug}\n\t\t\t\tonChange={(value) => updateKickerSlug(value)}\n\t\t\t/>\n\t\t</PluginDocumentSettingPanel>\n\t);\n}\n\nregisterPlugin(PLUGIN_NAME, {\n\trender: CollectionPanel,\n});\n"],"names":["window","KickerTemplatePartControl","kickerSlug","onChange","siteUrl","prcPlatform","kickerTemplateUrl","kickerOptions","hasKickers","selectedKickerAndExists","setKickerSlug","hasResolved","records","useEntityRecords","per_page","useMemo","length","selectedKicker","find","item","slug","label","title","rendered","value","filter","area","includes","map","some","kickerId","r","theme","console","log","useKickerTemplatePart","newVal","noKickersNotice","_jsx","Notice","status","isDismissible","children","createInterpolateElement","__","a","href","target","rel","kickerDoesntExistNotice","_jsxs","Fragment","ComboboxControl","options","help","PLUGIN_NAME","registerPlugin","render","postType","parentId","useSelect","select","postParentId","editorStore","getEditedPostAttribute","currentPostType","getCurrentPostType","currentPostId","getCurrentPostId","postId","isChildPost","meta","setMeta","useEntityProp","kicker_pattern_slug","PluginDocumentSettingPanel","name","updateKickerSlug","newSlug"],"sourceRoot":""}