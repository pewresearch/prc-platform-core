{"version":3,"file":"index.js","mappings":"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","sources":["webpack://@pewresearch/prc-platform-post-report-package/external window \"React\"","webpack://@pewresearch/prc-platform-post-report-package/external window [\"wp\",\"element\"]","webpack://@pewresearch/prc-platform-post-report-package/./node_modules/@wordpress/icons/build-module/icon/index.js","webpack://@pewresearch/prc-platform-post-report-package/external window [\"wp\",\"primitives\"]","webpack://@pewresearch/prc-platform-post-report-package/./node_modules/@wordpress/icons/build-module/library/block-meta.js","webpack://@pewresearch/prc-platform-post-report-package/external window [\"wp\",\"i18n\"]","webpack://@pewresearch/prc-platform-post-report-package/external window [\"wp\",\"plugins\"]","webpack://@pewresearch/prc-platform-post-report-package/external window [\"wp\",\"editPost\"]","webpack://@pewresearch/prc-platform-post-report-package/external window [\"wp\",\"editor\"]","webpack://@pewresearch/prc-platform-post-report-package/external window [\"wp\",\"data\"]","webpack://@pewresearch/prc-platform-post-report-package/external window [\"wp\",\"components\"]","webpack://@pewresearch/prc-platform-post-report-package/external window \"prcHooks\"","webpack://@pewresearch/prc-platform-post-report-package/external window [\"wp\",\"coreData\"]","webpack://@pewresearch/prc-platform-post-report-package/./src/context.js","webpack://@pewresearch/prc-platform-post-report-package/external window \"ReactDOM\"","webpack://@pewresearch/prc-platform-post-report-package/./node_modules/react-movable/lib/utils.js","webpack://@pewresearch/prc-platform-post-report-package/./node_modules/react-movable/lib/List.js","webpack://@pewresearch/prc-platform-post-report-package/./src/utils.js","webpack://@pewresearch/prc-platform-post-report-package/external window [\"wp\",\"htmlEntities\"]","webpack://@pewresearch/prc-platform-post-report-package/./node_modules/@wordpress/icons/build-module/library/drag-handle.js","webpack://@pewresearch/prc-platform-post-report-package/./src/list-item.jsx","webpack://@pewresearch/prc-platform-post-report-package/external window [\"wp\",\"url\"]","webpack://@pewresearch/prc-platform-post-report-package/./src/back-chapters/add-child-modal.jsx","webpack://@pewresearch/prc-platform-post-report-package/./src/back-chapters/create-draft-modal.jsx","webpack://@pewresearch/prc-platform-post-report-package/./src/back-chapters/post-search-by-edit-url-field.jsx","webpack://@pewresearch/prc-platform-post-report-package/./node_modules/@wordpress/icons/build-module/library/edit.js","webpack://@pewresearch/prc-platform-post-report-package/./node_modules/@wordpress/icons/build-module/library/pencil.js","webpack://@pewresearch/prc-platform-post-report-package/./node_modules/@wordpress/icons/build-module/library/external.js","webpack://@pewresearch/prc-platform-post-report-package/./src/back-chapters/existing-back-chapter-toolbar.jsx","webpack://@pewresearch/prc-platform-post-report-package/./src/back-chapters/index.js","webpack://@pewresearch/prc-platform-post-report-package/external window [\"wp\",\"blockEditor\"]","webpack://@pewresearch/prc-platform-post-report-package/./src/materials/type-select.jsx","webpack://@pewresearch/prc-platform-post-report-package/./src/materials/item.jsx","webpack://@pewresearch/prc-platform-post-report-package/./src/materials/index.js","webpack://@pewresearch/prc-platform-post-report-package/./src/index.js"],"sourcesContent":["const __WEBPACK_NAMESPACE_OBJECT__ = window[\"React\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"element\"];","/**\n * WordPress dependencies\n */\nimport { cloneElement, forwardRef } from '@wordpress/element';\n\n/** @typedef {{icon: JSX.Element, size?: number} & import('@wordpress/primitives').SVGProps} IconProps */\n\n/**\n * Return an SVG icon.\n *\n * @param {IconProps}                                 props icon is the SVG component to render\n *                                                          size is a number specifiying the icon size in pixels\n *                                                          Other props will be passed to wrapped SVG component\n * @param {import('react').ForwardedRef<HTMLElement>} ref   The forwarded ref to the SVG element.\n *\n * @return {JSX.Element}  Icon component\n */\nfunction Icon({\n  icon,\n  size = 24,\n  ...props\n}, ref) {\n  return cloneElement(icon, {\n    width: size,\n    height: size,\n    ...props,\n    ref\n  });\n}\nexport default forwardRef(Icon);\n//# sourceMappingURL=index.js.map","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"primitives\"];","import { createElement } from \"react\";\n/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\nconst blockMeta = createElement(SVG, {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 24 24\"\n}, createElement(Path, {\n  fillRule: \"evenodd\",\n  d: \"M8.95 11.25H4v1.5h4.95v4.5H13V18c0 1.1.9 2 2 2h3c1.1 0 2-.9 2-2v-3c0-1.1-.9-2-2-2h-3c-1.1 0-2 .9-2 2v.75h-2.55v-7.5H13V9c0 1.1.9 2 2 2h3c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2h-3c-1.1 0-2 .9-2 2v.75H8.95v4.5ZM14.5 15v3c0 .3.2.5.5.5h3c.3 0 .5-.2.5-.5v-3c0-.3-.2-.5-.5-.5h-3c-.3 0-.5.2-.5.5Zm0-6V6c0-.3.2-.5.5-.5h3c.3 0 .5.2.5.5v3c0 .3-.2.5-.5.5h-3c-.3 0-.5-.2-.5-.5Z\",\n  clipRule: \"evenodd\"\n}));\nexport default blockMeta;\n//# sourceMappingURL=block-meta.js.map","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"i18n\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"plugins\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"editPost\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"editor\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"data\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"components\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"prcHooks\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"coreData\"];","/**\n * External Dependencies\n */\nimport { useDebounce } from '@prc/hooks';\n\n/**\n * WordPress Dependencies\n */\nimport {\n\tuseEffect,\n\tuseState,\n\tuseContext,\n\tcreateContext,\n\tuseMemo,\n} from '@wordpress/element';\n// import { useDispatch, useSelect } from '@wordpress/data';\nimport { useEntityProp, useResourcePermissions } from '@wordpress/core-data';\n\n/**\n * Internal Dependencies\n */\n\nconst postReportPackageContext = createContext();\n\nconst usePostReportPackageContext = (postId, postType, currentPostId) => {\n\tconst [meta, setMeta] = useEntityProp('postType', postType, 'meta', postId);\n\tconst {canDelete, isResolving} = useResourcePermissions('posts', postId);\n\n\tconst [materials, setMaterials] = useState(meta?.reportMaterials ?? []);\n\tconst [backChapters, setBackChapters] = useState(meta?.multiSectionReport ?? []);\n\tconst debounceMaterials = useDebounce(materials, 500);\n\tconst debounceBackChapters = useDebounce(backChapters, 500);\n\n\tconst allowEditing = useMemo(() => {\n\t\tif (isResolving) {\n\t\t\treturn false;\n\t\t}\n\t\tif (canDelete) {\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}, [isResolving, canDelete]);\n\n\t// This approach doesnt support cross collabration as well but it works for now. Leaving the entity sync version below for reference.\n\tuseEffect(() => {\n\t\tconsole.log(\"Materials...\", materials);\n\t\tif ( ! allowEditing || undefined === meta ) {\n\t\t\treturn;\n\t\t}\n\t\tsetMeta({\n\t\t\t...meta,\n\t\t\treportMaterials: materials,\n\t\t});\n\t}, [debounceMaterials]);\n\n\tuseEffect(() => {\n\t\tconsole.log(\"Back Chapters...\", backChapters);\n\t\tif ( ! allowEditing || undefined === meta ) {\n\t\t\treturn;\n\t\t}\n\t\tsetMeta({\n\t\t\t...meta,\n\t\t\tmultiSectionReport: backChapters,\n\t\t});\n\t}, [debounceBackChapters]);\n\n\t// const { materials, setMaterials, backChapters, setBackChapters } = useMemo(() => {\n\t// \treturn {\n\t// \t\tmaterials: meta?.reportMaterials,\n\t// \t\tsetMaterials(newVal) {\n\t// \t\t\tsetMeta({\n\t// \t\t\t\t...meta,\n\t// \t\t\t\treportMaterials: newVal,\n\t// \t\t\t});\n\t// \t\t},\n\t// \t\tbackChapters: meta?.multiSectionReport,\n\t// \t\tsetBackChapters(newVal) {\n\t// \t\t\tsetMeta({\n\t// \t\t\t\t...meta,\n\t// \t\t\t\tmultiSectionReport: newVal,\n\t// \t\t\t});\n\t// \t\t}\n\t// \t};\n\t// }, [meta]);\n\n\tconst getLatestStateByItemType = (itemsType = 'materials') => {\n\t\tif ( 'materials' === itemsType ) {\n\t\t\treturn [...materials];\n\t\t} else if ( 'backChapters' === itemsType ) {\n\t\t\treturn [...backChapters];\n\t\t}\n\t\treturn [];\n\t};\n\n\tconst reorder = (oldIndex, newIndex, itemsType = 'materials') => {\n\t\tif (!allowEditing) {\n\t\t\treturn;\n\t\t}\n\t\tconst newItems = getLatestStateByItemType(itemsType);\n\n\t\t// Do reordering.\n\t\tconst item = newItems[oldIndex];\n\t\tnewItems.splice(oldIndex, 1);\n\t\tnewItems.splice(newIndex, 0, item);\n\n\t\tlet fn = () => console.log('reorder', oldIndex, newIndex, itemsType);\n\t\tif ( 'materials' === itemsType ) {\n\t\t\tfn = setMaterials;\n\t\t} else if ( 'backChapters' === itemsType ) {\n\t\t\tfn = setBackChapters;\n\t\t}\n\n\t\tfn(newItems);\n\t};\n\n\tconst append = (key, value = {}, itemsType = 'materials') => {\n\t\tif (!allowEditing) {\n\t\t\treturn;\n\t\t}\n\t\tconst newItems = getLatestStateByItemType(itemsType);\n\n\t\tconst obj = {\n\t\t\tkey,\n\t\t};\n\t\tObject.assign(obj, value);\n\t\tnewItems.push(obj);\n\n\t\tlet fn = () => console.log('append', key, value, obj, itemsType);\n\t\tif ( 'materials' === itemsType ) {\n\t\t\tfn = setMaterials;\n\t\t} else if ( 'backChapters' === itemsType ) {\n\t\t\tfn = setBackChapters;\n\t\t}\n\t\tfn(newItems);\n\t};\n\n\tconst remove = (index, itemsType = 'materials') => {\n\t\tif (!allowEditing) {\n\t\t\treturn;\n\t\t}\n\t\tconst newItems = getLatestStateByItemType(itemsType);\n\n\t\tnewItems.splice(index, 1);\n\n\t\tlet fn = () => console.log('remove', index, itemsType);\n\t\tif ( 'materials' === itemsType ) {\n\t\t\tfn = setMaterials;\n\t\t} else if ( 'backChapters' === itemsType ) {\n\t\t\tfn = setBackChapters;\n\t\t}\n\n\t\tfn(newItems);\n\t};\n\n\tconst updateItem = (index, valueKey, value, itemsType = 'materials') => {\n\t\tif (!allowEditing) {\n\t\t\treturn;\n\t\t}\n\t\tconsole.log('updateItem', index, valueKey, value, itemsType, allowEditing, isResolving, canDelete);\n\t\tconst newItems = getLatestStateByItemType(itemsType);\n\n\t\tnewItems[index][valueKey] = value;\n\n\t\tlet fn = () => console.log('updateItem', index, valueKey, value, itemsType);\n\t\tif ( 'materials' === itemsType ) {\n\t\t\tfn = setMaterials;\n\t\t} else if ( 'backChapters' === itemsType ) {\n\t\t\tfn = setBackChapters;\n\t\t}\n\n\t\tfn(newItems);\n\t};\n\n\treturn {\n\t\tallowEditing,\n\t\tpostId,\n\t\tcurrentPostId,\n\t\tpostType,\n\t\tmaterials,\n\t\tbackChapters,\n\t\treorder,\n\t\tappend,\n\t\tremove,\n\t\tupdateItem,\n\t};\n};\n\nconst usePostReportPackage = () => useContext(postReportPackageContext);\n\nfunction ProvidePostReportPackage({ postId, postType, currentPostId, children }) {\n\tconst provider = usePostReportPackageContext(postId, postType, currentPostId);\n\treturn (\n\t\t<postReportPackageContext.Provider value={provider}>\n\t\t\t{children}\n\t\t</postReportPackageContext.Provider>\n\t);\n}\n\nexport { ProvidePostReportPackage, usePostReportPackage };\nexport default ProvidePostReportPackage;\n","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"ReactDOM\"];","export function arrayMove(array, from, to) {\n    array = array.slice();\n    array.splice(to < 0 ? array.length + to : to, 0, array.splice(from, 1)[0]);\n    return array;\n}\nexport function arrayRemove(array, index) {\n    array = array.slice();\n    array.splice(index, 1);\n    return array;\n}\nexport function getTranslateOffset(element) {\n    const style = window.getComputedStyle(element);\n    return (Math.max(parseInt(style['margin-top'], 10), parseInt(style['margin-bottom'], 10)) + element.getBoundingClientRect().height);\n}\nexport function isTouchEvent(event) {\n    return ((event.touches && event.touches.length) ||\n        (event.changedTouches && event.changedTouches.length));\n}\nexport function transformItem(element, offsetY = 0, offsetX = 0) {\n    if (!element)\n        return;\n    if (offsetY === null || offsetX === null) {\n        element.style.removeProperty('transform');\n        return;\n    }\n    element.style.transform = `translate(${offsetX}px, ${offsetY}px)`;\n}\nexport function isItemTransformed(element) {\n    return !!element.style.transform;\n}\nexport function setItemTransition(element, duration, timing) {\n    if (element) {\n        element.style['transition'] = `transform ${duration}ms${timing ? ` ${timing}` : ''}`;\n    }\n}\n// returns the \"slot\" for the targetValue, aka where it should go\n// in an ordered \"array\", it starts with -1 index\nexport function binarySearch(array, targetValue) {\n    let min = 0;\n    let max = array.length - 1;\n    let guess;\n    while (min <= max) {\n        guess = Math.floor((max + min) / 2);\n        if (!array[guess + 1] ||\n            (array[guess] <= targetValue && array[guess + 1] >= targetValue)) {\n            return guess;\n        }\n        else if (array[guess] < targetValue && array[guess + 1] < targetValue) {\n            min = guess + 1;\n        }\n        else {\n            max = guess - 1;\n        }\n    }\n    return -1;\n}\n// adapted from https://github.com/alexreardon/raf-schd\nexport const schd = (fn) => {\n    let lastArgs = [];\n    let frameId = null;\n    const wrapperFn = (...args) => {\n        lastArgs = args;\n        if (frameId) {\n            return;\n        }\n        frameId = requestAnimationFrame(() => {\n            frameId = null;\n            fn(...lastArgs);\n        });\n    };\n    wrapperFn.cancel = () => {\n        if (frameId) {\n            cancelAnimationFrame(frameId);\n        }\n    };\n    return wrapperFn;\n};\nexport function checkIfInteractive(target, rootElement) {\n    const DISABLED_ELEMENTS = [\n        'input',\n        'textarea',\n        'select',\n        'option',\n        'optgroup',\n        'video',\n        'audio',\n        'button',\n        'a'\n    ];\n    const DISABLED_ROLES = ['button', 'link', 'checkbox', 'tab'];\n    while (target !== rootElement) {\n        if (target.getAttribute('data-movable-handle')) {\n            return false;\n        }\n        if (DISABLED_ELEMENTS.includes(target.tagName.toLowerCase())) {\n            return true;\n        }\n        const role = target.getAttribute('role');\n        if (role && DISABLED_ROLES.includes(role.toLowerCase())) {\n            return true;\n        }\n        if (target.tagName.toLowerCase() === 'label' &&\n            target.hasAttribute('for')) {\n            return true;\n        }\n        if (target.tagName)\n            target = target.parentElement;\n    }\n    return false;\n}\n","import * as React from 'react';\nimport * as ReactDOM from 'react-dom';\nimport { getTranslateOffset, transformItem, setItemTransition, binarySearch, schd, isTouchEvent, checkIfInteractive } from './utils.js';\nconst AUTOSCROLL_ACTIVE_OFFSET = 200;\nconst AUTOSCROLL_SPEED_RATIO = 10;\nconst AUTOSCROLL_DELTA_THRESHOLD = 10;\nclass List extends React.Component {\n    constructor(props) {\n        super(props);\n        this.listRef = React.createRef();\n        this.ghostRef = React.createRef();\n        this.topOffsets = [];\n        this.itemTranslateOffsets = [];\n        this.initialYOffset = 0;\n        this.lastScroll = 0;\n        this.lastYOffset = 0;\n        this.lastListYOffset = 0;\n        this.needle = -1;\n        this.afterIndex = -2;\n        this.state = {\n            itemDragged: -1,\n            itemDraggedOutOfBounds: -1,\n            selectedItem: -1,\n            initialX: 0,\n            initialY: 0,\n            targetX: 0,\n            targetY: 0,\n            targetHeight: 0,\n            targetWidth: 0,\n            liveText: '',\n            scrollingSpeed: 0,\n            scrollWindow: false\n        };\n        this.doScrolling = () => {\n            const { scrollingSpeed, scrollWindow } = this.state;\n            const listEl = this.listRef.current;\n            window.requestAnimationFrame(() => {\n                if (scrollWindow) {\n                    window.scrollTo(window.pageXOffset, window.pageYOffset + scrollingSpeed * 1.5);\n                }\n                else {\n                    listEl.scrollTop += scrollingSpeed;\n                }\n                if (scrollingSpeed !== 0) {\n                    this.doScrolling();\n                }\n            });\n        };\n        this.getChildren = () => {\n            if (this.listRef && this.listRef.current) {\n                return Array.from(this.listRef.current.children);\n            }\n            console.warn('No items found in the List container. Did you forget to pass & spread the `props` param in renderList?');\n            return [];\n        };\n        this.calculateOffsets = () => {\n            this.topOffsets = this.getChildren().map((item) => item.getBoundingClientRect().top);\n            this.itemTranslateOffsets = this.getChildren().map((item) => getTranslateOffset(item));\n        };\n        this.getTargetIndex = (e) => {\n            return this.getChildren().findIndex((child) => child === e.target || child.contains(e.target));\n        };\n        this.onMouseOrTouchStart = (e) => {\n            if (this.dropTimeout && this.state.itemDragged > -1) {\n                window.clearTimeout(this.dropTimeout);\n                this.finishDrop();\n            }\n            const isTouch = isTouchEvent(e);\n            if (!isTouch && e.button !== 0)\n                return;\n            const index = this.getTargetIndex(e);\n            if (index === -1 ||\n                // @ts-ignore\n                (this.props.values[index] && this.props.values[index].disabled)) {\n                if (this.state.selectedItem !== -1) {\n                    this.setState({ selectedItem: -1 });\n                    this.finishDrop();\n                }\n                return;\n            }\n            const listItemTouched = this.getChildren()[index];\n            const handle = listItemTouched.querySelector('[data-movable-handle]');\n            if (handle && !handle.contains(e.target)) {\n                return;\n            }\n            if (checkIfInteractive(e.target, listItemTouched)) {\n                return;\n            }\n            e.preventDefault();\n            this.props.beforeDrag &&\n                this.props.beforeDrag({\n                    elements: this.getChildren(),\n                    index\n                });\n            if (isTouch) {\n                const opts = { passive: false };\n                listItemTouched.style.touchAction = 'none';\n                document.addEventListener('touchend', this.schdOnEnd, opts);\n                document.addEventListener('touchmove', this.schdOnTouchMove, opts);\n                document.addEventListener('touchcancel', this.schdOnEnd, opts);\n            }\n            else {\n                document.addEventListener('mousemove', this.schdOnMouseMove);\n                document.addEventListener('mouseup', this.schdOnEnd);\n                const listItemDragged = this.getChildren()[this.state.itemDragged];\n                if (listItemDragged && listItemDragged.style) {\n                    listItemDragged.style.touchAction = '';\n                }\n            }\n            this.onStart(listItemTouched, isTouch ? e.touches[0].clientX : e.clientX, isTouch ? e.touches[0].clientY : e.clientY, index);\n        };\n        this.getYOffset = () => {\n            const listScroll = this.listRef.current\n                ? this.listRef.current.scrollTop\n                : 0;\n            return window.pageYOffset + listScroll;\n        };\n        this.onStart = (target, clientX, clientY, index) => {\n            if (this.state.selectedItem > -1) {\n                this.setState({ selectedItem: -1 });\n                this.needle = -1;\n            }\n            const targetRect = target.getBoundingClientRect();\n            const targetStyles = window.getComputedStyle(target);\n            this.calculateOffsets();\n            this.initialYOffset = this.getYOffset();\n            this.lastYOffset = window.pageYOffset;\n            this.lastListYOffset = this.listRef.current.scrollTop;\n            this.setState({\n                itemDragged: index,\n                targetX: targetRect.left - parseInt(targetStyles['margin-left'], 10),\n                targetY: targetRect.top - parseInt(targetStyles['margin-top'], 10),\n                targetHeight: targetRect.height,\n                targetWidth: targetRect.width,\n                initialX: clientX,\n                initialY: clientY\n            });\n        };\n        this.onMouseMove = (e) => {\n            e.cancelable && e.preventDefault();\n            this.onMove(e.clientX, e.clientY);\n        };\n        this.onTouchMove = (e) => {\n            e.cancelable && e.preventDefault();\n            this.onMove(e.touches[0].clientX, e.touches[0].clientY);\n        };\n        this.onWheel = (e) => {\n            if (this.state.itemDragged < 0)\n                return;\n            this.lastScroll = this.listRef.current.scrollTop += e.deltaY;\n            this.moveOtherItems();\n        };\n        this.onMove = (clientX, clientY) => {\n            if (this.state.itemDragged === -1)\n                return null;\n            transformItem(this.ghostRef.current, clientY - this.state.initialY, this.props.lockVertically ? 0 : clientX - this.state.initialX);\n            this.autoScrolling(clientY, clientY - this.state.initialY);\n            this.moveOtherItems();\n        };\n        this.moveOtherItems = () => {\n            const targetRect = this.ghostRef.current.getBoundingClientRect();\n            const itemVerticalCenter = targetRect.top + targetRect.height / 2;\n            const offset = getTranslateOffset(this.getChildren()[this.state.itemDragged]);\n            const currentYOffset = this.getYOffset();\n            // adjust offsets if scrolling happens during the item movement\n            if (this.initialYOffset !== currentYOffset) {\n                this.topOffsets = this.topOffsets.map((offset) => offset - (currentYOffset - this.initialYOffset));\n                this.initialYOffset = currentYOffset;\n            }\n            if (this.isDraggedItemOutOfBounds() && this.props.removableByMove) {\n                this.afterIndex = this.topOffsets.length + 1;\n            }\n            else {\n                this.afterIndex = binarySearch(this.topOffsets, itemVerticalCenter);\n            }\n            this.animateItems(this.afterIndex === -1 ? 0 : this.afterIndex, this.state.itemDragged, offset);\n        };\n        this.autoScrolling = (clientY, delta) => {\n            const { top, bottom, height } = this.listRef.current.getBoundingClientRect();\n            const viewportHeight = window.innerHeight || document.documentElement.clientHeight;\n            // autoscrolling for the window (down)\n            if (bottom > viewportHeight &&\n                viewportHeight - clientY < AUTOSCROLL_ACTIVE_OFFSET &&\n                delta > AUTOSCROLL_DELTA_THRESHOLD) {\n                this.setState({\n                    scrollingSpeed: Math.min(Math.round((AUTOSCROLL_ACTIVE_OFFSET - (viewportHeight - clientY)) /\n                        AUTOSCROLL_SPEED_RATIO), Math.round((delta - AUTOSCROLL_DELTA_THRESHOLD) / AUTOSCROLL_SPEED_RATIO)),\n                    scrollWindow: true\n                });\n                // autoscrolling for the window (up)\n            }\n            else if (top < 0 &&\n                clientY < AUTOSCROLL_ACTIVE_OFFSET &&\n                delta < -AUTOSCROLL_DELTA_THRESHOLD) {\n                this.setState({\n                    scrollingSpeed: Math.max(Math.round((AUTOSCROLL_ACTIVE_OFFSET - clientY) / -AUTOSCROLL_SPEED_RATIO), Math.round((delta + AUTOSCROLL_DELTA_THRESHOLD) / AUTOSCROLL_SPEED_RATIO)),\n                    scrollWindow: true\n                });\n            }\n            else {\n                if (this.state.scrollWindow && this.state.scrollingSpeed !== 0) {\n                    this.setState({ scrollingSpeed: 0, scrollWindow: false });\n                }\n                // autoscrolling for containers with overflow\n                if (height + 20 < this.listRef.current.scrollHeight) {\n                    let scrollingSpeed = 0;\n                    // (up)\n                    if (clientY - top < AUTOSCROLL_ACTIVE_OFFSET &&\n                        delta < -AUTOSCROLL_DELTA_THRESHOLD) {\n                        scrollingSpeed = Math.max(Math.round((AUTOSCROLL_ACTIVE_OFFSET - (clientY - top)) /\n                            -AUTOSCROLL_SPEED_RATIO), Math.round((delta + AUTOSCROLL_DELTA_THRESHOLD) / AUTOSCROLL_SPEED_RATIO));\n                        // (down)\n                    }\n                    else if (bottom - clientY < AUTOSCROLL_ACTIVE_OFFSET &&\n                        delta > AUTOSCROLL_DELTA_THRESHOLD) {\n                        scrollingSpeed = Math.min(Math.round((AUTOSCROLL_ACTIVE_OFFSET - (bottom - clientY)) /\n                            AUTOSCROLL_SPEED_RATIO), Math.round((delta - AUTOSCROLL_DELTA_THRESHOLD) / AUTOSCROLL_SPEED_RATIO));\n                    }\n                    if (this.state.scrollingSpeed !== scrollingSpeed) {\n                        this.setState({ scrollingSpeed });\n                    }\n                }\n            }\n        };\n        this.animateItems = (needle, movedItem, offset, animateMovedItem = false) => {\n            this.getChildren().forEach((item, i) => {\n                setItemTransition(item, this.props.transitionDuration);\n                if (movedItem === i && animateMovedItem) {\n                    if (movedItem === needle) {\n                        return transformItem(item, null);\n                    }\n                    transformItem(item, movedItem < needle\n                        ? this.itemTranslateOffsets\n                            .slice(movedItem + 1, needle + 1)\n                            .reduce((a, b) => a + b, 0)\n                        : this.itemTranslateOffsets\n                            .slice(needle, movedItem)\n                            .reduce((a, b) => a + b, 0) * -1);\n                }\n                else if (movedItem < needle && i > movedItem && i <= needle) {\n                    transformItem(item, -offset);\n                }\n                else if (i < movedItem && movedItem > needle && i >= needle) {\n                    transformItem(item, offset);\n                }\n                else {\n                    transformItem(item, null);\n                }\n            });\n        };\n        this.isDraggedItemOutOfBounds = () => {\n            const initialRect = this.getChildren()[this.state.itemDragged].getBoundingClientRect();\n            const targetRect = this.ghostRef.current.getBoundingClientRect();\n            if (Math.abs(initialRect.left - targetRect.left) > targetRect.width) {\n                if (this.state.itemDraggedOutOfBounds === -1) {\n                    this.setState({ itemDraggedOutOfBounds: this.state.itemDragged });\n                }\n                return true;\n            }\n            if (this.state.itemDraggedOutOfBounds > -1) {\n                this.setState({ itemDraggedOutOfBounds: -1 });\n            }\n            return false;\n        };\n        this.onEnd = (e) => {\n            e.cancelable && e.preventDefault();\n            document.removeEventListener('mousemove', this.schdOnMouseMove);\n            document.removeEventListener('touchmove', this.schdOnTouchMove);\n            document.removeEventListener('mouseup', this.schdOnEnd);\n            document.removeEventListener('touchup', this.schdOnEnd);\n            document.removeEventListener('touchcancel', this.schdOnEnd);\n            const removeItem = this.props.removableByMove && this.isDraggedItemOutOfBounds();\n            if (!removeItem &&\n                this.props.transitionDuration > 0 &&\n                this.afterIndex !== -2) {\n                // animate drop\n                schd(() => {\n                    setItemTransition(this.ghostRef.current, this.props.transitionDuration, 'cubic-bezier(.2,1,.1,1)');\n                    if (this.afterIndex < 1 && this.state.itemDragged === 0) {\n                        transformItem(this.ghostRef.current, 0, 0);\n                    }\n                    else {\n                        transformItem(this.ghostRef.current, \n                        // compensate window scroll\n                        -(window.pageYOffset - this.lastYOffset) +\n                            // compensate container scroll\n                            -(this.listRef.current.scrollTop - this.lastListYOffset) +\n                            (this.state.itemDragged < this.afterIndex\n                                ? this.itemTranslateOffsets\n                                    .slice(this.state.itemDragged + 1, this.afterIndex + 1)\n                                    .reduce((a, b) => a + b, 0)\n                                : this.itemTranslateOffsets\n                                    .slice(this.afterIndex < 0 ? 0 : this.afterIndex, this.state.itemDragged)\n                                    .reduce((a, b) => a + b, 0) * -1), 0);\n                    }\n                })();\n            }\n            this.dropTimeout = window.setTimeout(this.finishDrop, removeItem || this.afterIndex === -2 ? 0 : this.props.transitionDuration);\n        };\n        this.finishDrop = () => {\n            const removeItem = this.props.removableByMove && this.isDraggedItemOutOfBounds();\n            if (removeItem ||\n                (this.afterIndex > -2 && this.state.itemDragged !== this.afterIndex)) {\n                this.props.onChange({\n                    oldIndex: this.state.itemDragged,\n                    newIndex: removeItem ? -1 : Math.max(this.afterIndex, 0),\n                    targetRect: this.ghostRef.current.getBoundingClientRect()\n                });\n            }\n            this.getChildren().forEach((item) => {\n                setItemTransition(item, 0);\n                transformItem(item, null);\n                item.style.touchAction = '';\n            });\n            this.setState({ itemDragged: -1, scrollingSpeed: 0 });\n            this.afterIndex = -2;\n            // sometimes the scroll gets messed up after the drop, fix:\n            if (this.lastScroll > 0) {\n                this.listRef.current.scrollTop = this.lastScroll;\n                this.lastScroll = 0;\n            }\n        };\n        this.onKeyDown = (e) => {\n            const selectedItem = this.state.selectedItem;\n            const index = this.getTargetIndex(e);\n            if (checkIfInteractive(e.target, e.currentTarget)) {\n                return;\n            }\n            if (index === -1)\n                return;\n            if (e.key === ' ') {\n                e.preventDefault();\n                if (selectedItem === index) {\n                    if (selectedItem !== this.needle) {\n                        this.getChildren().forEach((item) => {\n                            setItemTransition(item, 0);\n                            transformItem(item, null);\n                        });\n                        this.props.onChange({\n                            oldIndex: selectedItem,\n                            newIndex: this.needle,\n                            targetRect: this.getChildren()[this.needle].getBoundingClientRect()\n                        });\n                        this.getChildren()[this.needle].focus();\n                    }\n                    this.setState({\n                        selectedItem: -1,\n                        liveText: this.props.voiceover.dropped(selectedItem + 1, this.needle + 1)\n                    });\n                    this.needle = -1;\n                }\n                else {\n                    this.setState({\n                        selectedItem: index,\n                        liveText: this.props.voiceover.lifted(index + 1)\n                    });\n                    this.needle = index;\n                    this.calculateOffsets();\n                }\n            }\n            if ((e.key === 'ArrowDown' || e.key === 'j') &&\n                selectedItem > -1 &&\n                this.needle < this.props.values.length - 1) {\n                e.preventDefault();\n                const offset = getTranslateOffset(this.getChildren()[selectedItem]);\n                this.needle++;\n                this.animateItems(this.needle, selectedItem, offset, true);\n                this.setState({\n                    liveText: this.props.voiceover.moved(this.needle + 1, false)\n                });\n            }\n            if ((e.key === 'ArrowUp' || e.key === 'k') &&\n                selectedItem > -1 &&\n                this.needle > 0) {\n                e.preventDefault();\n                const offset = getTranslateOffset(this.getChildren()[selectedItem]);\n                this.needle--;\n                this.animateItems(this.needle, selectedItem, offset, true);\n                this.setState({\n                    liveText: this.props.voiceover.moved(this.needle + 1, true)\n                });\n            }\n            if (e.key === 'Escape' && selectedItem > -1) {\n                this.getChildren().forEach((item) => {\n                    setItemTransition(item, 0);\n                    transformItem(item, null);\n                });\n                this.setState({\n                    selectedItem: -1,\n                    liveText: this.props.voiceover.canceled(selectedItem + 1)\n                });\n                this.needle = -1;\n            }\n            if ((e.key === 'Tab' || e.key === 'Enter') && selectedItem > -1) {\n                e.preventDefault();\n            }\n        };\n        this.schdOnMouseMove = schd(this.onMouseMove);\n        this.schdOnTouchMove = schd(this.onTouchMove);\n        this.schdOnEnd = schd(this.onEnd);\n    }\n    componentDidMount() {\n        this.calculateOffsets();\n        document.addEventListener('touchstart', this.onMouseOrTouchStart, {\n            passive: false,\n            capture: false\n        });\n        document.addEventListener('mousedown', this.onMouseOrTouchStart);\n    }\n    componentDidUpdate(_prevProps, prevState) {\n        if (prevState.scrollingSpeed !== this.state.scrollingSpeed &&\n            prevState.scrollingSpeed === 0) {\n            this.doScrolling();\n        }\n    }\n    componentWillUnmount() {\n        document.removeEventListener('touchstart', this.onMouseOrTouchStart);\n        document.removeEventListener('mousedown', this.onMouseOrTouchStart);\n        if (this.dropTimeout) {\n            window.clearTimeout(this.dropTimeout);\n        }\n        this.schdOnMouseMove.cancel();\n        this.schdOnTouchMove.cancel();\n        this.schdOnEnd.cancel();\n    }\n    render() {\n        const baseStyle = {\n            userSelect: 'none',\n            WebkitUserSelect: 'none',\n            MozUserSelect: 'none',\n            msUserSelect: 'none',\n            boxSizing: 'border-box',\n            position: 'relative'\n        };\n        const ghostStyle = {\n            ...baseStyle,\n            top: this.state.targetY,\n            left: this.state.targetX,\n            width: this.state.targetWidth,\n            height: this.state.targetHeight,\n            position: 'fixed',\n            marginTop: 0\n        };\n        return (React.createElement(React.Fragment, null,\n            this.props.renderList({\n                children: this.props.values.map((value, index) => {\n                    const isHidden = index === this.state.itemDragged;\n                    const isSelected = index === this.state.selectedItem;\n                    const isDisabled = \n                    // @ts-ignore\n                    this.props.values[index] && this.props.values[index].disabled;\n                    const props = {\n                        key: index,\n                        tabIndex: isDisabled ? -1 : 0,\n                        'aria-roledescription': this.props.voiceover.item(index + 1),\n                        onKeyDown: this.onKeyDown,\n                        style: {\n                            ...baseStyle,\n                            visibility: isHidden ? 'hidden' : undefined,\n                            zIndex: isSelected ? 5000 : 0\n                        }\n                    };\n                    return this.props.renderItem({\n                        value,\n                        props,\n                        index,\n                        isDragged: false,\n                        isSelected,\n                        isOutOfBounds: false\n                    });\n                }),\n                isDragged: this.state.itemDragged > -1,\n                props: {\n                    ref: this.listRef\n                }\n            }),\n            this.state.itemDragged > -1 &&\n                ReactDOM.createPortal(this.props.renderItem({\n                    value: this.props.values[this.state.itemDragged],\n                    props: {\n                        ref: this.ghostRef,\n                        style: ghostStyle,\n                        onWheel: this.onWheel\n                    },\n                    index: this.state.itemDragged,\n                    isDragged: true,\n                    isSelected: false,\n                    isOutOfBounds: this.state.itemDraggedOutOfBounds > -1\n                }), this.props.container || document.body),\n            React.createElement(\"div\", { \"aria-live\": \"assertive\", role: \"log\", \"aria-atomic\": \"true\", style: {\n                    position: 'absolute',\n                    width: '1px',\n                    height: '1px',\n                    margin: '-1px',\n                    border: '0px',\n                    padding: '0px',\n                    overflow: 'hidden',\n                    clip: 'rect(0px, 0px, 0px, 0px)',\n                    clipPath: 'inset(100%)'\n                } }, this.state.liveText)));\n    }\n}\nList.defaultProps = {\n    transitionDuration: 300,\n    lockVertically: false,\n    removableByMove: false,\n    voiceover: {\n        item: (position) => `You are currently at a draggable item at position ${position}. Press space bar to lift.`,\n        lifted: (position) => `You have lifted item at position ${position}. Press j to move down, k to move up, space bar to drop and escape to cancel.`,\n        moved: (position, up) => `You have moved the lifted item ${up ? 'up' : 'down'} to position ${position}. Press j to move down, k to move up, space bar to drop and escape to cancel.`,\n        dropped: (from, to) => `You have dropped the item. It has moved from position ${from} to ${to}.`,\n        canceled: (position) => `You have cancelled the movement. The item has returned to its starting position of ${position}.`\n    }\n};\nexport default List;\n","function randomId() {\n\t// Math.random should be unique because of its seeding algorithm.\n\t// Convert it to base 36 (numbers + letters), and grab the first 9 characters\n\t// after the decimal.\n\treturn `_${Math.random().toString(36).substr(2, 9)}`;\n}\n\nexport {\n\trandomId,\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"htmlEntities\"];","import { createElement } from \"react\";\n/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\nconst dragHandle = createElement(SVG, {\n  width: \"24\",\n  height: \"24\",\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 24 24\"\n}, createElement(Path, {\n  d: \"M8 7h2V5H8v2zm0 6h2v-2H8v2zm0 6h2v-2H8v2zm6-14v2h2V5h-2zm0 8h2v-2h-2v2zm0 6h2v-2h-2v2z\"\n}));\nexport default dragHandle;\n//# sourceMappingURL=drag-handle.js.map","/**\n * WordPress Dependencies\n */\nimport { useMemo } from '@wordpress/element';\nimport { decodeEntities } from '@wordpress/html-entities';\nimport { Icon, IconButton } from '@wordpress/components';\nimport { dragHandle } from '@wordpress/icons';\nimport { useEntityProp } from '@wordpress/core-data';\n\nexport default function ListItem({\n\tlabel,\n\tdefaultLabel,\n\tkeyValue,\n\tindex,\n\tchildren,\n\tonRemove = false,\n\tlastItem = false,\n\ticon = false,\n}) {\n\tconst [postTitle] = useEntityProp('postType', 'post', 'title', keyValue);\n\tconst labelText = useMemo(() => {\n\t\tif (\n\t\t\tundefined === label &&\n\t\t\tundefined !== postTitle &&\n\t\t\t'' !== postTitle\n\t\t) {\n\t\t\treturn decodeEntities(postTitle);\n\t\t}\n\t\tif (undefined !== label && '' !== label) {\n\t\t\treturn label;\n\t\t}\n\t\treturn defaultLabel;\n\t}, [postTitle, label, defaultLabel]);\n\n\treturn (\n\t\t<div\n\t\t\tstyle={{\n\t\t\t\tbackground: 'white',\n\t\t\t\tpaddingBottom: '1em',\n\t\t\t\tmarginBottom: '1em',\n\t\t\t\tborderBottom: lastItem ? 'none' : '1px solid #EAEAEA',\n\t\t\t}}\n\t\t>\n\t\t\t<div\n\t\t\t\tstyle={{\n\t\t\t\t\tdisplay: 'flex',\n\t\t\t\t\tflexDirection: 'row',\n\t\t\t\t\twidth: '100%',\n\t\t\t\t\talignItems: 'center',\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<div style={{ display: 'flex' }}>\n\t\t\t\t\t<Icon icon={dragHandle} />\n\t\t\t\t</div>\n\t\t\t\t<div\n\t\t\t\t\tstyle={{\n\t\t\t\t\t\tdisplay: 'flex',\n\t\t\t\t\t\tflexGrow: '1',\n\t\t\t\t\t\tpaddingLeft: '1em',\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t{false !== icon && { icon }}\n\t\t\t\t\t<span>{labelText}</span>\n\t\t\t\t</div>\n\t\t\t\t<div style={{ display: 'flex' }}>\n\t\t\t\t\t<IconButton\n\t\t\t\t\t\ticon=\"no-alt\"\n\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\tfalse !== onRemove &&\n\t\t\t\t\t\t\t\t'function' === typeof onRemove\n\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\tonRemove();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t{children}\n\t\t</div>\n\t);\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"url\"];","/**\n * WordPress Dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { decodeEntities } from '@wordpress/html-entities';\nimport { Modal, ButtonGroup, Button } from '@wordpress/components';\n\nexport default function AddChildModal({\n\ttoggleAddChildModal,\n\tparentTitle,\n\tchildTitle,\n\tonDeny,\n\tonConfirm,\n}) {\n\treturn (\n\t\t<Modal\n\t\t\ttitle={__(\n\t\t\t\t'Confirm Linking Child Post',\n\t\t\t\t'prc-platform-post-report-package'\n\t\t\t)}\n\t\t\tonRequestClose={() => {\n\t\t\t\ttoggleAddChildModal(false);\n\t\t\t}}\n\t\t>\n\t\t\t<p>\n\t\t\t\tLink <strong>{decodeEntities(childTitle)}</strong> post to{' '}\n\t\t\t\t<strong>{decodeEntities(parentTitle)}</strong>?\n\t\t\t</p>\n\t\t\t<ButtonGroup>\n\t\t\t\t<Button variant=\"secondary\" onClick={onDeny}>\n\t\t\t\t\tNo\n\t\t\t\t</Button>\n\t\t\t\t<Button variant=\"primary\" onClick={onConfirm}>\n\t\t\t\t\tYes\n\t\t\t\t</Button>\n\t\t\t</ButtonGroup>\n\t\t</Modal>\n\t);\n}\n","/**\n * WordPress Dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { decodeEntities } from '@wordpress/html-entities';\nimport { store as coreDataStore } from '@wordpress/core-data';\nimport { Modal, ButtonGroup, Button, TextControl } from '@wordpress/components';\nimport { useDispatch } from '@wordpress/data';\nimport { useState, useEffect } from '@wordpress/element';\n\nexport default function CreateDraftModal({\n\tparentTitle,\n\tparentId,\n\tonDeny,\n\tonConfirm,\n}) {\n\tconst { saveEntityRecord } = useDispatch(coreDataStore);\n\tconst [postTitle, setPostTitle] = useState('');\n\n\tconst createPost = async () => {\n\t\tconst newDraftPost = await saveEntityRecord('postType', 'post', {\n\t\t\ttitle: postTitle,\n\t\t\tstatus: 'draft',\n\t\t});\n\t\tif (newDraftPost) {\n\t\t\tconsole.log('newDraftPost', newDraftPost);\n\t\t\tonConfirm(newDraftPost?.id);\n\t\t}\n\t};\n\n\treturn (\n\t\t<Modal\n\t\t\ttitle={__(\n\t\t\t\t'Create New Draft Back Chapter',\n\t\t\t\t'prc-platform-post-report-package'\n\t\t\t)}\n\t\t\tonRequestClose={() => {\n\t\t\t\tonDeny();\n\t\t\t}}\n\t\t>\n\t\t\t<p>\n\t\t\t\tCreate a new draft back chapter for{' '}\n\t\t\t\t<strong>{decodeEntities(parentTitle)}</strong>?\n\t\t\t</p>\n\t\t\t<TextControl\n\t\t\t\tlabel={__(\n\t\t\t\t\t'Back Chapter Title',\n\t\t\t\t\t'prc-platform-post-report-package'\n\t\t\t\t)}\n\t\t\t\tvalue={postTitle}\n\t\t\t\tonChange={setPostTitle}\n\t\t\t/>\n\n\t\t\t<ButtonGroup>\n\t\t\t\t<Button variant=\"secondary\" onClick={onDeny}>\n\t\t\t\t\tCancel\n\t\t\t\t</Button>\n\t\t\t\t<Button\n\t\t\t\t\tvariant=\"primary\"\n\t\t\t\t\tonClick={createPost}\n\t\t\t\t\tdisabled={3 > postTitle.length}\n\t\t\t\t>\n\t\t\t\t\tCreate Draft\n\t\t\t\t</Button>\n\t\t\t</ButtonGroup>\n\t\t</Modal>\n\t);\n}\n","/**\n * External Dependencies\n */\nimport { useDebounce } from '@prc/hooks';\n\n/**\n * WordPress Dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { Fragment, useEffect, useState } from '@wordpress/element';\nimport { Button, SearchControl, Spinner } from '@wordpress/components';\nimport { getQueryArg } from '@wordpress/url';\nimport { useSelect } from '@wordpress/data';\nimport { useEntityRecord } from '@wordpress/core-data';\n\n/**\n * Internal Dependencies\n */\nimport AddChildModal from './add-child-modal';\nimport CreateDraftModal from './create-draft-modal';\n\nconst PostSearchByEditUrlField = ({ hocOnChange = false }) => {\n\tconst { parentTitle, parentId, getEntityRecord } = useSelect((select) => {\n\t\treturn {\n\t\t\tparentTitle: select('core/editor').getEditedPostAttribute('title'),\n\t\t\tparentId: select('core/editor').getCurrentPostId(),\n\t\t\tgetEntityRecord: select('core').getEntityRecord,\n\t\t};\n\t});\n\tconst [targetPostId, setTargetPostId] = useState(null);\n\tconst { record, isResolving } = useEntityRecord(\n\t\t'postType',\n\t\t'post',\n\t\ttargetPostId,\n\t\t{ enabled: null !== targetPostId }\n\t);\n\t// const [post,] = getEntityRecord('postType', 'post', targetPostId, {enabled: false});\n\tconst [addChildModalOpen, toggleAddChildModal] = useState(false);\n\tconst [createDraftModalOpen, toggleCreateDraftModal] = useState(false);\n\tconst [isLoading, toggleLoading] = useState(false);\n\tconst [childTitle, setChildTitle] = useState();\n\tconst [searchValue, setSearchValue] = useState();\n\tconst [matched, setMatched] = useState();\n\tconst postUrl = useDebounce(searchValue, 1000);\n\tconst [searchResult, setSearchResult] = useState(false);\n\n\tuseEffect(() => {\n\t\tif (undefined !== postUrl && 3 <= postUrl.length) {\n\t\t\tconsole.log('postUrl', postUrl);\n\t\t\tconst postId = getQueryArg(postUrl, 'post');\n\t\t\tsetTargetPostId(postId);\n\t\t}\n\t}, [postUrl]);\n\n\tuseEffect(() => {\n\t\tif (undefined !== record && isResolving === false) {\n\t\t\tsetChildTitle(record?.title?.rendered);\n\t\t\tsetSearchResult(record);\n\t\t\ttoggleAddChildModal(true);\n\t\t}\n\t}, [record, isResolving]);\n\n\treturn (\n\t\t<Fragment>\n\t\t\t<div style={{ display: 'flex', flexDirection: 'row' }}>\n\t\t\t\t<div style={{ flexGrow: '1' }}>\n\t\t\t\t\t<SearchControl\n\t\t\t\t\t\tvalue={searchValue}\n\t\t\t\t\t\tonChange={(val) => {\n\t\t\t\t\t\t\ttoggleLoading(true);\n\t\t\t\t\t\t\tsetSearchValue(val);\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tplaceholder={__(\n\t\t\t\t\t\t\t`Paste Back Chatper's edit (…/wp-admin/post.php?post=) url…`,\n\t\t\t\t\t\t\t'prc-platform-post-report-package'\n\t\t\t\t\t\t)}\n\t\t\t\t\t\tautoComplete=\"off\"\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t\t<div>{isLoading && <Spinner />}</div>\n\t\t\t</div>\n\t\t\t<Button\n\t\t\t\tvariant=\"tertiary\"\n\t\t\t\tonClick={() => {\n\t\t\t\t\ttoggleCreateDraftModal(true);\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t{__('Create New Draft', 'prc-platform-post-report-package')}\n\t\t\t</Button>\n\t\t\t{true === createDraftModalOpen && (\n\t\t\t\t<CreateDraftModal\n\t\t\t\t\t{...{\n\t\t\t\t\t\tparentTitle,\n\t\t\t\t\t\tparentId,\n\t\t\t\t\t\tonConfirm: (newPostId) => {\n\t\t\t\t\t\t\tconsole.log('CREATE DRAFT!', newPostId);\n\t\t\t\t\t\t\tif (false !== hocOnChange) {\n\t\t\t\t\t\t\t\thocOnChange(newPostId);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\tonDeny: () => {\n\t\t\t\t\t\t\ttoggleCreateDraftModal(false);\n\t\t\t\t\t\t},\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t)}\n\t\t\t{true === addChildModalOpen && (\n\t\t\t\t<AddChildModal\n\t\t\t\t\t{...{\n\t\t\t\t\t\ttoggleAddChildModal,\n\t\t\t\t\t\tparentTitle,\n\t\t\t\t\t\tchildTitle,\n\t\t\t\t\t\tonConfirm: () => {\n\t\t\t\t\t\t\tconst { id } = searchResult;\n\t\t\t\t\t\t\ttoggleAddChildModal(false);\n\t\t\t\t\t\t\tsetSearchResult(false);\n\t\t\t\t\t\t\tif (false !== hocOnChange) {\n\t\t\t\t\t\t\t\thocOnChange(id);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\tonDeny: () => {\n\t\t\t\t\t\t\tsetSearchValue('');\n\t\t\t\t\t\t\tsetSearchResult(false);\n\t\t\t\t\t\t},\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t)}\n\t\t</Fragment>\n\t);\n};\n\nexport default PostSearchByEditUrlField;\n","/**\n * Internal dependencies\n */\n\nimport { default as pencil } from './pencil';\nexport default pencil;\n//# sourceMappingURL=edit.js.map","import { createElement } from \"react\";\n/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\nconst pencil = createElement(SVG, {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 24 24\"\n}, createElement(Path, {\n  d: \"m19 7-3-3-8.5 8.5-1 4 4-1L19 7Zm-7 11.5H5V20h7v-1.5Z\"\n}));\nexport default pencil;\n//# sourceMappingURL=pencil.js.map","import { createElement } from \"react\";\n/**\n * WordPress dependencies\n */\nimport { Path, SVG } from '@wordpress/primitives';\nconst external = createElement(SVG, {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 24 24\"\n}, createElement(Path, {\n  d: \"M19.5 4.5h-7V6h4.44l-5.97 5.97 1.06 1.06L18 7.06v4.44h1.5v-7Zm-13 1a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2v-3H17v3a.5.5 0 0 1-.5.5h-10a.5.5 0 0 1-.5-.5v-10a.5.5 0 0 1 .5-.5h3V5.5h-3Z\"\n}));\nexport default external;\n//# sourceMappingURL=external.js.map","/**\n * External Dependencies\n */\nimport { edit, external } from '@wordpress/icons';\n/**\n * WordPress Dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { Button, ButtonGroup, useEffect } from '@wordpress/components';\n\nexport default function ExistingBackChapterToolbar({ postId, currentPostId }) {\n\tif (postId === currentPostId) {\n\t\treturn null;\n\t}\n\tconst editLink = `/pewresearch-org/wp-admin/post.php?post=${postId}&action=edit`;\n\tconst previewLink = `/pewresearch-org/?p=${postId}&preview=true`;\n\treturn (\n\t\t<ButtonGroup>\n\t\t\t<Button\n\t\t\t\tvariant=\"link\"\n\t\t\t\tsize=\"compact\"\n\t\t\t\thref={editLink}\n\t\t\t\ttarget=\"_blank\"\n\t\t\t\ticon={edit}\n\t\t\t\tlabel={__('Edit back chapter; opens in new tab')}\n\t\t\t\tshowTooltip\n\t\t\t>\n\t\t\t\tEdit\n\t\t\t</Button>\n\t\t\t<Button\n\t\t\t\tvariant=\"link\"\n\t\t\t\tsize=\"compact\"\n\t\t\t\thref={previewLink}\n\t\t\t\ttarget=\"_blank\"\n\t\t\t\ticon={external}\n\t\t\t\tlabel={__('Preview back chapter; opens in new tab')}\n\t\t\t\tshowTooltip\n\t\t\t>\n\t\t\t\tPreview\n\t\t\t</Button>\n\t\t</ButtonGroup>\n\t);\n}\n","/**\n * External Dependencies\n */\nimport { List } from 'react-movable';\n\n/**\n * WordPress Dependencies\n */\nimport { Button, PanelBody } from '@wordpress/components';\n\n/**\n * Internal Dependencies\n */\nimport { randomId } from '../utils';\nimport { usePostReportPackage } from '../context';\nimport ListItem from '../list-item';\nimport PostSearchByEditUrlField from './post-search-by-edit-url-field';\nimport ExistingBackChapterToolbar from './existing-back-chapter-toolbar';\n\nexport default function BackChapters() {\n\tconst ITEMS_TYPE = 'backChapters';\n\tconst { backChapters, reorder, append, remove, updateItem, currentPostId } =\n\t\tusePostReportPackage();\n\n\treturn (\n\t\t<PanelBody title=\"Back Chapters\">\n\t\t\t<List\n\t\t\t\tlockVertically\n\t\t\t\tvalues={backChapters ?? []}\n\t\t\t\tonChange={({ oldIndex, newIndex }) =>\n\t\t\t\t\treorder(oldIndex, newIndex, ITEMS_TYPE)\n\t\t\t\t}\n\t\t\t\trenderList={({ children, props }) => (\n\t\t\t\t\t<div {...props}>{children}</div>\n\t\t\t\t)}\n\t\t\t\trenderItem={({ value, props, index }) => (\n\t\t\t\t\t<div {...props}>\n\t\t\t\t\t\t<ListItem\n\t\t\t\t\t\t\tkey={value.key}\n\t\t\t\t\t\t\tdefaultLabel=\"Child Post\"\n\t\t\t\t\t\t\tkeyValue={value.postId}\n\t\t\t\t\t\t\tindex={index}\n\t\t\t\t\t\t\tonRemove={() => remove(index, ITEMS_TYPE)}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{null === value.postId && (\n\t\t\t\t\t\t\t\t<PostSearchByEditUrlField\n\t\t\t\t\t\t\t\t\thocOnChange={(postId) =>\n\t\t\t\t\t\t\t\t\t\tupdateItem(\n\t\t\t\t\t\t\t\t\t\t\tindex,\n\t\t\t\t\t\t\t\t\t\t\t'postId',\n\t\t\t\t\t\t\t\t\t\t\tpostId,\n\t\t\t\t\t\t\t\t\t\t\tITEMS_TYPE\n\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t{null !== value.postId && (\n\t\t\t\t\t\t\t\t<ExistingBackChapterToolbar\n\t\t\t\t\t\t\t\t\t{...{\n\t\t\t\t\t\t\t\t\t\tpostId: value.postId,\n\t\t\t\t\t\t\t\t\t\tcurrentPostId,\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</ListItem>\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t/>\n\t\t\t<Button\n\t\t\t\tvariant=\"primary\"\n\t\t\t\tonClick={() => append(randomId(), { postId: null }, ITEMS_TYPE)}\n\t\t\t>\n\t\t\t\tAdd Back Chapter\n\t\t\t</Button>\n\t\t</PanelBody>\n\t);\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"blockEditor\"];","/**\n * WordPress Dependencies\n */\nimport { Popover, SelectControl } from '@wordpress/components';\n\n/**\n * Internal Dependencies\n */\nimport types from './types.json';\n\nconst TypeSelect = ({ type = null, onChange, toggleVisibility }) => {\n\tconst { options } = types;\n\treturn (\n\t\t<Popover\n\t\t\tclassName=\"prc-report-material-popover\"\n\t\t\tnoArrow={false}\n\t\t\tplacement=\"left-start\"\n\t\t\tonFocusOutside={() => {\n\t\t\t\ttoggleVisibility(false);\n\t\t\t}}\n\t\t>\n\t\t\t<div style={{ padding: '0.6em', minWidth: '140px' }}>\n\t\t\t\t<SelectControl\n\t\t\t\t\tlabel=\"Type\"\n\t\t\t\t\tvalue={type}\n\t\t\t\t\toptions={options}\n\t\t\t\t\tonChange={onChange}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t</Popover>\n\t);\n};\n\nconst getLabel = (type) => {\n\tconst { options } = types;\n\tconst t = options.find((x) => x.value === type);\n\tif (undefined !== t) {\n\t\treturn t.label;\n\t}\n\treturn '';\n};\n\nconst getValue = (type) => {\n\tconst { options } = types;\n\tconst t = options.find((x) => x.value === type);\n\tif (undefined !== t) {\n\t\treturn t.value;\n\t}\n\treturn '';\n};\n\nconst getOptions = () => {\n\treturn types?.options || [];\n};\n\nexport { TypeSelect, getLabel, getValue, getOptions };\n\nexport default TypeSelect;\n","/**\n * External Dependencies\n */\n\n/**\n * WordPress Dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { Fragment, useState } from '@wordpress/element';\nimport { useDispatch } from '@wordpress/data';\nimport {\n\tButton,\n\tButtonGroup,\n\tSelectControl,\n\tTextControl,\n} from '@wordpress/components';\nimport { MediaUpload, MediaUploadCheck } from '@wordpress/block-editor';\n\n/**\n * Internal Dependencies\n */\nimport { TypeSelect, getLabel, getOptions } from './type-select';\nimport { usePostReportPackage } from '../context';\nimport ListItem from '../list-item';\n\nconst ALLOWED_MEDIA_TYPES = [\n\t'image',\n\t'application/pdf',\n\t'application/vnd.openxmlformats-officedocument.presentationml.presentation',\n\t'application/vnd.ms-powerpoint',\n\t'application/vnd.ms-excel',\n\t'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet',\n];\n\nconst ICONS = {\n\tdetailedTable: 'editor-table',\n\tlink: 'admin-links',\n\tpresentation: 'format-gallery',\n\tpressRelease: 'media-document',\n\tpromo: 'star-empty',\n\tqA: 'clipboard',\n\tquestionnaire: 'editor-help',\n\treport: 'analytics',\n\tsupplemental: 'welcome-add-page',\n\ttopline: 'editor-ul',\n};\n\nconst Item = ({ type, url, attachmentId, label, icon, index }) => {\n\tconst ITEMS_TYPE = 'materials';\n\tconst { allowEditing, updateItem, remove } = usePostReportPackage();\n\tconst [popoverVisible, toggleVisibility] = useState(false);\n\n\tconst UploadFileButton = ({ title, value }) => {\n\t\treturn (\n\t\t\t<MediaUploadCheck>\n\t\t\t\t<MediaUpload\n\t\t\t\t\ttitle={__(\n\t\t\t\t\t\tnull === value ? `Upload ${title}` : `Change ${title}`\n\t\t\t\t\t)}\n\t\t\t\t\tallowedTypes={ALLOWED_MEDIA_TYPES}\n\t\t\t\t\tvalue={value}\n\t\t\t\t\tonSelect={(img) => {\n\t\t\t\t\t\tupdateItem(index, 'url', img.url, ITEMS_TYPE);\n\t\t\t\t\t\tupdateItem(index, 'attachmentId', img.id, ITEMS_TYPE);\n\t\t\t\t\t}}\n\t\t\t\t\trender={({ open }) => {\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tvariant=\"secondary\"\n\t\t\t\t\t\t\t\tdisabled={!allowEditing}\n\t\t\t\t\t\t\t\tonClick={open}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{__(\n\t\t\t\t\t\t\t\t\tnull === value\n\t\t\t\t\t\t\t\t\t\t? `Upload File`\n\t\t\t\t\t\t\t\t\t\t: `Change File`\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t);\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t</MediaUploadCheck>\n\t\t);\n\t};\n\n\tconst UploadIconButton = ({ title, value }) => {\n\t\treturn (\n\t\t\t<MediaUploadCheck>\n\t\t\t\t<MediaUpload\n\t\t\t\t\ttitle={__(\n\t\t\t\t\t\tnull === value ? `Upload ${title}` : `Change ${title}`\n\t\t\t\t\t)}\n\t\t\t\t\tvalue={value}\n\t\t\t\t\tonSelect={(img) => {\n\t\t\t\t\t\tupdateItem(index, 'icon', img.url, ITEMS_TYPE);\n\t\t\t\t\t\tupdateItem(index, 'attachmentId', img.id, ITEMS_TYPE);\n\t\t\t\t\t}}\n\t\t\t\t\trender={({ open }) => {\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tvariant=\"secondary\"\n\t\t\t\t\t\t\t\tdisabled={!allowEditing}\n\t\t\t\t\t\t\t\tonClick={open}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{__(\n\t\t\t\t\t\t\t\t\tnull === value\n\t\t\t\t\t\t\t\t\t\t? `Upload Icon`\n\t\t\t\t\t\t\t\t\t\t: `Change Icon`\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t);\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t</MediaUploadCheck>\n\t\t);\n\t};\n\n\treturn (\n\t\t<ListItem\n\t\t\tlabel={getLabel(type)}\n\t\t\tindex={index}\n\t\t\tonRemove={() => remove(index, ITEMS_TYPE)}\n\t\t>\n\t\t\t<div\n\t\t\t\tstyle={{\n\t\t\t\t\tpaddingTop: '10px',\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t{['presentation', 'pressRelease'].includes(type) && (\n\t\t\t\t\t<TextControl\n\t\t\t\t\t\tautoComplete={false}\n\t\t\t\t\t\tlabel=\"URL\"\n\t\t\t\t\t\tvalue={url}\n\t\t\t\t\t\tonChange={(u) =>\n\t\t\t\t\t\t\tupdateItem(index, 'url', u, ITEMS_TYPE)\n\t\t\t\t\t\t}\n\t\t\t\t\t\tdisabled={!allowEditing}\n\t\t\t\t\t/>\n\t\t\t\t)}\n\t\t\t\t{['link', 'promo', 'qA', 'supplemental'].includes(type) && (\n\t\t\t\t\t<Fragment>\n\t\t\t\t\t\t<TextControl\n\t\t\t\t\t\t\tautoComplete={false}\n\t\t\t\t\t\t\tlabel=\"Label\"\n\t\t\t\t\t\t\tvalue={label}\n\t\t\t\t\t\t\tonChange={(c) =>\n\t\t\t\t\t\t\t\tupdateItem(index, 'label', c, ITEMS_TYPE)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tdisabled={!allowEditing}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<TextControl\n\t\t\t\t\t\t\tautoComplete={false}\n\t\t\t\t\t\t\tlabel=\"URL\"\n\t\t\t\t\t\t\tvalue={url}\n\t\t\t\t\t\t\tonChange={(u) =>\n\t\t\t\t\t\t\t\tupdateItem(index, 'url', u, ITEMS_TYPE)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tdisabled={!allowEditing}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t{'link' === type && (\n\t\t\t\t\t\t\t<SelectControl\n\t\t\t\t\t\t\t\tlabel=\"Icon\"\n\t\t\t\t\t\t\t\tvalue={icon}\n\t\t\t\t\t\t\t\toptions={getOptions()}\n\t\t\t\t\t\t\t\tonChange={(t) => {\n\t\t\t\t\t\t\t\t\tconsole.log(t);\n\t\t\t\t\t\t\t\t\tupdateItem(index, 'icon', t, ITEMS_TYPE);\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\tdisabled={!allowEditing}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</Fragment>\n\t\t\t\t)}\n\t\t\t\t<ButtonGroup>\n\t\t\t\t\t{[\n\t\t\t\t\t\t'report',\n\t\t\t\t\t\t'questionnaire',\n\t\t\t\t\t\t'detailedTable',\n\t\t\t\t\t\t'powerpoint',\n\t\t\t\t\t\t'presentation',\n\t\t\t\t\t\t'pressRelease',\n\t\t\t\t\t\t'topline',\n\t\t\t\t\t].includes(type) && (\n\t\t\t\t\t\t<UploadFileButton\n\t\t\t\t\t\t\ttitle={getLabel(type)}\n\t\t\t\t\t\t\tvalue={attachmentId}\n\t\t\t\t\t\t/>\n\t\t\t\t\t)}\n\t\t\t\t\t{'promo' === type && (\n\t\t\t\t\t\t<UploadIconButton\n\t\t\t\t\t\t\ttitle={getLabel(type)}\n\t\t\t\t\t\t\tvalue={attachmentId}\n\t\t\t\t\t\t/>\n\t\t\t\t\t)}\n\t\t\t\t\t<Button\n\t\t\t\t\t\tvariant=\"secondary\"\n\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\ttoggleVisibility(true);\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tdisabled={!allowEditing}\n\t\t\t\t\t>\n\t\t\t\t\t\tChange Type\n\t\t\t\t\t</Button>\n\t\t\t\t\t{popoverVisible && (\n\t\t\t\t\t\t<TypeSelect\n\t\t\t\t\t\t\ttype={type}\n\t\t\t\t\t\t\tonChange={(newType) => {\n\t\t\t\t\t\t\t\t// Set up the new type\n\t\t\t\t\t\t\t\tupdateItem(index, 'type', newType, ITEMS_TYPE);\n\t\t\t\t\t\t\t\t// Reset everything else\n\t\t\t\t\t\t\t\tupdateItem(\n\t\t\t\t\t\t\t\t\tindex,\n\t\t\t\t\t\t\t\t\t'attachmentId',\n\t\t\t\t\t\t\t\t\tnull,\n\t\t\t\t\t\t\t\t\tITEMS_TYPE\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\tupdateItem(index, 'url', '', ITEMS_TYPE);\n\t\t\t\t\t\t\t\tupdateItem(index, 'label', '', ITEMS_TYPE);\n\t\t\t\t\t\t\t\tupdateItem(index, 'icon', '', ITEMS_TYPE);\n\t\t\t\t\t\t\t\ttoggleVisibility(false);\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\ttoggleVisibility={toggleVisibility}\n\t\t\t\t\t\t/>\n\t\t\t\t\t)}\n\t\t\t\t</ButtonGroup>\n\t\t\t</div>\n\t\t</ListItem>\n\t);\n};\n\nexport default Item;\n","/**\n * External Dependencies\n */\nimport { List } from 'react-movable';\n\n/**\n * WordPress Dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { useState } from '@wordpress/element';\nimport { Button, PanelBody } from '@wordpress/components';\n\n/**\n * Internal Dependencies\n */\nimport { randomId } from '../utils';\nimport { usePostReportPackage } from '../context';\nimport Item from './item';\nimport { TypeSelect, getLabel } from './type-select';\n\nfunction ReportMaterials() {\n\tconst [popoverVisible, toggleVisibility] = useState(false);\n\n\tconst ITEMS_TYPE = 'materials';\n\tconst { materials, reorder, append, remove, updateItem, isResolving } = usePostReportPackage();\n\n\treturn (\n\t\t<PanelBody title=\"Materials\">\n\t\t\t<List\n\t\t\t\tlockVertically\n\t\t\t\tvalues={materials ?? []}\n\t\t\t\tonChange={({ oldIndex, newIndex }) =>\n\t\t\t\t\treorder(oldIndex, newIndex, ITEMS_TYPE)\n\t\t\t\t}\n\t\t\t\trenderList={({ children, props }) => (\n\t\t\t\t\t<div {...props}>{children}</div>\n\t\t\t\t)}\n\t\t\t\trenderItem={({ value, props, index }) => (\n\t\t\t\t\t<div {...props}>\n\t\t\t\t\t\t<Item\n\t\t\t\t\t\t\tkey={value.key}\n\t\t\t\t\t\t\ttype={value.type}\n\t\t\t\t\t\t\turl={value.url}\n\t\t\t\t\t\t\tlabel={value.label}\n\t\t\t\t\t\t\ticon={value.icon}\n\t\t\t\t\t\t\tattachmentId={value.attachmentId}\n\t\t\t\t\t\t\tindex={index}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t/>\n\t\t\t<Button\n\t\t\t\tvariant=\"primary\"\n\t\t\t\tonClick={() => {\n\t\t\t\t\ttoggleVisibility(true);\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t{__('Add Report Material')}\n\t\t\t</Button>\n\t\t\t{popoverVisible && (\n\t\t\t\t<TypeSelect\n\t\t\t\t\tonChange={(t) => {\n\t\t\t\t\t\tappend(\n\t\t\t\t\t\t\trandomId(),\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ttype: t,\n\t\t\t\t\t\t\t\turl: '',\n\t\t\t\t\t\t\t\tattachmentId: null,\n\t\t\t\t\t\t\t\tlabel: getLabel(t),\n\t\t\t\t\t\t\t\ticon: '',\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tITEMS_TYPE\n\t\t\t\t\t\t);\n\t\t\t\t\t\ttoggleVisibility(false);\n\t\t\t\t\t}}\n\t\t\t\t\ttoggleVisibility={toggleVisibility}\n\t\t\t\t/>\n\t\t\t)}\n\t\t</PanelBody>\n\t);\n};\n\nexport default ReportMaterials;\n","/**\n * External Dependencies\n */\nimport { Icon, blockMeta as icon } from '@wordpress/icons';\n\n/**\n * WordPress Dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { Fragment } from '@wordpress/element';\nimport { registerPlugin } from '@wordpress/plugins';\nimport { PluginSidebar, PluginPrePublishPanel } from '@wordpress/edit-post';\nimport { store as editorStore } from '@wordpress/editor';\nimport { useSelect } from '@wordpress/data';\nimport { Button, PanelBody } from '@wordpress/components';\n\n/**\n * Internal Dependencies\n */\nimport { ProvidePostReportPackage } from './context';\nimport BackChapters from './back-chapters';\nimport ReportMaterials from './materials';\n\nconst PLUGIN_NAME = 'prc-platform-post-report-package';\n\nfunction ReportPackagePanel() {\n\tconst { postType, postId, parentId, isChildPost } = useSelect((select) => {\n\t\tconst post_parent =\n\t\t\tselect(editorStore).getEditedPostAttribute('post_parent');\n\t\tconst currentPostType = select(editorStore).getCurrentPostType();\n\t\tconst currentPostId = select(editorStore).getCurrentPostId();\n\t\tconst currentParentId = 0 !== post_parent ? post_parent : currentPostId;\n\t\treturn {\n\t\t\tpostType: currentPostType,\n\t\t\tpostId: currentPostId,\n\t\t\tparentId: currentParentId,\n\t\t\tisChildPost: 0 !== post_parent,\n\t\t};\n\t}, []);\n\treturn (\n\t\t<Fragment>\n\t\t\t<PluginSidebar\n\t\t\t\tname={PLUGIN_NAME}\n\t\t\t\ttitle=\"Report Package\"\n\t\t\t\ticon={<Icon icon={icon} size={16} />}\n\t\t\t>\n\t\t\t\t<ProvidePostReportPackage\n\t\t\t\t\t{...{\n\t\t\t\t\t\tpostType,\n\t\t\t\t\t\tpostId: parentId,\n\t\t\t\t\t\tcurrentPostId: postId,\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<ReportMaterials />\n\t\t\t\t\t<BackChapters />\n\t\t\t\t\t<PanelBody title={__('Danger Zone')} initialOpen={false}>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tisDestructive\n\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\tconsole.log(\n\t\t\t\t\t\t\t\t\t'...copying attachments from legacy'\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tCheck for missing report materials from Legacy\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</PanelBody>\n\t\t\t\t</ProvidePostReportPackage>\n\t\t\t</PluginSidebar>\n\t\t\t{!isChildPost && (\n\t\t\t\t<PluginPrePublishPanel>\n\t\t\t\t\t<ProvidePostReportPackage\n\t\t\t\t\t\t{...{\n\t\t\t\t\t\t\tpostType,\n\t\t\t\t\t\t\tpostId: parentId,\n\t\t\t\t\t\t\tcurrentPostId: postId,\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t<p>Please review the attached report materials:</p>\n\t\t\t\t\t\t<ReportMaterials />\n\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\tPlease review the attached back chapter posts. These\n\t\t\t\t\t\t\tpost's status will be updated to match the parent\n\t\t\t\t\t\t\tpost on publish.\n\t\t\t\t\t\t</p>\n\t\t\t\t\t\t<BackChapters />\n\t\t\t\t\t</ProvidePostReportPackage>\n\t\t\t\t</PluginPrePublishPanel>\n\t\t\t)}\n\t\t</Fragment>\n\t);\n}\n\n// Pre publish to confirm your chapters.\n\nregisterPlugin(PLUGIN_NAME, {\n\trender: ReportPackagePanel,\n});\n"],"names":["window","forwardRef","icon","size","props","ref","cloneElement","width","height","createElement","SVG","xmlns","viewBox","Path","fillRule","d","clipRule","postReportPackageContext","createContext","usePostReportPackage","useContext","ProvidePostReportPackage","postId","postType","currentPostId","children","provider","usePostReportPackageContext","_meta$reportMaterials","_meta$multiSectionRep","meta","setMeta","useEntityProp","canDelete","isResolving","useResourcePermissions","materials","setMaterials","useState","reportMaterials","backChapters","setBackChapters","multiSectionReport","debounceMaterials","useDebounce","debounceBackChapters","allowEditing","useMemo","useEffect","console","log","undefined","getLatestStateByItemType","itemsType","reorder","oldIndex","newIndex","newItems","item","splice","fn","append","key","value","obj","Object","assign","push","remove","index","updateItem","valueKey","Provider","getTranslateOffset","element","style","getComputedStyle","Math","max","parseInt","getBoundingClientRect","transformItem","offsetY","offsetX","transform","removeProperty","setItemTransition","duration","timing","schd","lastArgs","frameId","wrapperFn","args","requestAnimationFrame","cancel","cancelAnimationFrame","checkIfInteractive","target","rootElement","DISABLED_ELEMENTS","DISABLED_ROLES","getAttribute","includes","tagName","toLowerCase","role","hasAttribute","parentElement","AUTOSCROLL_ACTIVE_OFFSET","AUTOSCROLL_SPEED_RATIO","AUTOSCROLL_DELTA_THRESHOLD","List","constructor","super","this","listRef","ghostRef","topOffsets","itemTranslateOffsets","initialYOffset","lastScroll","lastYOffset","lastListYOffset","needle","afterIndex","state","itemDragged","itemDraggedOutOfBounds","selectedItem","initialX","initialY","targetX","targetY","targetHeight","targetWidth","liveText","scrollingSpeed","scrollWindow","doScrolling","listEl","current","scrollTo","pageXOffset","pageYOffset","scrollTop","getChildren","Array","from","warn","calculateOffsets","map","top","getTargetIndex","e","findIndex","child","contains","onMouseOrTouchStart","dropTimeout","clearTimeout","finishDrop","isTouch","event","touches","length","changedTouches","button","values","disabled","setState","listItemTouched","handle","querySelector","preventDefault","beforeDrag","elements","opts","passive","touchAction","document","addEventListener","schdOnEnd","schdOnTouchMove","schdOnMouseMove","listItemDragged","onStart","clientX","clientY","getYOffset","listScroll","targetRect","targetStyles","left","onMouseMove","cancelable","onMove","onTouchMove","onWheel","deltaY","moveOtherItems","lockVertically","autoScrolling","itemVerticalCenter","offset","currentYOffset","isDraggedItemOutOfBounds","removableByMove","array","targetValue","guess","min","floor","binarySearch","animateItems","delta","bottom","viewportHeight","innerHeight","documentElement","clientHeight","round","scrollHeight","movedItem","animateMovedItem","forEach","i","transitionDuration","slice","reduce","a","b","initialRect","abs","onEnd","removeEventListener","removeItem","setTimeout","onChange","onKeyDown","currentTarget","focus","voiceover","dropped","lifted","moved","canceled","componentDidMount","capture","componentDidUpdate","_prevProps","prevState","componentWillUnmount","render","baseStyle","userSelect","WebkitUserSelect","MozUserSelect","msUserSelect","boxSizing","position","ghostStyle","marginTop","renderList","isHidden","isSelected","tabIndex","visibility","zIndex","renderItem","isDragged","isOutOfBounds","container","body","margin","border","padding","overflow","clip","clipPath","defaultProps","up","to","randomId","random","toString","substr","ListItem","label","defaultLabel","keyValue","onRemove","lastItem","postTitle","labelText","decodeEntities","background","paddingBottom","marginBottom","borderBottom","display","flexDirection","alignItems","Icon","dragHandle","flexGrow","paddingLeft","IconButton","onClick","AddChildModal","toggleAddChildModal","parentTitle","childTitle","onDeny","onConfirm","Modal","title","__","onRequestClose","ButtonGroup","Button","variant","CreateDraftModal","parentId","saveEntityRecord","useDispatch","coreDataStore","setPostTitle","TextControl","async","newDraftPost","status","id","PostSearchByEditUrlField","hocOnChange","getEntityRecord","useSelect","select","getEditedPostAttribute","getCurrentPostId","targetPostId","setTargetPostId","record","useEntityRecord","enabled","addChildModalOpen","createDraftModalOpen","toggleCreateDraftModal","isLoading","toggleLoading","setChildTitle","searchValue","setSearchValue","matched","setMatched","postUrl","searchResult","setSearchResult","getQueryArg","rendered","Fragment","SearchControl","val","placeholder","autoComplete","Spinner","newPostId","ExistingBackChapterToolbar","editLink","previewLink","href","edit","showTooltip","external","BackChapters","ITEMS_TYPE","PanelBody","TypeSelect","type","toggleVisibility","options","types","Popover","className","noArrow","placement","onFocusOutside","minWidth","SelectControl","getLabel","t","find","x","ALLOWED_MEDIA_TYPES","Item","url","attachmentId","popoverVisible","paddingTop","u","c","UploadFileButton","MediaUploadCheck","MediaUpload","allowedTypes","onSelect","img","open","UploadIconButton","newType","PLUGIN_NAME","registerPlugin","isChildPost","post_parent","editorStore","currentPostType","getCurrentPostType","PluginSidebar","name","ReportMaterials","initialOpen","isDestructive","PluginPrePublishPanel"],"sourceRoot":""}