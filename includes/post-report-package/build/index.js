!function(){"use strict";var e=window.wp.element,t=window.wp.i18n,i=window.wp.plugins,n=window.wp.editPost,s=window.wp.editor,o=window.wp.data,l=window.wp.coreData;const r=(0,e.createContext)(),a=()=>(0,e.useContext)(r);function d({postId:t,postType:i,children:n}){const s=((t,i)=>{const[n,s]=(0,e.useState)(!0),[o,r]=(0,e.useState)([]),[a,d]=(0,e.useState)([]),[c,h]=(0,l.useEntityProp)("postType",i,"meta",t),{canDelete:u,isResolving:p}=(0,l.useResourcePermissions)("posts",t),m=(0,e.useMemo)((()=>!p&&!!u),[p,u]);(0,e.useEffect)((()=>{if(n&&c){const{reportMaterials:e,multiSectionReport:t}=c;e&&r(e),t&&d(t),s(!1)}}),[c,n]),(0,e.useEffect)((()=>{if(!n&&m&&(o||a)){const e={...c};o&&(e.reportMaterials=o),a&&(e.multiSectionReport=a),h(e)}}),[m,o,a]);const g=(e="materials")=>"materials"===e?[...o]:"backChapters"===e?[...a]:[];return{loading:n,allowEditing:m,postId:t,postType:i,materials:o,backChapters:a,reorder:(e,t,i="materials")=>{if(!m)return;const n=g(i),s=n[e];n.splice(e,1),n.splice(t,0,s);let o=()=>console.log("reorder",e,t,i);"materials"===i?o=r:"backChapters"===i&&(o=d),o(n)},append:(e,t={},i="materials")=>{if(!m)return;const n=g(i),s={key:e};Object.assign(s,t),n.push(s);let o=()=>console.log("append",e,t,s,i);"materials"===i?o=r:"backChapters"===i&&(o=d),o(n)},remove:(e,t="materials")=>{if(!m)return;const i=g(t);i.splice(e,1);let n=()=>console.log("remove",e,t);"materials"===t?n=r:"backChapters"===t&&(n=d),n(i)},updateItem:(e,t,i,n="materials")=>{if(!m)return;const s=g(n);s[e][t]=i;let o=()=>console.log("updateItem",e,t,i,n);"materials"===n?o=r:"backChapters"===n&&(o=d),o(s)}}})(t,i);return(0,e.createElement)(r.Provider,{value:s},n)}var c=window.React,h=window.ReactDOM;function u(e){const t=window.getComputedStyle(e);return Math.max(parseInt(t["margin-top"],10),parseInt(t["margin-bottom"],10))+e.getBoundingClientRect().height}function p(e,t=0,i=0){e&&(null!==t&&null!==i?e.style.transform=`translate(${i}px, ${t}px)`:e.style.removeProperty("transform"))}function m(e,t,i){e&&(e.style.transition=`transform ${t}ms${i?` ${i}`:""}`)}const g=e=>{let t=[],i=null;const n=(...n)=>{t=n,i||(i=requestAnimationFrame((()=>{i=null,e(...t)})))};return n.cancel=()=>{i&&cancelAnimationFrame(i)},n};function f(e,t){const i=["input","textarea","select","option","optgroup","video","audio","button","a"],n=["button","link","checkbox","tab"];for(;e!==t;){if(e.getAttribute("data-movable-handle"))return!1;if(i.includes(e.tagName.toLowerCase()))return!0;const t=e.getAttribute("role");if(t&&n.includes(t.toLowerCase()))return!0;if("label"===e.tagName.toLowerCase()&&e.hasAttribute("for"))return!0;e.tagName&&(e=e.parentElement)}return!1}const v=200;class w extends c.Component{constructor(e){super(e),this.listRef=c.createRef(),this.ghostRef=c.createRef(),this.topOffsets=[],this.itemTranslateOffsets=[],this.initialYOffset=0,this.lastScroll=0,this.lastYOffset=0,this.lastListYOffset=0,this.needle=-1,this.afterIndex=-2,this.state={itemDragged:-1,itemDraggedOutOfBounds:-1,selectedItem:-1,initialX:0,initialY:0,targetX:0,targetY:0,targetHeight:0,targetWidth:0,liveText:"",scrollingSpeed:0,scrollWindow:!1},this.doScrolling=()=>{const{scrollingSpeed:e,scrollWindow:t}=this.state,i=this.listRef.current;window.requestAnimationFrame((()=>{t?window.scrollTo(window.pageXOffset,window.pageYOffset+1.5*e):i.scrollTop+=e,0!==e&&this.doScrolling()}))},this.getChildren=()=>this.listRef&&this.listRef.current?Array.from(this.listRef.current.children):(console.warn("No items found in the List container. Did you forget to pass & spread the `props` param in renderList?"),[]),this.calculateOffsets=()=>{this.topOffsets=this.getChildren().map((e=>e.getBoundingClientRect().top)),this.itemTranslateOffsets=this.getChildren().map((e=>u(e)))},this.getTargetIndex=e=>this.getChildren().findIndex((t=>t===e.target||t.contains(e.target))),this.onMouseOrTouchStart=e=>{this.dropTimeout&&this.state.itemDragged>-1&&(window.clearTimeout(this.dropTimeout),this.finishDrop());const t=(i=e).touches&&i.touches.length||i.changedTouches&&i.changedTouches.length;var i;if(!t&&0!==e.button)return;const n=this.getTargetIndex(e);if(-1===n||this.props.values[n]&&this.props.values[n].disabled)return void(-1!==this.state.selectedItem&&(this.setState({selectedItem:-1}),this.finishDrop()));const s=this.getChildren()[n],o=s.querySelector("[data-movable-handle]");if((!o||o.contains(e.target))&&!f(e.target,s)){if(e.preventDefault(),this.props.beforeDrag&&this.props.beforeDrag({elements:this.getChildren(),index:n}),t){const e={passive:!1};s.style.touchAction="none",document.addEventListener("touchend",this.schdOnEnd,e),document.addEventListener("touchmove",this.schdOnTouchMove,e),document.addEventListener("touchcancel",this.schdOnEnd,e)}else{document.addEventListener("mousemove",this.schdOnMouseMove),document.addEventListener("mouseup",this.schdOnEnd);const e=this.getChildren()[this.state.itemDragged];e&&e.style&&(e.style.touchAction="")}this.onStart(s,t?e.touches[0].clientX:e.clientX,t?e.touches[0].clientY:e.clientY,n)}},this.getYOffset=()=>{const e=this.listRef.current?this.listRef.current.scrollTop:0;return window.pageYOffset+e},this.onStart=(e,t,i,n)=>{this.state.selectedItem>-1&&(this.setState({selectedItem:-1}),this.needle=-1);const s=e.getBoundingClientRect(),o=window.getComputedStyle(e);this.calculateOffsets(),this.initialYOffset=this.getYOffset(),this.lastYOffset=window.pageYOffset,this.lastListYOffset=this.listRef.current.scrollTop,this.setState({itemDragged:n,targetX:s.left-parseInt(o["margin-left"],10),targetY:s.top-parseInt(o["margin-top"],10),targetHeight:s.height,targetWidth:s.width,initialX:t,initialY:i})},this.onMouseMove=e=>{e.cancelable&&e.preventDefault(),this.onMove(e.clientX,e.clientY)},this.onTouchMove=e=>{e.cancelable&&e.preventDefault(),this.onMove(e.touches[0].clientX,e.touches[0].clientY)},this.onWheel=e=>{this.state.itemDragged<0||(this.lastScroll=this.listRef.current.scrollTop+=e.deltaY,this.moveOtherItems())},this.onMove=(e,t)=>{if(-1===this.state.itemDragged)return null;p(this.ghostRef.current,t-this.state.initialY,this.props.lockVertically?0:e-this.state.initialX),this.autoScrolling(t),this.moveOtherItems()},this.moveOtherItems=()=>{const e=this.ghostRef.current.getBoundingClientRect(),t=e.top+e.height/2,i=u(this.getChildren()[this.state.itemDragged]),n=this.getYOffset();this.initialYOffset!==n&&(this.topOffsets=this.topOffsets.map((e=>e-(n-this.initialYOffset))),this.initialYOffset=n),this.isDraggedItemOutOfBounds()&&this.props.removableByMove?this.afterIndex=this.topOffsets.length+1:this.afterIndex=function(e,t){let i,n=0,s=e.length-1;for(;n<=s;){if(i=Math.floor((s+n)/2),!e[i+1]||e[i]<=t&&e[i+1]>=t)return i;e[i]<t&&e[i+1]<t?n=i+1:s=i-1}return-1}(this.topOffsets,t),this.animateItems(-1===this.afterIndex?0:this.afterIndex,this.state.itemDragged,i)},this.autoScrolling=e=>{const{top:t,bottom:i,height:n}=this.listRef.current.getBoundingClientRect(),s=window.innerHeight||document.documentElement.clientHeight;if(i>s&&s-e<v)this.setState({scrollingSpeed:Math.round((v-(s-e))/10),scrollWindow:!0});else if(t<0&&e<v)this.setState({scrollingSpeed:Math.round((v-e)/-10),scrollWindow:!0});else if(this.state.scrollWindow&&0!==this.state.scrollingSpeed&&this.setState({scrollingSpeed:0,scrollWindow:!1}),n+20<this.listRef.current.scrollHeight){let n=0;e-t<v?n=Math.round((v-(e-t))/-10):i-e<v&&(n=Math.round((v-(i-e))/10)),this.state.scrollingSpeed!==n&&this.setState({scrollingSpeed:n})}},this.animateItems=(e,t,i,n=!1)=>{this.getChildren().forEach(((s,o)=>{if(m(s,this.props.transitionDuration),t===o&&n){if(t===e)return p(s,null);p(s,t<e?this.itemTranslateOffsets.slice(t+1,e+1).reduce(((e,t)=>e+t),0):-1*this.itemTranslateOffsets.slice(e,t).reduce(((e,t)=>e+t),0))}else p(s,t<e&&o>t&&o<=e?-i:o<t&&t>e&&o>=e?i:null)}))},this.isDraggedItemOutOfBounds=()=>{const e=this.getChildren()[this.state.itemDragged].getBoundingClientRect(),t=this.ghostRef.current.getBoundingClientRect();return Math.abs(e.left-t.left)>t.width?(-1===this.state.itemDraggedOutOfBounds&&this.setState({itemDraggedOutOfBounds:this.state.itemDragged}),!0):(this.state.itemDraggedOutOfBounds>-1&&this.setState({itemDraggedOutOfBounds:-1}),!1)},this.onEnd=e=>{e.cancelable&&e.preventDefault(),document.removeEventListener("mousemove",this.schdOnMouseMove),document.removeEventListener("touchmove",this.schdOnTouchMove),document.removeEventListener("mouseup",this.schdOnEnd),document.removeEventListener("touchup",this.schdOnEnd),document.removeEventListener("touchcancel",this.schdOnEnd);const t=this.props.removableByMove&&this.isDraggedItemOutOfBounds();!t&&this.props.transitionDuration>0&&-2!==this.afterIndex&&g((()=>{m(this.ghostRef.current,this.props.transitionDuration,"cubic-bezier(.2,1,.1,1)"),this.afterIndex<1&&0===this.state.itemDragged?p(this.ghostRef.current,0,0):p(this.ghostRef.current,-(window.pageYOffset-this.lastYOffset)-(this.listRef.current.scrollTop-this.lastListYOffset)+(this.state.itemDragged<this.afterIndex?this.itemTranslateOffsets.slice(this.state.itemDragged+1,this.afterIndex+1).reduce(((e,t)=>e+t),0):-1*this.itemTranslateOffsets.slice(this.afterIndex<0?0:this.afterIndex,this.state.itemDragged).reduce(((e,t)=>e+t),0)),0)}))(),this.dropTimeout=window.setTimeout(this.finishDrop,t||-2===this.afterIndex?0:this.props.transitionDuration)},this.finishDrop=()=>{const e=this.props.removableByMove&&this.isDraggedItemOutOfBounds();(e||this.afterIndex>-2&&this.state.itemDragged!==this.afterIndex)&&this.props.onChange({oldIndex:this.state.itemDragged,newIndex:e?-1:Math.max(this.afterIndex,0),targetRect:this.ghostRef.current.getBoundingClientRect()}),this.getChildren().forEach((e=>{m(e,0),p(e,null),e.style.touchAction=""})),this.setState({itemDragged:-1,scrollingSpeed:0}),this.afterIndex=-2,this.lastScroll>0&&(this.listRef.current.scrollTop=this.lastScroll,this.lastScroll=0)},this.onKeyDown=e=>{const t=this.state.selectedItem,i=this.getTargetIndex(e);if(!f(e.target,e.currentTarget)&&-1!==i){if(" "===e.key&&(e.preventDefault(),t===i?(t!==this.needle&&(this.getChildren().forEach((e=>{m(e,0),p(e,null)})),this.props.onChange({oldIndex:t,newIndex:this.needle,targetRect:this.getChildren()[this.needle].getBoundingClientRect()}),this.getChildren()[this.needle].focus()),this.setState({selectedItem:-1,liveText:this.props.voiceover.dropped(t+1,this.needle+1)}),this.needle=-1):(this.setState({selectedItem:i,liveText:this.props.voiceover.lifted(i+1)}),this.needle=i,this.calculateOffsets())),("ArrowDown"===e.key||"j"===e.key)&&t>-1&&this.needle<this.props.values.length-1){e.preventDefault();const i=u(this.getChildren()[t]);this.needle++,this.animateItems(this.needle,t,i,!0),this.setState({liveText:this.props.voiceover.moved(this.needle+1,!1)})}if(("ArrowUp"===e.key||"k"===e.key)&&t>-1&&this.needle>0){e.preventDefault();const i=u(this.getChildren()[t]);this.needle--,this.animateItems(this.needle,t,i,!0),this.setState({liveText:this.props.voiceover.moved(this.needle+1,!0)})}"Escape"===e.key&&t>-1&&(this.getChildren().forEach((e=>{m(e,0),p(e,null)})),this.setState({selectedItem:-1,liveText:this.props.voiceover.canceled(t+1)}),this.needle=-1),("Tab"===e.key||"Enter"===e.key)&&t>-1&&e.preventDefault()}},this.schdOnMouseMove=g(this.onMouseMove),this.schdOnTouchMove=g(this.onTouchMove),this.schdOnEnd=g(this.onEnd)}componentDidMount(){this.calculateOffsets(),document.addEventListener("touchstart",this.onMouseOrTouchStart,{passive:!1,capture:!1}),document.addEventListener("mousedown",this.onMouseOrTouchStart)}componentDidUpdate(e,t){t.scrollingSpeed!==this.state.scrollingSpeed&&0===t.scrollingSpeed&&this.doScrolling()}componentWillUnmount(){document.removeEventListener("touchstart",this.onMouseOrTouchStart),document.removeEventListener("mousedown",this.onMouseOrTouchStart),this.dropTimeout&&window.clearTimeout(this.dropTimeout),this.schdOnMouseMove.cancel(),this.schdOnTouchMove.cancel(),this.schdOnEnd.cancel()}render(){const e={userSelect:"none",WebkitUserSelect:"none",MozUserSelect:"none",msUserSelect:"none",boxSizing:"border-box",position:"relative"},t={...e,top:this.state.targetY,left:this.state.targetX,width:this.state.targetWidth,height:this.state.targetHeight,position:"fixed",marginTop:0};return c.createElement(c.Fragment,null,this.props.renderList({children:this.props.values.map(((t,i)=>{const n=i===this.state.itemDragged,s=i===this.state.selectedItem,o={key:i,tabIndex:this.props.values[i]&&this.props.values[i].disabled?-1:0,"aria-roledescription":this.props.voiceover.item(i+1),onKeyDown:this.onKeyDown,style:{...e,visibility:n?"hidden":void 0,zIndex:s?5e3:0}};return this.props.renderItem({value:t,props:o,index:i,isDragged:!1,isSelected:s,isOutOfBounds:!1})})),isDragged:this.state.itemDragged>-1,props:{ref:this.listRef}}),this.state.itemDragged>-1&&h.createPortal(this.props.renderItem({value:this.props.values[this.state.itemDragged],props:{ref:this.ghostRef,style:t,onWheel:this.onWheel},index:this.state.itemDragged,isDragged:!0,isSelected:!1,isOutOfBounds:this.state.itemDraggedOutOfBounds>-1}),this.props.container||document.body),c.createElement("div",{"aria-live":"assertive",role:"log","aria-atomic":"true",style:{position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0px",padding:"0px",overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"}},this.state.liveText))}}w.defaultProps={transitionDuration:300,lockVertically:!1,removableByMove:!1,voiceover:{item:e=>`You are currently at a draggable item at position ${e}. Press space bar to lift.`,lifted:e=>`You have lifted item at position ${e}. Press j to move down, k to move up, space bar to drop and escape to cancel.`,moved:(e,t)=>`You have moved the lifted item ${t?"up":"down"} to position ${e}. Press j to move down, k to move up, space bar to drop and escape to cancel.`,dropped:(e,t)=>`You have dropped the item. It has moved from position ${e} to ${t}.`,canceled:e=>`You have cancelled the movement. The item has returned to its starting position of ${e}.`}};var E=w,b=window.wp.components;function y(){return`_${Math.random().toString(36).substr(2,9)}`}var I=window.wp.htmlEntities,x=window.wp.primitives,C=(0,e.createElement)(x.SVG,{width:"24",height:"24",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,e.createElement)(x.Path,{d:"M8 7h2V5H8v2zm0 6h2v-2H8v2zm0 6h2v-2H8v2zm6-14v2h2V5h-2zm0 8h2v-2h-2v2zm0 6h2v-2h-2v2z"}));function O({label:t,defaultLabel:i,keyValue:n,index:s,children:o,onRemove:l=!1,lastItem:r=!1,icon:a=!1}){const[d,c]=(0,e.useState)(void 0!==t?t:i);return(0,e.useEffect)((()=>{console.log("getPostTitleByKey",t,i,n,s),void 0===t&&void 0!==n&&(e=>{const{api:t}=window.wp,n=new t.models.Post({id:e});null===e?c(i):n.fetch().then((e=>{console.log(e),c(`${(0,I.decodeEntities)(e.title.rendered)} (${e.id})`)}))})(n)}),[n]),(0,e.createElement)("div",{style:{background:"white",paddingBottom:"1em",marginBottom:"1em",borderBottom:r?"none":"1px solid #EAEAEA"}},(0,e.createElement)("div",{style:{display:"flex",flexDirection:"row",width:"100%",alignItems:"center"}},(0,e.createElement)("div",{style:{display:"flex"}},(0,e.createElement)(b.Icon,{icon:C})),(0,e.createElement)("div",{style:{display:"flex",flexGrow:"1",paddingLeft:"1em"}},!1!==a&&{icon:a},(0,e.createElement)("span",null,d)),(0,e.createElement)("div",{style:{display:"flex"}},(0,e.createElement)(b.IconButton,{icon:"no-alt",onClick:()=>{!1!==l&&"function"==typeof l&&l()}}))),o)}var S=window.prcHooks,D=window.wp.url;const{api:T}=window.wp;var k=({hocOnChange:i=!1})=>{const[n,s]=(0,e.useState)(!1),[o,l]=(0,e.useState)(!1),[r,a]=(0,e.useState)(),[d,c]=(0,e.useState)(),h=(0,S.useDebounce)(d,1e3),[u,p]=(0,e.useState)(!1);return(0,e.useEffect)((()=>{console.log("postUrl",h),void 0!==h&&3<=h.length&&(e=>{const t=(0,D.getQueryArg)(e,"post");console.log("fetchPostByEditURL",e),new T.models.Post({id:t}).fetch().then((e=>{console.log("matched?",e),a(e.title.rendered),p(e),s(!0)})).always((()=>{l(!1)}))})(h)}),[h]),(0,e.createElement)(e.Fragment,null,(0,e.createElement)("div",{style:{display:"flex",flexDirection:"row"}},(0,e.createElement)("div",{style:{flexGrow:"1"}},(0,e.createElement)(b.TextControl,{autoComplete:"off",onChange:e=>{l(!0),c(e)},placeholder:"Paste post's edit url..."})),(0,e.createElement)("div",null,o&&(0,e.createElement)(b.Spinner,null))),!0===n&&(0,e.createElement)(b.Modal,{title:(0,t.__)("Confirm Post","prc-platform-post-report-package"),onRequestClose:()=>{s(!1)}},(0,e.createElement)("p",null,"Add ",(0,e.createElement)("strong",null,(0,I.decodeEntities)(r))," post as child?"),(0,e.createElement)(b.ButtonGroup,null,(0,e.createElement)(b.Button,{variant:"secondary",onClick:()=>{c(""),p(!1)}},"No"),(0,e.createElement)(b.Button,{variant:"primary",onClick:()=>{const{id:e}=u;new T.models.Post({id:e}).fetch().then((e=>{e.id===u.id?(s(!1),p(!1),!1!==i&&i(e.id)):alert("Uhoh, somethings wrong here. The expected post id does not match the given id.")}))}},"Yes"))))};function R(){const t="backChapters",{backChapters:i,reorder:n,append:s,remove:o,updateItem:l}=a();return(0,e.createElement)(b.PanelBody,{title:"Back Chapters"},(0,e.createElement)(E,{lockVertically:!0,values:null!=i?i:[],onChange:({oldIndex:e,newIndex:i})=>n(e,i,t),renderList:({children:t,props:i})=>(0,e.createElement)("div",{...i},t),renderItem:({value:i,props:n,index:s})=>(0,e.createElement)("div",{...n},(0,e.createElement)(O,{key:i.key,defaultLabel:"Child Post",keyValue:i.postId,index:s,onRemove:()=>o(s,t)},null===i.postId&&(0,e.createElement)(k,{hocOnChange:e=>l(s,"postId",e,t)})))}),(0,e.createElement)(b.Button,{variant:"primary",onClick:()=>s(y(),{postId:null},t)},"Add Back Chapter"))}var M=window.wp.blockEditor;const B=[{label:"Default",value:null,icon:null},{label:"Detailed Table",value:"detailedTable",icon:null},{label:"Link",value:"link",icon:null},{label:"Presentation",value:"presentation",icon:null},{label:"Press Release",value:"pressRelease",icon:null},{label:"Promo",value:"promo",icon:null},{label:"Q & A",value:"qA",icon:null},{label:"Questionnaire",value:"questionnaire",icon:null},{label:"Report PDF",value:"report",icon:null},{label:"Supplemental",value:"supplemental",icon:null},{label:"Topline",value:"topline",icon:null}],P=({type:t=null,onChange:i,toggleVisibility:n})=>{const s=B;return(0,e.createElement)(b.Popover,{className:"prc-report-material-popover",noArrow:!1,onFocusOutside:()=>{n(!1)}},(0,e.createElement)("div",{style:{padding:"0.6em",minWidth:"140px"}},(0,e.createElement)(b.SelectControl,{label:"Type",value:t,options:s,onChange:i})))},Y=["image","application/pdf","application/vnd.openxmlformats-officedocument.presentationml.presentation","application/vnd.ms-powerpoint","application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"];var L=({type:i,url:n,attachmentId:s,label:o,icon:l,index:r})=>{const d="materials",{updateItem:c,allowEditing:h,remove:u}=a(),[p,m]=(0,e.useState)(!1),g=()=>{const e=B.find((e=>e.value===i));return void 0!==e?e.label:""};return(0,e.createElement)(O,{label:g(),index:r,onRemove:()=>u(r,d)},(0,e.createElement)("div",{style:{paddingTop:"10px"}},["report","questionnaire","detailedTable","powerpoint","presentation","pressRelease","topline"].includes(i)&&(0,e.createElement)((({title:i,value:n})=>(0,e.createElement)(M.MediaUploadCheck,null,(0,e.createElement)(M.MediaUpload,{title:`Upload ${i}`,allowedTypes:Y,value:n,onSelect:e=>{c(r,"url",e.url,d),c(r,"attachmentId",e.id,d)},render:({open:s})=>(0,e.createElement)(b.Button,{variant:"secondary",disabled:!h,onClick:s},(0,t.__)(null===n?`Upload ${i}`:`Change ${i}`))}))),{title:g(),value:s}),["presentation","pressRelease"].includes(i)&&(0,e.createElement)(e.Fragment,null,(0,e.createElement)(b.TextControl,{autoComplete:!1,label:"URL",value:n,onChange:e=>c(r,"url",e,d),disabled:!h})),["link","promo","qA","supplemental"].includes(i)&&(0,e.createElement)(e.Fragment,null,(0,e.createElement)(b.TextControl,{autoComplete:!1,label:"Label",value:o,onChange:e=>c(r,"label",e,d),disabled:!h}),(0,e.createElement)(b.TextControl,{autoComplete:!1,label:"URL",value:n,onChange:e=>c(r,"url",e,d),disabled:!h}),"link"===i&&(0,e.createElement)(b.SelectControl,{label:"Icon",value:l,options:B,onChange:e=>{console.log(e),c(r,"icon",e,d)},disabled:!h}),"promo"===i&&(0,e.createElement)(M.MediaUploadCheck,null,(0,e.createElement)(M.MediaUpload,{title:"Upload Promo Icon",value:s,onSelect:e=>{c(r,"icon",e.url,d),c(r,"attachmentId",e.id,d)},render:({open:t})=>(0,e.createElement)(b.Button,{onClick:t,disabled:!h},"Upload Icon")}))),(0,e.createElement)(b.Button,{variant:"link",onClick:()=>{m(!0),console.log("toggleVisibility")},style:{height:"auto"},disabled:!h},"Change Type"),p&&(0,e.createElement)(P,{type:i,onChange:e=>{c(r,"type",e,d),c(r,"attachmentId",0,d),c(r,"url","",d),c(r,"label","",d),c(r,"icon","",d),m(!1)},toggleVisibility:m})))},A=function(){const[i,n]=(0,e.useState)(!1),s="materials",{materials:o,reorder:l,append:r,remove:d,updateItem:c,isResolving:h}=a();return(0,e.createElement)(b.PanelBody,{title:"Materials"},(0,e.createElement)(E,{lockVertically:!0,values:null!=o?o:[],onChange:({oldIndex:e,newIndex:t})=>l(e,t,s),renderList:({children:t,props:i})=>(0,e.createElement)("div",{...i},t),renderItem:({value:t,props:i,index:n})=>(0,e.createElement)("div",{...i},(0,e.createElement)(L,{key:t.key,type:t.type,url:t.url,label:t.label,icon:t.icon,attachmentId:t.attachmentId,index:n}))}),(0,e.createElement)(b.Button,{variant:"primary",onClick:()=>{n(!0)}},(0,t.__)("Add Report Material")),i&&(0,e.createElement)(P,{onChange:e=>{r(y(),{type:e,url:"",attachmentId:0,label:"",icon:""},s),n(!1)},toggleVisibility:n}))},U=window.prcIcons;function $(){return(0,e.createElement)(U.Icon,{icon:U.icons.faBookBookmark,width:24,preserveAspectRatio:"xMidYMid meet"})}const W="prc-platform-post-report-package";(0,i.registerPlugin)(W,{render:function(){const{postType:t,postId:i,parentId:l,isChildPost:r}=(0,o.useSelect)((e=>{const t=e(s.store).getEditedPostAttribute("post_parent"),i=e(s.store).getCurrentPostType(),n=e(s.store).getCurrentPostId();return{postType:i,postId:n,parentId:0!==t?t:n,isChildPost:0!==t}}),[]);return(0,e.createElement)(n.PluginSidebar,{name:W,title:"Report Package",icon:$},(0,e.createElement)(d,{postType:t,postId:l},(0,e.createElement)(A,null),(0,e.createElement)(R,null)))}})}();
//# sourceMappingURL=index.js.map