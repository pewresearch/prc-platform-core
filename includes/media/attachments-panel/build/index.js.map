{"version":3,"file":"index.js","mappings":"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","sources":["webpack://@pewresearch/prc-platform-attachments-panel/./src/attachments-list.jsx","webpack://@pewresearch/prc-platform-attachments-panel/./src/attachments-panel.jsx","webpack://@pewresearch/prc-platform-attachments-panel/./src/context.js","webpack://@pewresearch/prc-platform-attachments-panel/./src/drag-and-drop-zone.jsx","webpack://@pewresearch/prc-platform-attachments-panel/./src/file.jsx","webpack://@pewresearch/prc-platform-attachments-panel/./src/image.jsx","webpack://@pewresearch/prc-platform-attachments-panel/./src/index.js","webpack://@pewresearch/prc-platform-attachments-panel/./src/style.scss","webpack://@pewresearch/prc-platform-attachments-panel/external window \"React\"","webpack://@pewresearch/prc-platform-attachments-panel/external window \"classnames\"","webpack://@pewresearch/prc-platform-attachments-panel/external window \"prcHooks\"","webpack://@pewresearch/prc-platform-attachments-panel/external window [\"wp\",\"apiFetch\"]","webpack://@pewresearch/prc-platform-attachments-panel/external window [\"wp\",\"blockEditor\"]","webpack://@pewresearch/prc-platform-attachments-panel/external window [\"wp\",\"blocks\"]","webpack://@pewresearch/prc-platform-attachments-panel/external window [\"wp\",\"components\"]","webpack://@pewresearch/prc-platform-attachments-panel/external window [\"wp\",\"coreData\"]","webpack://@pewresearch/prc-platform-attachments-panel/external window [\"wp\",\"data\"]","webpack://@pewresearch/prc-platform-attachments-panel/external window [\"wp\",\"editPost\"]","webpack://@pewresearch/prc-platform-attachments-panel/external window [\"wp\",\"editor\"]","webpack://@pewresearch/prc-platform-attachments-panel/external window [\"wp\",\"element\"]","webpack://@pewresearch/prc-platform-attachments-panel/external window [\"wp\",\"i18n\"]","webpack://@pewresearch/prc-platform-attachments-panel/external window [\"wp\",\"mediaUtils\"]","webpack://@pewresearch/prc-platform-attachments-panel/external window [\"wp\",\"plugins\"]","webpack://@pewresearch/prc-platform-attachments-panel/webpack/bootstrap","webpack://@pewresearch/prc-platform-attachments-panel/webpack/runtime/chunk loaded","webpack://@pewresearch/prc-platform-attachments-panel/webpack/runtime/compat get default export","webpack://@pewresearch/prc-platform-attachments-panel/webpack/runtime/define property getters","webpack://@pewresearch/prc-platform-attachments-panel/webpack/runtime/hasOwnProperty shorthand","webpack://@pewresearch/prc-platform-attachments-panel/webpack/runtime/make namespace object","webpack://@pewresearch/prc-platform-attachments-panel/webpack/runtime/jsonp chunk loading","webpack://@pewresearch/prc-platform-attachments-panel/webpack/before-startup","webpack://@pewresearch/prc-platform-attachments-panel/webpack/startup","webpack://@pewresearch/prc-platform-attachments-panel/webpack/after-startup"],"sourcesContent":["/**\n * WordPress Dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport {\n\tButton,\n\tBaseControl,\n\tPanelBody,\n\tSpinner,\n\tTextControl,\n\tCardDivider,\n\tTabPanel,\n} from '@wordpress/components';\nimport { Fragment } from '@wordpress/element';\n\n/**\n * Internal Dependencies\n */\nimport { useAttachments } from './context';\nimport DragAndDropZone from './drag-and-drop-zone';\nimport Image from './image';\nimport File from './file';\n\nfunction Images() {\n\tconst { attachments, loading, debouncedSearchTerm } = useAttachments();\n\n\tconst images = attachments.filter((attachment) =>\n\t\tattachment.type.startsWith('image/')\n\t);\n\t// Sort attachments by title\n\tconst sortedAttachments = images.sort((a, b) => {\n\t\tif (a.title.toLowerCase() < b.title.toLowerCase()) {\n\t\t\treturn -1;\n\t\t}\n\t\tif (a.title.toLowerCase() > b.title.toLowerCase()) {\n\t\t\treturn 1;\n\t\t}\n\t\treturn 0;\n\t});\n\n\tconst filteredAttachments = sortedAttachments.filter(\n\t\t(attachment) =>\n\t\t\t'' === debouncedSearchTerm ||\n\t\t\tattachment.title\n\t\t\t\t.toLowerCase()\n\t\t\t\t.includes(debouncedSearchTerm.toLowerCase())\n\t);\n\n\treturn (\n\t\t<div>\n\t\t\t{loading ? (\n\t\t\t\t<Spinner />\n\t\t\t) : (\n\t\t\t\tfilteredAttachments.map((image) => <Image {...image} />)\n\t\t\t)}\n\t\t</div>\n\t);\n}\n\nfunction Files() {\n\tconst { attachments, loading, debouncedSearchTerm } = useAttachments();\n\n\tconst files = attachments.filter((attachment) =>\n\t\tattachment.type.startsWith('application/')\n\t);\n\t// Sort attachments by title\n\tconst sortedAttachments = files.sort((a, b) => {\n\t\tif (a.title.toLowerCase() < b.title.toLowerCase()) {\n\t\t\treturn -1;\n\t\t}\n\t\tif (a.title.toLowerCase() > b.title.toLowerCase()) {\n\t\t\treturn 1;\n\t\t}\n\t\treturn 0;\n\t});\n\n\tconst filteredAttachments = sortedAttachments.filter(\n\t\t(attachment) =>\n\t\t\t'' === debouncedSearchTerm ||\n\t\t\tattachment.title\n\t\t\t\t.toLowerCase()\n\t\t\t\t.includes(debouncedSearchTerm.toLowerCase())\n\t);\n\n\treturn (\n\t\t<div>\n\t\t\t{loading ? (\n\t\t\t\t<Spinner />\n\t\t\t) : (\n\t\t\t\tfilteredAttachments.map((file) => <File {...file} />)\n\t\t\t)}\n\t\t</div>\n\t);\n}\n\nfunction AttachmentsList() {\n\tconst { attachments, searchTerm, setSearchTerm, mediaEditor } =\n\t\tuseAttachments();\n\n\treturn (\n\t\t<PanelBody\n\t\t\ttitle={__('Attachments')}\n\t\t\tinitialOpen\n\t\t\tclassName=\"prc-attachments-list\"\n\t\t>\n\t\t\t<BaseControl\n\t\t\t\tid=\"prc-media-zone\"\n\t\t\t\tlabel={__(\n\t\t\t\t\t'Drag and drop images to attach them to the post. Click on an image to select the image size to insert into the editor, or \"shift + click\" an image to insert at 640-wide.',\n\t\t\t\t\t'prc-block-plugins'\n\t\t\t\t)}\n\t\t\t>\n\t\t\t\t{0 < attachments.length && (\n\t\t\t\t\t<Fragment>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tvariant=\"secondary\"\n\t\t\t\t\t\t\tonClick={() => mediaEditor.open()}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tEdit Attachments\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t<CardDivider />\n\t\t\t\t\t</Fragment>\n\t\t\t\t)}\n\t\t\t\t<TextControl\n\t\t\t\t\tlabel={__('Filter Attachments')}\n\t\t\t\t\tvalue={searchTerm}\n\t\t\t\t\tonChange={(value) => setSearchTerm(value)}\n\t\t\t\t/>\n\t\t\t\t<CardDivider />\n\t\t\t\t<DragAndDropZone />\n\t\t\t\t<TabPanel\n\t\t\t\t\tclassName=\"prc-attachments-tabs\"\n\t\t\t\t\tactiveClass=\"active-tab\"\n\t\t\t\t\tonSelect={(tabName) => {\n\t\t\t\t\t\tconsole.log('Selecting tab', tabName);\n\t\t\t\t\t}}\n\t\t\t\t\ttabs={[\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tname: 'images',\n\t\t\t\t\t\t\ttitle: 'Images',\n\t\t\t\t\t\t\tclassName: 'tab-images',\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tname: 'files',\n\t\t\t\t\t\t\ttitle: 'Files',\n\t\t\t\t\t\t\tclassName: 'tab-files',\n\t\t\t\t\t\t},\n\t\t\t\t\t]}\n\t\t\t\t>\n\t\t\t\t\t{(tab) => {\n\t\t\t\t\t\tswitch (tab.name) {\n\t\t\t\t\t\t\tcase 'images':\n\t\t\t\t\t\t\t\treturn <Images />;\n\t\t\t\t\t\t\tcase 'files':\n\t\t\t\t\t\t\t\treturn <Files />;\n\t\t\t\t\t\t}\n\t\t\t\t\t}}\n\t\t\t\t</TabPanel>\n\t\t\t</BaseControl>\n\t\t</PanelBody>\n\t);\n}\n\nexport default AttachmentsList;\n","/* eslint-disable max-len */\n// A panel that uses filters to allow adding additional panels.\n// https://github.com/WordPress/gutenberg/tree/d5915916abc45e6682f4bdb70888aa41e98aa395/packages/components/src/higher-order/with-filters\n\n// A panel that displays all the attachments for this post, and also provides a dropzone for bulk uploading new attachments.\n// React query for data management.\n\n// @TODO\n// - Searchable list, order by date or filename\n// - Edit button for each image that will let you edit alt and title\n// - Secondary stage before isnertion, click on image, it will show a modal asking which size, you select it and voila.\n\n/**\n * WordPress Dependencies\n */\nimport { Fragment } from '@wordpress/element';\nimport { withFilters } from '@wordpress/components';\nimport { PluginSidebar, PluginPrePublishPanel } from '@wordpress/edit-post';\n\n/**\n * Internal Dependencies\n */\nimport './style.scss';\nimport { ProvideAttachments } from './context';\nimport AttachmentsList from './attachments-list';\n\nconst HOOK_NAME = 'prc-platform/attachments-panel';\n// With this hook other plugins can add their own panels to the attachments panel. For example, Chart Builder could potentially show it's chart exports. The entire idea of this plugin is to provide a central universe of all media assets for a post/page.\n\nconst AttachmentsPanel = withFilters(HOOK_NAME)(() => (\n\t// const { flashPrePublishWarning } = useAttachments();\n\t<Fragment>\n\t\t<PluginSidebar\n\t\t\tname=\"prc-attachments-panel\"\n\t\t\ttitle=\"Attachments\"\n\t\t\ticon=\"admin-media\"\n\t\t>\n\t\t\t<ProvideAttachments>\n\t\t\t\t<AttachmentsList />\n\t\t\t</ProvideAttachments>\n\t\t\t{\n\t\t\t\t// Filter Should Hook Here\n\t\t\t}\n\t\t</PluginSidebar>\n\t\t{/* {true === flashPrePublishWarning && (\n\t\t\t\t<PluginPrePublishPanel\n\t\t\t\t\tname=\"prc-media-assets-panel-warning\"\n\t\t\t\t\ttitle=\"Media Assets\"\n\t\t\t\t\ticon=\"admin-media\"\n\t\t\t\t\tclassName=\"prc-media-assets-panel\"\n\t\t\t\t\tinitialOpen\n\t\t\t\t>\n\t\t\t\t\t<p>\n\t\t\t\t\t\t{__(\n\t\t\t\t\t\t\t'You have un-used images. Please keep the media library tidy by removing any images you no longer need.',\n\t\t\t\t\t\t\t'prc-block-plugins',\n\t\t\t\t\t\t)}\n\t\t\t\t\t</p>\n\t\t\t\t</PluginPrePublishPanel>\n\t\t\t)} */}\n\t</Fragment>\n));\n\nexport default AttachmentsPanel;\n","/* eslint-disable max-lines-per-function */\n/* eslint-disable camelcase */\n/**\n * External Dependencies\n */\nimport { useDebounce } from '@prc/hooks';\n\n/**\n * WordPress dependencies\n */\nimport {\n\tuseState,\n\tuseContext,\n\tcreateContext,\n\tuseEffect,\n\tuseMemo,\n} from '@wordpress/element';\nimport apiFetch from '@wordpress/api-fetch';\nimport { store as editorStore } from '@wordpress/editor';\nimport { store as blockEditorStore } from '@wordpress/block-editor';\nimport { createBlock } from '@wordpress/blocks';\nimport { useSelect, useDispatch } from '@wordpress/data';\nimport { useEntityProp } from '@wordpress/core-data';\nimport { uploadMedia } from '@wordpress/media-utils';\n\nconst attachmentsContext = createContext();\n\n// eslint-disable-next-line no-undef\nconst { media } = window.wp;\n\nfunction useProvideAttachments() {\n\tconst {\n\t\tpostId,\n\t\tpostType,\n\t\timageBlocks = [],\n\t\tcoverBlocks = [],\n\t\tchartBlocks = [],\n\t\tvideoBlocks = [],\n\t\tgetBlockInsertionPoint,\n\t} = useSelect(\n\t\t(select) => ({\n\t\t\tpostType: select(editorStore).getCurrentPostType(),\n\t\t\tpostId: select(editorStore).getCurrentPostId(),\n\t\t\timageBlocks: select(blockEditorStore)\n\t\t\t\t.getBlocks()\n\t\t\t\t.filter((block) => 'core/image' === block.name),\n\t\t\tcoverBlocks: select(blockEditorStore)\n\t\t\t\t.getBlocks()\n\t\t\t\t.filter(\n\t\t\t\t\t(block) =>\n\t\t\t\t\t\t'core/cover' === block.name &&\n\t\t\t\t\t\t'image' === block.attributes.backgroundType\n\t\t\t\t),\n\t\t\tgetBlockInsertionPoint:\n\t\t\t\tselect(blockEditorStore).getBlockInsertionPoint,\n\t\t}),\n\t\t[]\n\t);\n\tconst { insertBlock } = useDispatch(blockEditorStore);\n\n\tconst [selected, setSelected] = useState(null);\n\tconst [attachments, setAttachments] = useState([]);\n\tconst [searchTerm, setSearchTerm] = useState('');\n\tconst debouncedSearchTerm = useDebounce(searchTerm, 500);\n\tconst [processing, toggleProcessing] = useState(false);\n\tconst [loading, toggleLoading] = useState(true);\n\n\tconst [meta, setMeta] = useEntityProp('postType', postType, 'meta');\n\n\tconst updateAttachments = () => {\n\t\tif ('number' === typeof postId && false === processing) {\n\t\t\ttoggleProcessing(true);\n\t\t\tapiFetch({\n\t\t\t\tpath: `/prc-api/v3/attachments-panel/?postId=${postId}`,\n\t\t\t}).then((data) => {\n\t\t\t\tconsole.log(\n\t\t\t\t\t'Objects found in attachments rest request...',\n\t\t\t\t\tdata\n\t\t\t\t);\n\t\t\t\tsetAttachments([...data]);\n\t\t\t\ttoggleProcessing(false);\n\t\t\t});\n\t\t}\n\t};\n\n\tconst onDropImage = (filesList) => {\n\t\tconsole.log('onDropImage', filesList, postId);\n\t\t// We need to ensure that the parent is set before or after uploading...\n\t\tuploadMedia({\n\t\t\tallowedTypes: ['image'],\n\t\t\tfilesList,\n\t\t\tadditionalData: {\n\t\t\t\tpost: postId,\n\t\t\t},\n\t\t\tonFileChange(a) {\n\t\t\t\tconsole.log('onFileChange', a);\n\t\t\t\tupdateAttachments();\n\t\t\t},\n\t\t\tonError(message) {\n\t\t\t\tconsole.error(message);\n\t\t\t},\n\t\t\twpAllowedMimeTypes: {\n\t\t\t\tpng: 'image/png',\n\t\t\t\t'jpg|jpeg|jpe': 'image/jpeg',\n\t\t\t\twebp: 'image/webp',\n\t\t\t},\n\t\t});\n\t};\n\n\tconst handleImageInsertion = (id, url, size) => {\n\t\tconst insertionIndex = getBlockInsertionPoint().index;\n\t\tconst newImageBlock = createBlock('core/image', {\n\t\t\tid,\n\t\t\turl,\n\t\t\tsizeSlug: size,\n\t\t});\n\t\tinsertBlock(newImageBlock, insertionIndex);\n\t};\n\n\tconst mediaEditor = useMemo(() => {\n\t\treturn media({\n\t\t\ttitle: 'Edit Attachments',\n\t\t\tbutton: {\n\t\t\t\ttext: 'Update',\n\t\t\t},\n\t\t\tlibrary: {\n\t\t\t\tuploadedTo: postId,\n\t\t\t\tselected: [selected],\n\t\t\t},\n\t\t});\n\t}, [postId, selected]);\n\n\t// When the media library closes, refresh the attachments.\n\tmediaEditor.on('close', () => {\n\t\tupdateAttachments();\n\t});\n\n\tconst openMediaLibrary = (attachmentId = null) => {\n\t\t// set the selected to...\n\t\tsetSelected(attachmentId);\n\t\tmediaEditor.open();\n\t\tmediaEditor.on('close', () => {\n\t\t\tsetSelected(null);\n\t\t});\n\t};\n\n\tconst insertedImageIds = useMemo(() => {\n\t\tconsole.log(\n\t\t\t'mergeBlocksAndReturnIdClientPairs for insertedImageIds...',\n\t\t\tcoverBlocks,\n\t\t\timageBlocks\n\t\t);\n\t\tconst imageBlockIds = {};\n\t\tif (0 !== imageBlocks.length) {\n\t\t\timageBlocks.forEach((block) => {\n\t\t\t\timageBlockIds[block.attributes.id] = {\n\t\t\t\t\tclientId: block.clientId,\n\t\t\t\t};\n\t\t\t});\n\t\t}\n\t\tconst coverBlockIds = {};\n\t\tif (0 !== coverBlocks.length) {\n\t\t\tcoverBlocks.forEach((block) => {\n\t\t\t\tcoverBlockIds[block.attributes.id] = {\n\t\t\t\t\tclientId: block.clientId,\n\t\t\t\t};\n\t\t\t});\n\t\t}\n\n\t\t// merge the imageBlockIds and coverBlockIds objects into one object\n\t\treturn { ...imageBlockIds, ...coverBlockIds };\n\t}, [coverBlocks, imageBlocks]);\n\n\t/**\n\t * Checks for unused images attached to the post but not present in the editor.\n\t * This is just to let the user know that they have unused images.\n\t */\n\tconst flashPrePublishWarning = useMemo(() => {\n\t\tconsole.log('insertedImageIds has changed');\n\t\tif (0 < attachments.length) {\n\t\t\tconst aIds = attachments.map((d) => d.id);\n\t\t\tconst iIds = Object.keys(insertedImageIds);\n\n\t\t\t// If there are any values from aIds that are not in iIds, then we have an unused image so return true.\n\t\t\tif (0 < aIds.filter((a) => !iIds.includes(a.toString())).length) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn false;\n\t\t}\n\t\treturn false;\n\t}, [attachments, insertedImageIds]);\n\n\t/**\n\t * When imageids change or on init update attachments.\n\t */\n\tuseEffect(() => {\n\t\tconsole.log(\"attachments' effect...\");\n\t\tupdateAttachments();\n\t}, [postId]);\n\n\t/**\n\t * Handle toggling the loading state.\n\t */\n\tuseEffect(() => {\n\t\tif (0 < attachments.length) {\n\t\t\ttoggleLoading(false);\n\t\t} else {\n\t\t\ttoggleLoading(true);\n\t\t}\n\t}, [attachments]);\n\n\treturn {\n\t\tpostId,\n\t\tpostType,\n\t\tinsertedImageIds,\n\t\tattachments,\n\t\tloading,\n\t\tflashPrePublishWarning,\n\t\tsearchTerm,\n\t\tdebouncedSearchTerm,\n\t\tsetSearchTerm,\n\t\tonDropImage,\n\t\thandleImageInsertion,\n\t\tmediaEditor,\n\t\topenMediaLibrary,\n\t};\n}\n\n// Hook for child components to get the context object ...\n// ... and re-render when it changes.\nconst useAttachments = () => useContext(attachmentsContext);\n\n// Available to any child component that calls useAttachments()\nfunction ProvideAttachments({ children }) {\n\tconst provider = useProvideAttachments();\n\treturn (\n\t\t<attachmentsContext.Provider value={provider}>\n\t\t\t{children}\n\t\t</attachmentsContext.Provider>\n\t);\n}\n\nexport { ProvideAttachments, useAttachments };\nexport default ProvideAttachments;\n","/**\n * WordPress Dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { DropZone } from '@wordpress/components';\nimport { MediaUploadCheck } from '@wordpress/block-editor';\n\n/**\n * Internal Dependencies\n */\nimport { useAttachments } from './context';\n\nfunction DragAndDropZone() {\n\tconst { onDropImage } = useAttachments();\n\treturn (\n\t\t<MediaUploadCheck\n\t\t\tfallback={__(\n\t\t\t\t`Drag and drop your files here and they will be attached to this post.`\n\t\t\t)}\n\t\t>\n\t\t\t<DropZone\n\t\t\t\tonFilesDrop={(a) => onDropImage(a)}\n\t\t\t\tonHTMLDrop={(b) => console.log('onHTMLDrop...', b)}\n\t\t\t\tonDrop={(c) => console.log('onDrop...', c)}\n\t\t\t/>\n\t\t</MediaUploadCheck>\n\t);\n}\n\nexport default DragAndDropZone;\n","/**\n * External Dependencies\n */\nimport classNames from 'classnames';\nimport { useKeyPress } from '@prc/hooks';\n\n/**\n * WordPress Dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { store as blockEditorStore } from '@wordpress/block-editor';\nimport { useState, useEffect, useRef } from '@wordpress/element';\nimport { useDispatch } from '@wordpress/data';\nimport {\n\tBaseControl,\n\tTooltip,\n\tSelectControl,\n\tModal,\n} from '@wordpress/components';\n\n/**\n * Internal Dependencies\n */\nimport { useAttachments } from './context';\n\nfunction File({ id, url, title, type }) {\n\tconst { openMediaLibrary } = useAttachments();\n\treturn (\n\t\t<BaseControl>\n\t\t\t<button\n\t\t\t\ttype=\"button\"\n\t\t\t\tkey={id}\n\t\t\t\tclassName={classNames('prc-attachments-list__file')}\n\t\t\t\tonClick={() => {\n\t\t\t\t\topenMediaLibrary(id);\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<div>{title}</div>\n\t\t\t</button>\n\t\t</BaseControl>\n\t);\n}\n\nexport default File;\n","/**\n * External Dependencies\n */\nimport classNames from 'classnames';\nimport { useKeyPress } from '@prc/hooks';\n\n/**\n * WordPress Dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { store as blockEditorStore } from '@wordpress/block-editor';\nimport { useState, useEffect, useRef } from '@wordpress/element';\nimport { useDispatch } from '@wordpress/data';\nimport {\n\tBaseControl,\n\tTooltip,\n\tSelectControl,\n\tModal,\n} from '@wordpress/components';\n\n/**\n * Internal Dependencies\n */\nimport { useAttachments } from './context';\n\nconst IMAGE_SIZES = [\n\t{ label: '200 Wide', value: '200-wide' },\n\t{ label: '200 Wide', value: '200-wide' },\n\t{ label: '260 Wide', value: '260-wide' },\n\t{ label: '310 Wide', value: '310-wide' },\n\t{ label: '420 Wide', value: '420-wide' },\n\t{ label: '640 Wide', value: '640-wide' },\n\t{ label: '740 Wide', value: '740-wide' },\n\t{ label: '1400 Wide', value: '1400-wide' },\n];\n\nfunction Image({ id, url, title, type }) {\n\tconst { insertedImageIds, handleImageInsertion } = useAttachments();\n\tconst { selectBlock } = useDispatch(blockEditorStore);\n\n\tconst isActive = Object.keys(insertedImageIds).includes(id.toString());\n\tconst [modalActive, toggleModal] = useState(false);\n\tconst leftShiftKeyPressed = useKeyPress('Shift');\n\n\t// const ref = useRef(null);\n\n\t// const handleRightClick = (ev) => {\n\t// \tev.preventDefault();\n\t// \talert('success!');\n\t// \t// Open image editor...\n\t// \treturn false;\n\t// };\n\n\t// useEffect(() => {\n\t// \tconst img = ref.current;\n\t// \t// subscribe event\n\t// \timg.addEventListener('contextmenu', handleRightClick, false);\n\t// \treturn () => {\n\t// \t\t// unsubscribe event\n\t// \t\timg.removeEventListener('contextmenu', handleRightClick);\n\t// \t};\n\t// }, []);\n\n\treturn (\n\t\t<BaseControl>\n\t\t\t<button\n\t\t\t\ttype=\"button\"\n\t\t\t\tkey={id}\n\t\t\t\tclassName={classNames('prc-attachments-list__image', {\n\t\t\t\t\t'prc-attachments-list__image--in-use': isActive,\n\t\t\t\t})}\n\t\t\t\tonClick={() => {\n\t\t\t\t\tif (isActive) {\n\t\t\t\t\t\tselectBlock(insertedImageIds[id].clientId);\n\t\t\t\t\t} else if (leftShiftKeyPressed) {\n\t\t\t\t\t\thandleImageInsertion(id, url, '640-wide');\n\t\t\t\t\t} else {\n\t\t\t\t\t\ttoggleModal(true);\n\t\t\t\t\t}\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<img src={url} alt=\"A attachment in the editor\" />\n\t\t\t\t<div>{title}</div>\n\t\t\t</button>\n\t\t\t{modalActive && (\n\t\t\t\t<Modal\n\t\t\t\t\ttitle={__('Insert Image Into Editor', 'prc-block-plugins')}\n\t\t\t\t\tonRequestClose={() => toggleModal(false)}\n\t\t\t\t>\n\t\t\t\t\t<SelectControl\n\t\t\t\t\t\tlabel=\"Select Image Size\"\n\t\t\t\t\t\tvalue={null}\n\t\t\t\t\t\toptions={IMAGE_SIZES}\n\t\t\t\t\t\tonChange={(newSize) =>\n\t\t\t\t\t\t\thandleImageInsertion(id, url, newSize)\n\t\t\t\t\t\t}\n\t\t\t\t\t/>\n\t\t\t\t</Modal>\n\t\t\t)}\n\t\t</BaseControl>\n\t);\n}\n\nexport default Image;\n","/**\n * WordPress Dependencies\n */\nimport { registerPlugin } from '@wordpress/plugins';\n\n/**\n * Internal Dependencies\n */\nimport './style.scss';\nimport AttachmentsPanel from './attachments-panel';\n\n/**\n * A panel that displays all the attachments for this post and also provides a dropzone for bulk uploading new attachments.\n * For filtering info, see: https://github.com/WordPress/gutenberg/tree/d5915916abc45e6682f4bdb70888aa41e98aa395/packages/components/src/higher-order/with-filters\n */\nregisterPlugin('prc-platform-attachment-panel', {\n\trender: () => <AttachmentsPanel />,\n\ticon: 'admin-media',\n});\n","// extracted by mini-css-extract-plugin\nexport {};","module.exports = window[\"React\"];","module.exports = window[\"classnames\"];","module.exports = window[\"prcHooks\"];","module.exports = window[\"wp\"][\"apiFetch\"];","module.exports = window[\"wp\"][\"blockEditor\"];","module.exports = window[\"wp\"][\"blocks\"];","module.exports = window[\"wp\"][\"components\"];","module.exports = window[\"wp\"][\"coreData\"];","module.exports = window[\"wp\"][\"data\"];","module.exports = window[\"wp\"][\"editPost\"];","module.exports = window[\"wp\"][\"editor\"];","module.exports = window[\"wp\"][\"element\"];","module.exports = window[\"wp\"][\"i18n\"];","module.exports = window[\"wp\"][\"mediaUtils\"];","module.exports = window[\"wp\"][\"plugins\"];","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","var deferred = [];\n__webpack_require__.O = (result, chunkIds, fn, priority) => {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar [chunkIds, fn, priority] = deferred[i];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every((key) => (__webpack_require__.O[key](chunkIds[j])))) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t\"index\": 0,\n\t\"./style-index\": 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = (chunkId) => (installedChunks[chunkId] === 0);\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = (parentChunkLoadingFunction, data) => {\n\tvar [chunkIds, moreModules, runtime] = data;\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some((id) => (installedChunks[id] !== 0))) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = globalThis[\"webpackChunk_pewresearch_prc_platform_attachments_panel\"] = globalThis[\"webpackChunk_pewresearch_prc_platform_attachments_panel\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [\"./style-index\"], () => (__webpack_require__(\"./src/index.js\")))\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n",""],"names":["__","Button","BaseControl","PanelBody","Spinner","TextControl","CardDivider","TabPanel","Fragment","useAttachments","DragAndDropZone","Image","File","Images","attachments","loading","debouncedSearchTerm","images","filter","attachment","type","startsWith","sortedAttachments","sort","a","b","title","toLowerCase","filteredAttachments","includes","createElement","map","image","Files","files","file","AttachmentsList","searchTerm","setSearchTerm","mediaEditor","initialOpen","className","id","label","length","variant","onClick","open","value","onChange","activeClass","onSelect","tabName","console","log","tabs","name","tab","withFilters","PluginSidebar","PluginPrePublishPanel","ProvideAttachments","HOOK_NAME","AttachmentsPanel","icon","useDebounce","useState","useContext","createContext","useEffect","useMemo","apiFetch","store","editorStore","blockEditorStore","createBlock","useSelect","useDispatch","useEntityProp","uploadMedia","attachmentsContext","media","window","wp","useProvideAttachments","postId","postType","imageBlocks","coverBlocks","chartBlocks","videoBlocks","getBlockInsertionPoint","select","getCurrentPostType","getCurrentPostId","getBlocks","block","attributes","backgroundType","insertBlock","selected","setSelected","setAttachments","processing","toggleProcessing","toggleLoading","meta","setMeta","updateAttachments","path","then","data","onDropImage","filesList","allowedTypes","additionalData","post","onFileChange","onError","message","error","wpAllowedMimeTypes","png","webp","handleImageInsertion","url","size","insertionIndex","index","newImageBlock","sizeSlug","button","text","library","uploadedTo","on","openMediaLibrary","attachmentId","insertedImageIds","imageBlockIds","forEach","clientId","coverBlockIds","flashPrePublishWarning","aIds","d","iIds","Object","keys","toString","children","provider","Provider","DropZone","MediaUploadCheck","fallback","onFilesDrop","onHTMLDrop","onDrop","c","classNames","useKeyPress","useRef","Tooltip","SelectControl","Modal","key","IMAGE_SIZES","selectBlock","isActive","modalActive","toggleModal","leftShiftKeyPressed","src","alt","onRequestClose","options","newSize","registerPlugin","render"],"sourceRoot":""}