{"version":3,"file":"index.js","mappings":"uBAAIA,E,iBCAJ,MAAM,EAA+BC,OAAc,MCA7C,EAA+BA,OAAW,GAAW,QCArD,EAA+BA,OAAW,GAAW,QCArD,EAA+BA,OAAW,GAAc,WCAxD,EAA+BA,OAAW,GAAY,SCAtD,EAA+BA,OAAiB,SCAhD,EAA+BA,OAAW,GAAY,S,aCA5D,MAAM,EAA+BA,OAAW,GAAU,OCApD,EAA+BA,OAAW,GAAe,YCAzD,EAA+BA,OAAW,GAAU,OCApD,EAA+BA,OAAW,GAAQ,KCAlD,EAA+BA,OAAW,GAAY,SCAtD,EAA+BA,OAAW,GAAc,WCyBxDC,GAAqBC,EAAAA,EAAAA,kBAGrB,MAAEC,GAAUH,OAAOI,GA2LnBC,EAAiBA,KAAMC,EAAAA,EAAAA,YAAWL,GAGxC,SAASM,GAAmB,SAAEC,IAC7B,MAAMC,EA7LP,WACC,MAAM,OACLC,EAAM,SACNC,EAAQ,YACRC,EAAc,GAAE,YAChBC,EAAc,GAAE,YAChBC,EAAc,GAAE,YAChBC,EAAc,GAAE,uBAChBC,IACGC,EAAAA,EAAAA,YACFC,IAAM,CACNP,SAAUO,EAAOC,EAAAA,OAAaC,qBAC9BV,OAAQQ,EAAOC,EAAAA,OAAaE,mBAC5BT,YAAaM,EAAOI,EAAAA,OAClBC,YACAC,QAAQC,GAAU,eAAiBA,EAAMC,OAC3Cb,YAAaK,EAAOI,EAAAA,OAClBC,YACAC,QACCC,GACA,eAAiBA,EAAMC,MACvB,UAAYD,EAAME,WAAWC,iBAEhCZ,uBACCE,EAAOI,EAAAA,OAAkBN,0BAE3B,KAEK,YAAEa,IAAgBC,EAAAA,EAAAA,aAAYR,EAAAA,QAE7BS,EAAaC,IAAkBC,EAAAA,EAAAA,UAAS,KACxCC,EAAYC,IAAiBF,EAAAA,EAAAA,UAAS,IACvCG,GAAsBC,EAAAA,EAAAA,aAAYH,EAAY,MAC7CI,EAAYC,IAAoBN,EAAAA,EAAAA,WAAS,IACzCO,EAASC,IAAiBR,EAAAA,EAAAA,WAAS,IAEnCS,EAAMC,IAAWC,EAAAA,EAAAA,eAAc,WAAYjC,EAAU,QAEtDkC,EAAoBA,KACrB,iBAAoBnC,IAAU,IAAU4B,IAC3CC,GAAiB,GACjBO,IAAS,CACRC,KAAO,yCAAwCrC,MAC7CsC,MAAMC,IACRC,QAAQC,IACP,+CACAF,GAEDjB,EAAe,IAAIiB,IACnBV,GAAiB,EAAM,IAEzB,EAqCKa,EAAcjD,EAAM,CACzBkD,MAAO,yBACPC,OAAQ,CACPC,KAAM,UAEPC,QAAS,CACRC,WAAY/C,KAId0C,EAAYM,GAAG,SAAS,KACvBb,GAAmB,IAGpB,MAAMc,GAAmBC,EAAAA,EAAAA,UAAQ,KAChCV,QAAQC,IACP,4DACAtC,EACAD,GAED,MAAMiD,EAAgB,CAAC,EACnB,IAAMjD,EAAYkD,QACrBlD,EAAYmD,SAAStC,IACpBoC,EAAcpC,EAAME,WAAWqC,IAAM,CACpCC,SAAUxC,EAAMwC,SAChB,IAGH,MAAMC,EAAgB,CAAC,EAUvB,OATI,IAAMrD,EAAYiD,QACrBjD,EAAYkD,SAAStC,IACpByC,EAAczC,EAAME,WAAWqC,IAAM,CACpCC,SAAUxC,EAAMwC,SAChB,IAKI,IAAKJ,KAAkBK,EAAe,GAC3C,CAACrD,EAAaD,IAMXuD,GAAyBP,EAAAA,EAAAA,UAAQ,KAEtC,GADAV,QAAQC,IAAI,gCACR,EAAIpB,EAAY+B,OAAQ,CAC3B,MAAMM,EAAOrC,EAAYsC,KAAKC,GAAMA,EAAEN,KAChCO,EAAOC,OAAOC,KAAKd,GAGzB,OAAI,EAAIS,EAAK5C,QAAQkD,IAAOH,EAAKI,SAASD,EAAEE,cAAad,MAI1D,CACA,OAAO,CAAK,GACV,CAAC/B,EAAa4B,IAqBjB,OAhBAkB,EAAAA,EAAAA,YAAU,KACT3B,QAAQC,IAAI,0BACZN,GAAmB,GACjB,CAACnC,KAKJmE,EAAAA,EAAAA,YAAU,KACL,EAAI9C,EAAY+B,OACnBrB,GAAc,GAEdA,GAAc,EACf,GACE,CAACV,IAEG,CACNrB,SACAC,WACAgD,mBACA5B,cACAS,UACA2B,yBACAjC,aACAE,sBACAD,gBACA2C,YA3HoBC,IACpB7B,QAAQC,IAAI,cAAe4B,EAAWrE,IAEtCsE,EAAAA,EAAAA,aAAY,CACXC,aAAc,CAAC,SACfF,YACAG,eAAgB,CACfC,KAAMzE,GAEP0E,YAAAA,CAAaV,GACZxB,QAAQC,IAAI,eAAgBuB,GAC5B7B,GACD,EACAwC,OAAAA,CAAQC,GACPpC,QAAQqC,MAAMD,EACf,EACAE,mBAAoB,CACnBC,IAAK,YACL,eAAgB,aAChBC,KAAM,eAEN,EAuGFC,qBApG4BA,CAAC3B,EAAI4B,EAAKC,KACtC,MAAMC,EAAiB9E,IAAyB+E,MAC1CC,GAAgBC,EAAAA,EAAAA,aAAY,aAAc,CAC/CjC,KACA4B,MACAM,SAAUL,IAEXhE,EAAYmE,EAAeF,EAAe,EA8F1C1C,cAEF,CAQkB+C,GACjB,OACCC,EAAAA,EAAAA,eAACnG,EAAmBoG,SAAQ,CAACC,MAAO7F,GAClCD,EAGJ,CAGA,MCpOM,EAA+BR,OAAW,GAAQ,KCyBxD,EAbA,WACC,MAAM,YAAE8E,GAAgBzE,IACxB,OACC+F,EAAAA,EAAAA,eAACG,EAAAA,iBAAgB,CAACC,UAAUC,EAAAA,EAAAA,IAAI,0CAC/BL,EAAAA,EAAAA,eAACM,EAAAA,SAAQ,CACRC,YAAcjC,GAAMI,EAAYJ,GAChCkC,WAAaC,GAAM3D,QAAQC,IAAI,gBAAiB0D,GAChDC,OAASC,GAAM7D,QAAQC,IAAI,YAAa4D,KAI5C,ECvBM,EAA+B/G,OAAmB,W,aCyBxD,MAAMgH,EAAc,CACnB,CAAEC,MAAO,WAAYX,MAAO,YAC5B,CAAEW,MAAO,WAAYX,MAAO,YAC5B,CAAEW,MAAO,WAAYX,MAAO,YAC5B,CAAEW,MAAO,WAAYX,MAAO,YAC5B,CAAEW,MAAO,WAAYX,MAAO,YAC5B,CAAEW,MAAO,WAAYX,MAAO,YAC5B,CAAEW,MAAO,WAAYX,MAAO,YAC5B,CAAEW,MAAO,YAAaX,MAAO,cAsE9B,EAnEA,UAAe,GAAEtC,EAAE,IAAE4B,EAAG,MAAEvC,EAAK,KAAE6D,IAChC,MAAM,iBAAEvD,EAAgB,qBAAEgC,GAAyBtF,KAC7C,YAAE8G,IAAgBrF,EAAAA,EAAAA,aAAYR,EAAAA,OAE9B8F,EAAW5C,OAAOC,KAAKd,GAAkBgB,SAASX,EAAGY,aACpDyC,EAAaC,IAAerF,EAAAA,EAAAA,WAAS,GACtCsF,GAAsBC,EAAAA,EAAAA,aAAY,SAqBxC,OACCpB,EAAAA,EAAAA,eAACqB,EAAAA,YAAW,MACXrB,EAAAA,EAAAA,eAAA,UACCc,KAAK,SACLQ,IAAK1D,EACL2D,UAAWC,IAAW,8BAA+B,CACpD,sCAAuCR,IAExCS,QAASA,KACJT,EACHD,EAAYxD,EAAiBK,GAAIC,UACvBsD,EACV5B,EAAqB3B,EAAI4B,EAAK,YAE9B0B,GAAY,EACb,IAGDlB,EAAAA,EAAAA,eAAA,OAAK0B,IAAKlC,EAAKmC,IAAI,gCACnB3B,EAAAA,EAAAA,eAAA,WAAM/C,IAENgE,IACAjB,EAAAA,EAAAA,eAAC4B,EAAAA,MAAK,CACL3E,OAAOoD,EAAAA,EAAAA,IAAG,2BAA4B,qBACtCwB,eAAgBA,IAAMX,GAAY,KAElClB,EAAAA,EAAAA,eAAC8B,EAAAA,cAAa,CACbjB,MAAM,oBACNX,MAAO,KACP6B,QAASnB,EACToB,SAAWC,GACV1C,EAAqB3B,EAAI4B,EAAKyC,MAOrC,ECVA,EAtEA,WACC,MAAM,YACLtG,EAAW,QACXS,EAAO,WACPN,EAAU,oBACVE,EAAmB,cACnBD,EAAa,YACbiB,GACG/C,IAaEiI,EAVoBvG,EAAYwG,MAAK,CAAC7D,EAAGmC,IAC1CnC,EAAErB,MAAMmF,cAAgB3B,EAAExD,MAAMmF,eAC3B,EAEL9D,EAAErB,MAAMmF,cAAgB3B,EAAExD,MAAMmF,cAC5B,EAED,IAGsChH,QAC5CiH,GACA,KAAOrG,GACPqG,EAAWpF,MACTmF,cACA7D,SAASvC,EAAoBoG,iBAGjC,OACCpC,EAAAA,EAAAA,eAACsC,EAAAA,UAAS,CACTrF,OAAOoD,EAAAA,EAAAA,IAAG,mBACVkC,aAAW,EACXhB,UAAU,yBAEVvB,EAAAA,EAAAA,eAACqB,EAAAA,YAAW,CACXzD,GAAG,iBACHiD,OAAOR,EAAAA,EAAAA,IACN,4KACA,sBAGA,EAAI1E,EAAY+B,SAChBsC,EAAAA,EAAAA,eAACwC,EAAAA,SAAQ,MACRxC,EAAAA,EAAAA,eAACyC,EAAAA,OAAM,CACNC,QAAQ,YACRjB,QAASA,IAAMzE,EAAY2F,QAC3B,qBAGD3C,EAAAA,EAAAA,eAAC4C,EAAAA,YAAW,QAGd5C,EAAAA,EAAAA,eAAC6C,EAAAA,YAAW,CACXhC,OAAOR,EAAAA,EAAAA,IAAG,UACVH,MAAOpE,EACPkG,SAAW9B,GAAUnE,EAAcmE,MAEpCF,EAAAA,EAAAA,eAAC4C,EAAAA,YAAW,OACZ5C,EAAAA,EAAAA,eAAC8C,EAAe,MACf1G,GACA4D,EAAAA,EAAAA,eAAC+C,EAAAA,QAAO,MAERb,EAAoBjE,KAAK+E,IAAUhD,EAAAA,EAAAA,eAACiD,EAAK,IAAKD,OAKnD,EC1BA,GAlCyBE,EAAAA,EAAAA,aAHP,iCAGOA,EAAuB,KAE/ClD,EAAAA,EAAAA,eAACwC,EAAAA,SAAQ,MACRxC,EAAAA,EAAAA,eAACmD,EAAAA,cAAa,CACb7H,KAAK,wBACL2B,MAAM,cACNmG,KAAK,gBAELpD,EAAAA,EAAAA,eAAC7F,EAAkB,MAClB6F,EAAAA,EAAAA,eAACqD,EAAe,YCvBpBC,EAAAA,EAAAA,gBAAe,gCAAiC,CAC/CC,OAAQA,KAAMvD,EAAAA,EAAAA,eAACwD,EAAgB,MAC/BJ,KAAM,e,GChBHK,EAA2B,CAAC,EAGhC,SAASC,EAAoBC,GAE5B,IAAIC,EAAeH,EAAyBE,GAC5C,QAAqBE,IAAjBD,EACH,OAAOA,EAAaE,QAGrB,IAAIC,EAASN,EAAyBE,GAAY,CAGjDG,QAAS,CAAC,GAOX,OAHAE,EAAoBL,GAAUI,EAAQA,EAAOD,QAASJ,GAG/CK,EAAOD,OACf,CAGAJ,EAAoBO,EAAID,EtBzBpBrK,EAAW,GACf+J,EAAoBQ,EAAI,CAACC,EAAQC,EAAUC,EAAIC,KAC9C,IAAGF,EAAH,CAMA,IAAIG,EAAeC,IACnB,IAASC,EAAI,EAAGA,EAAI9K,EAAS+D,OAAQ+G,IAAK,CAGzC,IAFA,IAAKL,EAAUC,EAAIC,GAAY3K,EAAS8K,GACpCC,GAAY,EACPC,EAAI,EAAGA,EAAIP,EAAS1G,OAAQiH,MACpB,EAAXL,GAAsBC,GAAgBD,IAAalG,OAAOC,KAAKqF,EAAoBQ,GAAGU,OAAOtD,GAASoC,EAAoBQ,EAAE5C,GAAK8C,EAASO,MAC9IP,EAASS,OAAOF,IAAK,IAErBD,GAAY,EACTJ,EAAWC,IAAcA,EAAeD,IAG7C,GAAGI,EAAW,CACb/K,EAASkL,OAAOJ,IAAK,GACrB,IAAIK,EAAIT,SACER,IAANiB,IAAiBX,EAASW,EAC/B,CACD,CACA,OAAOX,CAnBP,CAJCG,EAAWA,GAAY,EACvB,IAAI,IAAIG,EAAI9K,EAAS+D,OAAQ+G,EAAI,GAAK9K,EAAS8K,EAAI,GAAG,GAAKH,EAAUG,IAAK9K,EAAS8K,GAAK9K,EAAS8K,EAAI,GACrG9K,EAAS8K,GAAK,CAACL,EAAUC,EAAIC,EAqBjB,EuBzBdZ,EAAoBqB,EAAKhB,IACxB,IAAIiB,EAASjB,GAAUA,EAAOkB,WAC7B,IAAOlB,EAAiB,QACxB,IAAM,EAEP,OADAL,EAAoBxF,EAAE8G,EAAQ,CAAE1G,EAAG0G,IAC5BA,CAAM,ECLdtB,EAAoBxF,EAAI,CAAC4F,EAASoB,KACjC,IAAI,IAAI5D,KAAO4D,EACXxB,EAAoByB,EAAED,EAAY5D,KAASoC,EAAoByB,EAAErB,EAASxC,IAC5ElD,OAAOgH,eAAetB,EAASxC,EAAK,CAAE+D,YAAY,EAAMC,IAAKJ,EAAW5D,IAE1E,ECNDoC,EAAoByB,EAAI,CAACI,EAAKC,IAAUpH,OAAOqH,UAAUC,eAAeC,KAAKJ,EAAKC,G,MCKlF,IAAII,EAAkB,CACrB,GAAI,EACJ,IAAK,GAaNlC,EAAoBQ,EAAES,EAAKkB,GAA0C,IAA7BD,EAAgBC,GAGxD,IAAIC,EAAuB,CAACC,EAA4BlJ,KACvD,IAGI8G,EAAUkC,GAHTzB,EAAU4B,EAAaC,GAAWpJ,EAGhB4H,EAAI,EAC3B,GAAGL,EAAS8B,MAAMtI,GAAgC,IAAxBgI,EAAgBhI,KAAa,CACtD,IAAI+F,KAAYqC,EACZtC,EAAoByB,EAAEa,EAAarC,KACrCD,EAAoBO,EAAEN,GAAYqC,EAAYrC,IAGhD,GAAGsC,EAAS,IAAI9B,EAAS8B,EAAQvC,EAClC,CAEA,IADGqC,GAA4BA,EAA2BlJ,GACrD4H,EAAIL,EAAS1G,OAAQ+G,IACzBoB,EAAUzB,EAASK,GAChBf,EAAoByB,EAAES,EAAiBC,IAAYD,EAAgBC,IACrED,EAAgBC,GAAS,KAE1BD,EAAgBC,GAAW,EAE5B,OAAOnC,EAAoBQ,EAAEC,EAAO,EAGjCgC,EAAqBC,WAAoE,wDAAIA,WAAoE,yDAAK,GAC1KD,EAAmBxI,QAAQmI,EAAqBO,KAAK,KAAM,IAC3DF,EAAmBG,KAAOR,EAAqBO,KAAK,KAAMF,EAAmBG,KAAKD,KAAKF,G,KC9CvF,IAAII,EAAsB7C,EAAoBQ,OAAEL,EAAW,CAAC,MAAM,IAAOH,EAAoB,OAC7F6C,EAAsB7C,EAAoBQ,EAAEqC,E","sources":["webpack://@pewresearch/prc-platform-attachments-panel/webpack/runtime/chunk loaded","webpack://@pewresearch/prc-platform-attachments-panel/external window \"React\"","webpack://@pewresearch/prc-platform-attachments-panel/external window [\"wp\",\"plugins\"]","webpack://@pewresearch/prc-platform-attachments-panel/external window [\"wp\",\"element\"]","webpack://@pewresearch/prc-platform-attachments-panel/external window [\"wp\",\"components\"]","webpack://@pewresearch/prc-platform-attachments-panel/external window [\"wp\",\"editPost\"]","webpack://@pewresearch/prc-platform-attachments-panel/external window \"prcHooks\"","webpack://@pewresearch/prc-platform-attachments-panel/external window [\"wp\",\"apiFetch\"]","webpack://@pewresearch/prc-platform-attachments-panel/external window [\"wp\",\"editor\"]","webpack://@pewresearch/prc-platform-attachments-panel/external window [\"wp\",\"blockEditor\"]","webpack://@pewresearch/prc-platform-attachments-panel/external window [\"wp\",\"blocks\"]","webpack://@pewresearch/prc-platform-attachments-panel/external window [\"wp\",\"data\"]","webpack://@pewresearch/prc-platform-attachments-panel/external window [\"wp\",\"coreData\"]","webpack://@pewresearch/prc-platform-attachments-panel/external window [\"wp\",\"mediaUtils\"]","webpack://@pewresearch/prc-platform-attachments-panel/./src/context.js","webpack://@pewresearch/prc-platform-attachments-panel/external window [\"wp\",\"i18n\"]","webpack://@pewresearch/prc-platform-attachments-panel/./src/drag-and-drop-zone.jsx","webpack://@pewresearch/prc-platform-attachments-panel/external window \"classnames\"","webpack://@pewresearch/prc-platform-attachments-panel/./src/image.jsx","webpack://@pewresearch/prc-platform-attachments-panel/./src/attachments-list.jsx","webpack://@pewresearch/prc-platform-attachments-panel/./src/attachments-panel.jsx","webpack://@pewresearch/prc-platform-attachments-panel/./src/index.js","webpack://@pewresearch/prc-platform-attachments-panel/webpack/bootstrap","webpack://@pewresearch/prc-platform-attachments-panel/webpack/runtime/compat get default export","webpack://@pewresearch/prc-platform-attachments-panel/webpack/runtime/define property getters","webpack://@pewresearch/prc-platform-attachments-panel/webpack/runtime/hasOwnProperty shorthand","webpack://@pewresearch/prc-platform-attachments-panel/webpack/runtime/jsonp chunk loading","webpack://@pewresearch/prc-platform-attachments-panel/webpack/startup"],"sourcesContent":["var deferred = [];\n__webpack_require__.O = (result, chunkIds, fn, priority) => {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar [chunkIds, fn, priority] = deferred[i];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every((key) => (__webpack_require__.O[key](chunkIds[j])))) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"React\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"plugins\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"element\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"components\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"editPost\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"prcHooks\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"apiFetch\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"editor\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"blockEditor\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"blocks\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"data\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"coreData\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"mediaUtils\"];","/* eslint-disable max-lines-per-function */\n/* eslint-disable camelcase */\n/**\n * External Dependencies\n */\nimport { useDebounce } from '@prc/hooks';\n\n/**\n * WordPress dependencies\n */\nimport {\n\tuseState,\n\tuseContext,\n\tcreateContext,\n\tuseEffect,\n\tuseMemo,\n} from '@wordpress/element';\nimport apiFetch from '@wordpress/api-fetch';\nimport { store as editorStore } from '@wordpress/editor';\nimport { store as blockEditorStore } from '@wordpress/block-editor';\nimport { createBlock } from '@wordpress/blocks';\nimport { useSelect, useDispatch } from '@wordpress/data';\nimport { useEntityProp } from '@wordpress/core-data';\nimport { uploadMedia } from '@wordpress/media-utils';\n\nconst attachmentsContext = createContext();\n\n// eslint-disable-next-line no-undef\nconst { media } = window.wp;\n\nfunction useProvideAttachments() {\n\tconst {\n\t\tpostId,\n\t\tpostType,\n\t\timageBlocks = [],\n\t\tcoverBlocks = [],\n\t\tchartBlocks = [],\n\t\tvideoBlocks = [],\n\t\tgetBlockInsertionPoint,\n\t} = useSelect(\n\t\t(select) => ({\n\t\t\tpostType: select(editorStore).getCurrentPostType(),\n\t\t\tpostId: select(editorStore).getCurrentPostId(),\n\t\t\timageBlocks: select(blockEditorStore)\n\t\t\t\t.getBlocks()\n\t\t\t\t.filter((block) => 'core/image' === block.name),\n\t\t\tcoverBlocks: select(blockEditorStore)\n\t\t\t\t.getBlocks()\n\t\t\t\t.filter(\n\t\t\t\t\t(block) =>\n\t\t\t\t\t\t'core/cover' === block.name &&\n\t\t\t\t\t\t'image' === block.attributes.backgroundType\n\t\t\t\t),\n\t\t\tgetBlockInsertionPoint:\n\t\t\t\tselect(blockEditorStore).getBlockInsertionPoint,\n\t\t}),\n\t\t[]\n\t);\n\tconst { insertBlock } = useDispatch(blockEditorStore);\n\n\tconst [attachments, setAttachments] = useState([]);\n\tconst [searchTerm, setSearchTerm] = useState('');\n\tconst debouncedSearchTerm = useDebounce(searchTerm, 500);\n\tconst [processing, toggleProcessing] = useState(false);\n\tconst [loading, toggleLoading] = useState(true);\n\n\tconst [meta, setMeta] = useEntityProp('postType', postType, 'meta');\n\n\tconst updateAttachments = () => {\n\t\tif ('number' === typeof postId && false === processing) {\n\t\t\ttoggleProcessing(true);\n\t\t\tapiFetch({\n\t\t\t\tpath: `/prc-api/v3/attachments-panel/?postId=${postId}`,\n\t\t\t}).then((data) => {\n\t\t\t\tconsole.log(\n\t\t\t\t\t'Objects found in attachments rest request...',\n\t\t\t\t\tdata\n\t\t\t\t);\n\t\t\t\tsetAttachments([...data]);\n\t\t\t\ttoggleProcessing(false);\n\t\t\t});\n\t\t}\n\t};\n\n\tconst onDropImage = (filesList) => {\n\t\tconsole.log('onDropImage', filesList, postId);\n\t\t// We need to ensure that the parent is set before or after uploading...\n\t\tuploadMedia({\n\t\t\tallowedTypes: ['image'],\n\t\t\tfilesList,\n\t\t\tadditionalData: {\n\t\t\t\tpost: postId,\n\t\t\t},\n\t\t\tonFileChange(a) {\n\t\t\t\tconsole.log('onFileChange', a);\n\t\t\t\tupdateAttachments();\n\t\t\t},\n\t\t\tonError(message) {\n\t\t\t\tconsole.error(message);\n\t\t\t},\n\t\t\twpAllowedMimeTypes: {\n\t\t\t\tpng: 'image/png',\n\t\t\t\t'jpg|jpeg|jpe': 'image/jpeg',\n\t\t\t\twebp: 'image/webp',\n\t\t\t},\n\t\t});\n\t};\n\n\tconst handleImageInsertion = (id, url, size) => {\n\t\tconst insertionIndex = getBlockInsertionPoint().index;\n\t\tconst newImageBlock = createBlock('core/image', {\n\t\t\tid,\n\t\t\turl,\n\t\t\tsizeSlug: size,\n\t\t});\n\t\tinsertBlock(newImageBlock, insertionIndex);\n\t};\n\n\tconst mediaEditor = media({\n\t\ttitle: 'Edit Media Attachments',\n\t\tbutton: {\n\t\t\ttext: 'Update',\n\t\t},\n\t\tlibrary: {\n\t\t\tuploadedTo: postId,\n\t\t},\n\t});\n\t// When the media library closes, refresh the attachments.\n\tmediaEditor.on('close', () => {\n\t\tupdateAttachments();\n\t});\n\n\tconst insertedImageIds = useMemo(() => {\n\t\tconsole.log(\n\t\t\t'mergeBlocksAndReturnIdClientPairs for insertedImageIds...',\n\t\t\tcoverBlocks,\n\t\t\timageBlocks\n\t\t);\n\t\tconst imageBlockIds = {};\n\t\tif (0 !== imageBlocks.length) {\n\t\t\timageBlocks.forEach((block) => {\n\t\t\t\timageBlockIds[block.attributes.id] = {\n\t\t\t\t\tclientId: block.clientId,\n\t\t\t\t};\n\t\t\t});\n\t\t}\n\t\tconst coverBlockIds = {};\n\t\tif (0 !== coverBlocks.length) {\n\t\t\tcoverBlocks.forEach((block) => {\n\t\t\t\tcoverBlockIds[block.attributes.id] = {\n\t\t\t\t\tclientId: block.clientId,\n\t\t\t\t};\n\t\t\t});\n\t\t}\n\n\t\t// merge the imageBlockIds and coverBlockIds objects into one object\n\t\treturn { ...imageBlockIds, ...coverBlockIds };\n\t}, [coverBlocks, imageBlocks]);\n\n\t/**\n\t * Checks for unused images attached to the post but not present in the editor.\n\t * This is just to let the user know that they have unused images.\n\t */\n\tconst flashPrePublishWarning = useMemo(() => {\n\t\tconsole.log('insertedImageIds has changed');\n\t\tif (0 < attachments.length) {\n\t\t\tconst aIds = attachments.map((d) => d.id);\n\t\t\tconst iIds = Object.keys(insertedImageIds);\n\n\t\t\t// If there are any values from aIds that are not in iIds, then we have an unused image so return true.\n\t\t\tif (0 < aIds.filter((a) => !iIds.includes(a.toString())).length) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn false;\n\t\t}\n\t\treturn false;\n\t}, [attachments, insertedImageIds]);\n\n\t/**\n\t * When imageids change or on init update attachments.\n\t */\n\tuseEffect(() => {\n\t\tconsole.log(\"attachments' effect...\");\n\t\tupdateAttachments();\n\t}, [postId]);\n\n\t/**\n\t * Handle toggling the loading state.\n\t */\n\tuseEffect(() => {\n\t\tif (0 < attachments.length) {\n\t\t\ttoggleLoading(false);\n\t\t} else {\n\t\t\ttoggleLoading(true);\n\t\t}\n\t}, [attachments]);\n\n\treturn {\n\t\tpostId,\n\t\tpostType,\n\t\tinsertedImageIds,\n\t\tattachments,\n\t\tloading,\n\t\tflashPrePublishWarning,\n\t\tsearchTerm,\n\t\tdebouncedSearchTerm,\n\t\tsetSearchTerm,\n\t\tonDropImage,\n\t\thandleImageInsertion,\n\t\tmediaEditor,\n\t};\n}\n\n// Hook for child components to get the context object ...\n// ... and re-render when it changes.\nconst useAttachments = () => useContext(attachmentsContext);\n\n// Available to any child component that calls useAttachments()\nfunction ProvideAttachments({ children }) {\n\tconst provider = useProvideAttachments();\n\treturn (\n\t\t<attachmentsContext.Provider value={provider}>\n\t\t\t{children}\n\t\t</attachmentsContext.Provider>\n\t);\n}\n\nexport { ProvideAttachments, useAttachments };\nexport default ProvideAttachments;\n","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"i18n\"];","/**\n * WordPress Dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { DropZone } from '@wordpress/components';\nimport { MediaUploadCheck } from '@wordpress/block-editor';\n\n/**\n * Internal Dependencies\n */\nimport { useAttachments } from './context';\n\nfunction DragAndDropZone() {\n\tconst { onDropImage } = useAttachments();\n\treturn (\n\t\t<MediaUploadCheck fallback={__(`Fallback Instructions Should Go Here`)}>\n\t\t\t<DropZone\n\t\t\t\tonFilesDrop={(a) => onDropImage(a)}\n\t\t\t\tonHTMLDrop={(b) => console.log('onHTMLDrop...', b)}\n\t\t\t\tonDrop={(c) => console.log('onDrop...', c)}\n\t\t\t/>\n\t\t</MediaUploadCheck>\n\t);\n}\n\nexport default DragAndDropZone;\n","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"classnames\"];","/**\n * External Dependencies\n */\nimport classNames from 'classnames';\nimport { useKeyPress } from '@prc/hooks';\n\n/**\n * WordPress Dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { store as blockEditorStore } from '@wordpress/block-editor';\nimport { useState, useEffect, useRef } from '@wordpress/element';\nimport { useDispatch } from '@wordpress/data';\nimport {\n\tBaseControl,\n\tTooltip,\n\tSelectControl,\n\tModal,\n} from '@wordpress/components';\n\n/**\n * Internal Dependencies\n */\nimport { useAttachments } from './context';\n\nconst IMAGE_SIZES = [\n\t{ label: '200 Wide', value: '200-wide' },\n\t{ label: '200 Wide', value: '200-wide' },\n\t{ label: '260 Wide', value: '260-wide' },\n\t{ label: '310 Wide', value: '310-wide' },\n\t{ label: '420 Wide', value: '420-wide' },\n\t{ label: '640 Wide', value: '640-wide' },\n\t{ label: '740 Wide', value: '740-wide' },\n\t{ label: '1400 Wide', value: '1400-wide' },\n];\n\nfunction Image({ id, url, title, type }) {\n\tconst { insertedImageIds, handleImageInsertion } = useAttachments();\n\tconst { selectBlock } = useDispatch(blockEditorStore);\n\n\tconst isActive = Object.keys(insertedImageIds).includes(id.toString());\n\tconst [modalActive, toggleModal] = useState(false);\n\tconst leftShiftKeyPressed = useKeyPress('Shift');\n\n\t// const ref = useRef(null);\n\n\t// const handleRightClick = (ev) => {\n\t// \tev.preventDefault();\n\t// \talert('success!');\n\t// \t// Open image editor...\n\t// \treturn false;\n\t// };\n\n\t// useEffect(() => {\n\t// \tconst img = ref.current;\n\t// \t// subscribe event\n\t// \timg.addEventListener('contextmenu', handleRightClick, false);\n\t// \treturn () => {\n\t// \t\t// unsubscribe event\n\t// \t\timg.removeEventListener('contextmenu', handleRightClick);\n\t// \t};\n\t// }, []);\n\n\treturn (\n\t\t<BaseControl>\n\t\t\t<button\n\t\t\t\ttype=\"button\"\n\t\t\t\tkey={id}\n\t\t\t\tclassName={classNames('prc-attachments-list__image', {\n\t\t\t\t\t'prc-attachments-list__image--in-use': isActive,\n\t\t\t\t})}\n\t\t\t\tonClick={() => {\n\t\t\t\t\tif (isActive) {\n\t\t\t\t\t\tselectBlock(insertedImageIds[id].clientId);\n\t\t\t\t\t} else if (leftShiftKeyPressed) {\n\t\t\t\t\t\thandleImageInsertion(id, url, '640-wide');\n\t\t\t\t\t} else {\n\t\t\t\t\t\ttoggleModal(true);\n\t\t\t\t\t}\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<img src={url} alt=\"A attachment in the editor\" />\n\t\t\t\t<div>{title}</div>\n\t\t\t</button>\n\t\t\t{modalActive && (\n\t\t\t\t<Modal\n\t\t\t\t\ttitle={__('Insert Image Into Editor', 'prc-block-plugins')}\n\t\t\t\t\tonRequestClose={() => toggleModal(false)}\n\t\t\t\t>\n\t\t\t\t\t<SelectControl\n\t\t\t\t\t\tlabel=\"Select Image Size\"\n\t\t\t\t\t\tvalue={null}\n\t\t\t\t\t\toptions={IMAGE_SIZES}\n\t\t\t\t\t\tonChange={(newSize) =>\n\t\t\t\t\t\t\thandleImageInsertion(id, url, newSize)\n\t\t\t\t\t\t}\n\t\t\t\t\t/>\n\t\t\t\t</Modal>\n\t\t\t)}\n\t\t</BaseControl>\n\t);\n}\n\nexport default Image;\n","/**\n * WordPress Dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport {\n\tButton,\n\tBaseControl,\n\tPanelBody,\n\tSpinner,\n\tTextControl,\n\tCardDivider,\n} from '@wordpress/components';\nimport { Fragment } from '@wordpress/element';\n\n/**\n * Internal Dependencies\n */\nimport { useAttachments } from './context';\nimport DragAndDropZone from './drag-and-drop-zone';\nimport Image from './image';\n\nfunction AttachmentsList() {\n\tconst {\n\t\tattachments,\n\t\tloading,\n\t\tsearchTerm,\n\t\tdebouncedSearchTerm,\n\t\tsetSearchTerm,\n\t\tmediaEditor,\n\t} = useAttachments();\n\n\t// Sort attachments by title\n\tconst sortedAttachments = attachments.sort((a, b) => {\n\t\tif (a.title.toLowerCase() < b.title.toLowerCase()) {\n\t\t\treturn -1;\n\t\t}\n\t\tif (a.title.toLowerCase() > b.title.toLowerCase()) {\n\t\t\treturn 1;\n\t\t}\n\t\treturn 0;\n\t});\n\n\tconst filteredAttachments = sortedAttachments.filter(\n\t\t(attachment) =>\n\t\t\t'' === debouncedSearchTerm ||\n\t\t\tattachment.title\n\t\t\t\t.toLowerCase()\n\t\t\t\t.includes(debouncedSearchTerm.toLowerCase())\n\t);\n\n\treturn (\n\t\t<PanelBody\n\t\t\ttitle={__('Attached Images')}\n\t\t\tinitialOpen\n\t\t\tclassName=\"prc-attachments-list\"\n\t\t>\n\t\t\t<BaseControl\n\t\t\t\tid=\"prc-media-zone\"\n\t\t\t\tlabel={__(\n\t\t\t\t\t'Drag and drop images to attach them to the post. Click on an image to select the image size to insert into the editor, or \"shift + click\" an image to insert at 640-wide.',\n\t\t\t\t\t'prc-block-plugins'\n\t\t\t\t)}\n\t\t\t>\n\t\t\t\t{0 < attachments.length && (\n\t\t\t\t\t<Fragment>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tvariant=\"secondary\"\n\t\t\t\t\t\t\tonClick={() => mediaEditor.open()}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tEdit Attachments\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t<CardDivider />\n\t\t\t\t\t</Fragment>\n\t\t\t\t)}\n\t\t\t\t<TextControl\n\t\t\t\t\tlabel={__('Search')}\n\t\t\t\t\tvalue={searchTerm}\n\t\t\t\t\tonChange={(value) => setSearchTerm(value)}\n\t\t\t\t/>\n\t\t\t\t<CardDivider />\n\t\t\t\t<DragAndDropZone />\n\t\t\t\t{loading ? (\n\t\t\t\t\t<Spinner />\n\t\t\t\t) : (\n\t\t\t\t\tfilteredAttachments.map((image) => <Image {...image} />)\n\t\t\t\t)}\n\t\t\t</BaseControl>\n\t\t</PanelBody>\n\t);\n}\n\nexport default AttachmentsList;\n","/* eslint-disable max-len */\n// A panel that uses filters to allow adding additional panels.\n// https://github.com/WordPress/gutenberg/tree/d5915916abc45e6682f4bdb70888aa41e98aa395/packages/components/src/higher-order/with-filters\n\n// A panel that displays all the attachments for this post, and also provides a dropzone for bulk uploading new attachments.\n// React query for data management.\n\n// @TODO\n// - Searchable list, order by date or filename\n// - Edit button for each image that will let you edit alt and title\n// - Secondary stage before isnertion, click on image, it will show a modal asking which size, you select it and voila.\n\n/**\n * WordPress Dependencies\n */\nimport { Fragment } from '@wordpress/element';\nimport { withFilters } from '@wordpress/components';\nimport { PluginSidebar, PluginPrePublishPanel } from '@wordpress/edit-post';\n\n/**\n * Internal Dependencies\n */\nimport './style.scss';\nimport { ProvideAttachments } from './context';\nimport AttachmentsList from './attachments-list';\n\nconst HOOK_NAME = 'prc-platform/attachments-panel';\n// With this hook other plugins can add their own panels to the attachments panel. For example, Chart Builder could potentially show it's chart exports. The entire idea of this plugin is to provide a central universe of all media assets for a post/page.\n\nconst AttachmentsPanel = withFilters(HOOK_NAME)(() => (\n\t// const { flashPrePublishWarning } = useAttachments();\n\t<Fragment>\n\t\t<PluginSidebar\n\t\t\tname=\"prc-attachments-panel\"\n\t\t\ttitle=\"Attachments\"\n\t\t\ticon=\"admin-media\"\n\t\t>\n\t\t\t<ProvideAttachments>\n\t\t\t\t<AttachmentsList />\n\t\t\t</ProvideAttachments>\n\t\t\t{\n\t\t\t\t// Filter Should Hook Here\n\t\t\t}\n\t\t</PluginSidebar>\n\t\t{/* {true === flashPrePublishWarning && (\n\t\t\t\t<PluginPrePublishPanel\n\t\t\t\t\tname=\"prc-media-assets-panel-warning\"\n\t\t\t\t\ttitle=\"Media Assets\"\n\t\t\t\t\ticon=\"admin-media\"\n\t\t\t\t\tclassName=\"prc-media-assets-panel\"\n\t\t\t\t\tinitialOpen\n\t\t\t\t>\n\t\t\t\t\t<p>\n\t\t\t\t\t\t{__(\n\t\t\t\t\t\t\t'You have un-used images. Please keep the media library tidy by removing any images you no longer need.',\n\t\t\t\t\t\t\t'prc-block-plugins',\n\t\t\t\t\t\t)}\n\t\t\t\t\t</p>\n\t\t\t\t</PluginPrePublishPanel>\n\t\t\t)} */}\n\t</Fragment>\n));\n\nexport default AttachmentsPanel;\n","/**\n * WordPress Dependencies\n */\nimport { registerPlugin } from '@wordpress/plugins';\n\n/**\n * Internal Dependencies\n */\nimport './style.scss';\nimport AttachmentsPanel from './attachments-panel';\n\n/**\n * A panel that displays all the attachments for this post and also provides a dropzone for bulk uploading new attachments.\n * For filtering info, see: https://github.com/WordPress/gutenberg/tree/d5915916abc45e6682f4bdb70888aa41e98aa395/packages/components/src/higher-order/with-filters\n */\nregisterPlugin('prc-platform-attachment-panel', {\n\trender: () => <AttachmentsPanel />,\n\ticon: 'admin-media',\n});\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t57: 0,\n\t350: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = (chunkId) => (installedChunks[chunkId] === 0);\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = (parentChunkLoadingFunction, data) => {\n\tvar [chunkIds, moreModules, runtime] = data;\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some((id) => (installedChunks[id] !== 0))) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = globalThis[\"webpackChunk_pewresearch_prc_platform_attachments_panel\"] = globalThis[\"webpackChunk_pewresearch_prc_platform_attachments_panel\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [350], () => (__webpack_require__(540)))\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["deferred","window","attachmentsContext","createContext","media","wp","useAttachments","useContext","ProvideAttachments","children","provider","postId","postType","imageBlocks","coverBlocks","chartBlocks","videoBlocks","getBlockInsertionPoint","useSelect","select","editorStore","getCurrentPostType","getCurrentPostId","blockEditorStore","getBlocks","filter","block","name","attributes","backgroundType","insertBlock","useDispatch","attachments","setAttachments","useState","searchTerm","setSearchTerm","debouncedSearchTerm","useDebounce","processing","toggleProcessing","loading","toggleLoading","meta","setMeta","useEntityProp","updateAttachments","apiFetch","path","then","data","console","log","mediaEditor","title","button","text","library","uploadedTo","on","insertedImageIds","useMemo","imageBlockIds","length","forEach","id","clientId","coverBlockIds","flashPrePublishWarning","aIds","map","d","iIds","Object","keys","a","includes","toString","useEffect","onDropImage","filesList","uploadMedia","allowedTypes","additionalData","post","onFileChange","onError","message","error","wpAllowedMimeTypes","png","webp","handleImageInsertion","url","size","insertionIndex","index","newImageBlock","createBlock","sizeSlug","useProvideAttachments","createElement","Provider","value","MediaUploadCheck","fallback","__","DropZone","onFilesDrop","onHTMLDrop","b","onDrop","c","IMAGE_SIZES","label","type","selectBlock","isActive","modalActive","toggleModal","leftShiftKeyPressed","useKeyPress","BaseControl","key","className","classNames","onClick","src","alt","Modal","onRequestClose","SelectControl","options","onChange","newSize","filteredAttachments","sort","toLowerCase","attachment","PanelBody","initialOpen","Fragment","Button","variant","open","CardDivider","TextControl","DragAndDropZone","Spinner","image","Image","withFilters","PluginSidebar","icon","AttachmentsList","registerPlugin","render","AttachmentsPanel","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","exports","module","__webpack_modules__","m","O","result","chunkIds","fn","priority","notFulfilled","Infinity","i","fulfilled","j","every","splice","r","n","getter","__esModule","definition","o","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","installedChunks","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","some","chunkLoadingGlobal","globalThis","bind","push","__webpack_exports__"],"sourceRoot":""}