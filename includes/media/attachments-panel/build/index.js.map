{"version":3,"file":"index.js","mappings":"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AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,oBAAoB;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,kBAAkB;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC,YAAY;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC;AACvC;AACA;AACA,gCAAgC,YAAY;AAC5C;AACA;AACA;AACA,0BAA0B;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC;AACvC,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAE+S;;;;;;;;;;;AClb/S;;;;;;;;;;ACAA;;;;;;;;;;ACAA;;;;;;;;;;ACAA;;;;;;;;;;ACAA;;;;;;;;;;ACAA;;;;;;;;;;ACAA;;;;;;;;;;ACAA;;;;;;;;;;ACAA;;;;;;;;;;ACAA;;;;;;;;;;ACAA;;;;;;;;;;ACAA;;;;;;;;;;ACAA;;;;;;;;;;ACAA;;;;;;;;;;ACAA;;;;;;UCAA;UACA;;UAEA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;;UAEA;UACA;;UAEA;UACA;UACA;;UAEA;UACA;;;;;WCzBA;WACA;WACA;WACA;WACA,+BAA+B,wCAAwC;WACvE;WACA;WACA;WACA;WACA,iBAAiB,qBAAqB;WACtC;WACA;WACA,kBAAkB,qBAAqB;WACvC;WACA;WACA,KAAK;WACL;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;;;;;WC3BA;WACA;WACA;WACA;WACA;WACA,iCAAiC,WAAW;WAC5C;WACA;;;;;WCPA;WACA;WACA;WACA;WACA,yCAAyC,wCAAwC;WACjF;WACA;WACA;;;;;WCPA;;;;;WCAA;WACA;WACA;WACA,uDAAuD,iBAAiB;WACxE;WACA,gDAAgD,aAAa;WAC7D;;;;;WCNA;;WAEA;WACA;WACA;WACA;WACA;WACA;WACA;;WAEA;;WAEA;;WAEA;;WAEA;;WAEA;;WAEA;;WAEA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA,MAAM,qBAAqB;WAC3B;WACA;WACA;WACA;WACA;WACA;WACA;WACA;;WAEA;WACA;WACA;;;;;UEjDA;UACA;UACA;UACA;UACA","sources":["webpack://@pewresearch/prc-platform-attachments-panel/./src/attachments-list.jsx","webpack://@pewresearch/prc-platform-attachments-panel/./src/attachments-panel.jsx","webpack://@pewresearch/prc-platform-attachments-panel/./src/context.js","webpack://@pewresearch/prc-platform-attachments-panel/./src/drag-and-drop-zone.jsx","webpack://@pewresearch/prc-platform-attachments-panel/./src/file.jsx","webpack://@pewresearch/prc-platform-attachments-panel/./src/image.jsx","webpack://@pewresearch/prc-platform-attachments-panel/./src/index.js","webpack://@pewresearch/prc-platform-attachments-panel/./src/style.scss?6c44","webpack://@pewresearch/prc-platform-attachments-panel/./node_modules/blob-util/dist/blob-util.es.js","webpack://@pewresearch/prc-platform-attachments-panel/external window \"React\"","webpack://@pewresearch/prc-platform-attachments-panel/external window \"classnames\"","webpack://@pewresearch/prc-platform-attachments-panel/external window \"prcHooks\"","webpack://@pewresearch/prc-platform-attachments-panel/external window [\"wp\",\"apiFetch\"]","webpack://@pewresearch/prc-platform-attachments-panel/external window [\"wp\",\"blockEditor\"]","webpack://@pewresearch/prc-platform-attachments-panel/external window [\"wp\",\"blocks\"]","webpack://@pewresearch/prc-platform-attachments-panel/external window [\"wp\",\"components\"]","webpack://@pewresearch/prc-platform-attachments-panel/external window [\"wp\",\"coreData\"]","webpack://@pewresearch/prc-platform-attachments-panel/external window [\"wp\",\"data\"]","webpack://@pewresearch/prc-platform-attachments-panel/external window [\"wp\",\"editPost\"]","webpack://@pewresearch/prc-platform-attachments-panel/external window [\"wp\",\"editor\"]","webpack://@pewresearch/prc-platform-attachments-panel/external window [\"wp\",\"element\"]","webpack://@pewresearch/prc-platform-attachments-panel/external window [\"wp\",\"i18n\"]","webpack://@pewresearch/prc-platform-attachments-panel/external window [\"wp\",\"mediaUtils\"]","webpack://@pewresearch/prc-platform-attachments-panel/external window [\"wp\",\"plugins\"]","webpack://@pewresearch/prc-platform-attachments-panel/webpack/bootstrap","webpack://@pewresearch/prc-platform-attachments-panel/webpack/runtime/chunk loaded","webpack://@pewresearch/prc-platform-attachments-panel/webpack/runtime/compat get default export","webpack://@pewresearch/prc-platform-attachments-panel/webpack/runtime/define property getters","webpack://@pewresearch/prc-platform-attachments-panel/webpack/runtime/hasOwnProperty shorthand","webpack://@pewresearch/prc-platform-attachments-panel/webpack/runtime/make namespace object","webpack://@pewresearch/prc-platform-attachments-panel/webpack/runtime/jsonp chunk loading","webpack://@pewresearch/prc-platform-attachments-panel/webpack/before-startup","webpack://@pewresearch/prc-platform-attachments-panel/webpack/startup","webpack://@pewresearch/prc-platform-attachments-panel/webpack/after-startup"],"sourcesContent":["/**\n * External Dependencies\n */\nimport { imgSrcToBlob } from 'blob-util';\n\n/**\n * WordPress Dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport {\n\tButton,\n\tBaseControl,\n\tPanelBody,\n\tSpinner,\n\tTextControl,\n\tCardDivider,\n} from '@wordpress/components';\nimport { Fragment } from '@wordpress/element';\nimport apiFetch from '@wordpress/api-fetch';\nimport { useSelect, select } from '@wordpress/data';\nimport { uploadMedia } from '@wordpress/media-utils';\n\n/**\n * Internal Dependencies\n */\nimport { useAttachments } from './context';\nimport DragAndDropZone from './drag-and-drop-zone';\nimport Image from './image';\nimport File from './file';\n\nfunction resetAttachmentsMigration(postId) {\n\tconsole.log(`resetAttachmentsMigration(${postId}):`);\n\tapiFetch({\n\t\tpath: '/prc-api/v3/migration/migrate-attachments/',\n\t\tmethod: 'POST',\n\t\tdata: {\n\t\t\tpostId,\n\t\t},\n\t})\n\t\t.then((data) => {\n\t\t\tconsole.log(data);\n\t\t\tif (data.success) {\n\t\t\t\twindow.location.reload();\n\t\t\t}\n\t\t})\n\t\t.catch((error) => {\n\t\t\tconsole.error(error);\n\t\t});\n}\n\nfunction Images() {\n\tconst { attachments, loading, debouncedSearchTerm } = useAttachments();\n\n\tconst images = attachments.filter((attachment) =>\n\t\tattachment.type.startsWith('image/')\n\t);\n\t// Sort attachments by title\n\tconst sortedAttachments = images.sort((a, b) => {\n\t\tif (a.title.toLowerCase() < b.title.toLowerCase()) {\n\t\t\treturn -1;\n\t\t}\n\t\tif (a.title.toLowerCase() > b.title.toLowerCase()) {\n\t\t\treturn 1;\n\t\t}\n\t\treturn 0;\n\t});\n\n\tconst filteredAttachments = sortedAttachments.filter(\n\t\t(attachment) =>\n\t\t\t'' === debouncedSearchTerm ||\n\t\t\tattachment.title\n\t\t\t\t.toLowerCase()\n\t\t\t\t.includes(debouncedSearchTerm.toLowerCase())\n\t);\n\n\treturn (\n\t\t<div>\n\t\t\t{loading ? (\n\t\t\t\t<Spinner />\n\t\t\t) : (\n\t\t\t\tfilteredAttachments.map((image) => <Image {...image} />)\n\t\t\t)}\n\t\t</div>\n\t);\n}\n\nfunction Files() {\n\tconst { attachments, loading, debouncedSearchTerm } = useAttachments();\n\n\tconst files = attachments.filter((attachment) =>\n\t\tattachment.type.startsWith('application/')\n\t);\n\t// Sort attachments by title\n\tconst sortedAttachments = files.sort((a, b) => {\n\t\tif (a.title.toLowerCase() < b.title.toLowerCase()) {\n\t\t\treturn -1;\n\t\t}\n\t\tif (a.title.toLowerCase() > b.title.toLowerCase()) {\n\t\t\treturn 1;\n\t\t}\n\t\treturn 0;\n\t});\n\n\t// Filter attachments by title and filename.\n\tconst filteredAttachments = sortedAttachments.filter(\n\t\t(attachment) =>\n\t\t\t'' === debouncedSearchTerm ||\n\t\t\tattachment.title\n\t\t\t\t.toLowerCase()\n\t\t\t\t.includes(debouncedSearchTerm.toLowerCase()) ||\n\t\t\tattachment.name\n\t\t\t\t.toLowerCase()\n\t\t\t\t.includes(debouncedSearchTerm.toLowerCase())\n\t);\n\n\treturn (\n\t\t<div>\n\t\t\t{loading ? (\n\t\t\t\t<Spinner />\n\t\t\t) : (\n\t\t\t\tfilteredAttachments.map((file) => <File {...file} />)\n\t\t\t)}\n\t\t</div>\n\t);\n}\n\nfunction AttachmentsList() {\n\tconst { attachments, searchTerm, setSearchTerm, mediaEditor } =\n\t\tuseAttachments();\n\tconst postId = useSelect((select) =>\n\t\tselect('core/editor').getCurrentPostId()\n\t);\n\n\treturn (\n\t\t<Fragment>\n\t\t\t<PanelBody\n\t\t\t\ttitle={__('Attachments')}\n\t\t\t\tinitialOpen\n\t\t\t\tclassName=\"prc-attachments-list\"\n\t\t\t>\n\t\t\t\t<BaseControl\n\t\t\t\t\tid=\"prc-media-zone\"\n\t\t\t\t\tlabel={__(\n\t\t\t\t\t\t'Drag and drop images to attach them to the post. Click on an image to select the image size to insert into the editor, or \"shift + click\" an image to insert at 640-wide.',\n\t\t\t\t\t\t'prc-block-plugins'\n\t\t\t\t\t)}\n\t\t\t\t>\n\t\t\t\t\t{0 < attachments.length && (\n\t\t\t\t\t\t<Fragment>\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tvariant=\"secondary\"\n\t\t\t\t\t\t\t\tonClick={() => mediaEditor.open()}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tEdit Attachments\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t<CardDivider />\n\t\t\t\t\t\t</Fragment>\n\t\t\t\t\t)}\n\t\t\t\t\t<TextControl\n\t\t\t\t\t\tlabel={__('Filter Attachments')}\n\t\t\t\t\t\tvalue={searchTerm}\n\t\t\t\t\t\tonChange={(value) => setSearchTerm(value)}\n\t\t\t\t\t/>\n\t\t\t\t\t<DragAndDropZone />\n\t\t\t\t</BaseControl>\n\t\t\t</PanelBody>\n\t\t\t<PanelBody\n\t\t\t\ttitle={__('Images')}\n\t\t\t\tinitialOpen={attachments.length > 0}\n\t\t\t\tclassName=\"prc-attachments-list__images\"\n\t\t\t>\n\t\t\t\t<Images />\n\t\t\t</PanelBody>\n\t\t\t<PanelBody\n\t\t\t\ttitle={__('Files')}\n\t\t\t\tclassName=\"prc-attachments-list__files\"\n\t\t\t\tinitialOpen={false}\n\t\t\t>\n\t\t\t\t<Files />\n\t\t\t</PanelBody>\n\t\t\t<PanelBody\n\t\t\t\ttitle={__('Danger Zone')}\n\t\t\t\tclassName=\"prc-attachments-list__danger-zone\"\n\t\t\t\tinitialOpen={false}\n\t\t\t>\n\t\t\t\t<BaseControl\n\t\t\t\t\tlabel=\"Reset Attachments\"\n\t\t\t\t\thelp=\"If there are attachments present on this post we will only add new attachments. Otherwise, all attachments from the legacy post will be copied to this post.\"\n\t\t\t\t\tid=\"prc-reset-attachments\"\n\t\t\t\t>\n\t\t\t\t\t<Button\n\t\t\t\t\t\tisDestructive\n\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\tresetAttachmentsMigration(postId);\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\tCopy Attachments From Legacy\n\t\t\t\t\t</Button>\n\t\t\t\t</BaseControl>\n\t\t\t</PanelBody>\n\t\t</Fragment>\n\t);\n}\n\nexport default AttachmentsList;\n","/* eslint-disable max-len */\n// A panel that uses filters to allow adding additional panels.\n// https://github.com/WordPress/gutenberg/tree/d5915916abc45e6682f4bdb70888aa41e98aa395/packages/components/src/higher-order/with-filters\n\n// A panel that displays all the attachments for this post, and also provides a dropzone for bulk uploading new attachments.\n// React query for data management.\n\n// @TODO\n// - Searchable list, order by date or filename\n// - Edit button for each image that will let you edit alt and title\n// - Secondary stage before isnertion, click on image, it will show a modal asking which size, you select it and voila.\n\n/**\n * WordPress Dependencies\n */\nimport { Fragment } from '@wordpress/element';\nimport { withFilters } from '@wordpress/components';\nimport { PluginSidebar, PluginPrePublishPanel } from '@wordpress/edit-post';\n\n/**\n * Internal Dependencies\n */\nimport './style.scss';\nimport { ProvideAttachments } from './context';\nimport AttachmentsList from './attachments-list';\n\nconst HOOK_NAME = 'prc-platform/attachments-panel';\n// With this hook other plugins can add their own panels to the attachments panel. For example, Chart Builder could potentially show it's chart exports. The entire idea of this plugin is to provide a central universe of all media assets for a post/page.\n\nconst AttachmentsPanel = withFilters(HOOK_NAME)(() => (\n\t// const { flashPrePublishWarning } = useAttachments();\n\t<Fragment>\n\t\t<PluginSidebar\n\t\t\tname=\"prc-attachments-panel\"\n\t\t\ttitle=\"Attachments\"\n\t\t\ticon=\"admin-media\"\n\t\t>\n\t\t\t<ProvideAttachments>\n\t\t\t\t<AttachmentsList />\n\t\t\t</ProvideAttachments>\n\t\t\t{\n\t\t\t\t// Filter Should Hook Here\n\t\t\t}\n\t\t</PluginSidebar>\n\t\t{/* {true === flashPrePublishWarning && (\n\t\t\t\t<PluginPrePublishPanel\n\t\t\t\t\tname=\"prc-media-assets-panel-warning\"\n\t\t\t\t\ttitle=\"Media Assets\"\n\t\t\t\t\ticon=\"admin-media\"\n\t\t\t\t\tclassName=\"prc-media-assets-panel\"\n\t\t\t\t\tinitialOpen\n\t\t\t\t>\n\t\t\t\t\t<p>\n\t\t\t\t\t\t{__(\n\t\t\t\t\t\t\t'You have un-used images. Please keep the media library tidy by removing any images you no longer need.',\n\t\t\t\t\t\t\t'prc-block-plugins',\n\t\t\t\t\t\t)}\n\t\t\t\t\t</p>\n\t\t\t\t</PluginPrePublishPanel>\n\t\t\t)} */}\n\t</Fragment>\n));\n\nexport default AttachmentsPanel;\n","/* eslint-disable max-lines-per-function */\n/* eslint-disable camelcase */\n/**\n * External Dependencies\n */\nimport { useDebounce } from '@prc/hooks';\n\n/**\n * WordPress dependencies\n */\nimport {\n\tuseState,\n\tuseContext,\n\tcreateContext,\n\tuseEffect,\n\tuseMemo,\n} from '@wordpress/element';\nimport apiFetch from '@wordpress/api-fetch';\nimport { store as editorStore } from '@wordpress/editor';\nimport { store as blockEditorStore } from '@wordpress/block-editor';\nimport { createBlock } from '@wordpress/blocks';\nimport { useSelect, useDispatch, select } from '@wordpress/data';\nimport { useEntityProp } from '@wordpress/core-data';\nimport { uploadMedia } from '@wordpress/media-utils';\n\nconst attachmentsContext = createContext();\n\n// eslint-disable-next-line no-undef\nconst { media } = window.wp;\n\nfunction useProvideAttachments() {\n\tconst {\n\t\tpostId,\n\t\tpostType,\n\t\timageBlocks = [],\n\t\tcoverBlocks = [],\n\t\tchartBlocks = [],\n\t\tvideoBlocks = [],\n\t\tgetBlockInsertionPoint,\n\t\tselectedBlockClientId,\n\t\tselectedBlockIsImageBlock,\n\t\tselectedBlockAttrs,\n\t} = useSelect(\n\t\t(select) => ({\n\t\t\tpostType: select(editorStore).getCurrentPostType(),\n\t\t\tpostId: select(editorStore).getCurrentPostId(),\n\t\t\timageBlocks: select(blockEditorStore)\n\t\t\t\t.getBlocks()\n\t\t\t\t.filter((block) => 'core/image' === block.name),\n\t\t\tcoverBlocks: select(blockEditorStore)\n\t\t\t\t.getBlocks()\n\t\t\t\t.filter(\n\t\t\t\t\t(block) =>\n\t\t\t\t\t\t'core/cover' === block.name &&\n\t\t\t\t\t\t'image' === block.attributes.backgroundType\n\t\t\t\t),\n\t\t\tgetBlockInsertionPoint:\n\t\t\t\tselect(blockEditorStore).getBlockInsertionPoint,\n\t\t\tselectedBlockClientId:\n\t\t\t\tselect(blockEditorStore).getSelectedBlockClientId(),\n\t\t\tselectedBlockIsImageBlock:\n\t\t\t\tselect(blockEditorStore).getSelectedBlock()?.name ===\n\t\t\t\t'core/image',\n\t\t\tselectedBlockAttrs:\n\t\t\t\tselect(blockEditorStore).getSelectedBlock()?.attributes,\n\t\t}),\n\t\t[]\n\t);\n\tconst { insertBlock, replaceBlock } = useDispatch(blockEditorStore);\n\n\tconst [selected, setSelected] = useState(null);\n\tconst [attachments, setAttachments] = useState([]);\n\tconst [searchTerm, setSearchTerm] = useState('');\n\tconst debouncedSearchTerm = useDebounce(searchTerm, 500);\n\tconst [processing, toggleProcessing] = useState(false);\n\tconst [loading, toggleLoading] = useState(true);\n\n\tconst [meta, setMeta] = useEntityProp('postType', postType, 'meta');\n\n\tconst updateAttachments = () => {\n\t\tif ('number' === typeof postId && false === processing) {\n\t\t\ttoggleProcessing(true);\n\t\t\tapiFetch({\n\t\t\t\tpath: `/prc-api/v3/attachments-panel/?postId=${postId}`,\n\t\t\t}).then((data) => {\n\t\t\t\tconsole.log(\n\t\t\t\t\t'Objects found in attachments rest request...',\n\t\t\t\t\tdata\n\t\t\t\t);\n\t\t\t\tsetAttachments([...data]);\n\t\t\t\ttoggleProcessing(false);\n\t\t\t});\n\t\t}\n\t};\n\n\tconst onDropImage = (filesList) => {\n\t\tconsole.log('onDropImage', filesList, postId);\n\t\t// We need to ensure that the parent is set before or after uploading...\n\t\tuploadMedia({\n\t\t\tallowedTypes: ['image'],\n\t\t\tfilesList,\n\t\t\tadditionalData: {\n\t\t\t\tpost: postId,\n\t\t\t},\n\t\t\tonFileChange(a) {\n\t\t\t\tconsole.log('onFileChange', a);\n\t\t\t\tupdateAttachments();\n\t\t\t},\n\t\t\tonError(message) {\n\t\t\t\tconsole.error(message);\n\t\t\t},\n\t\t\twpAllowedMimeTypes: {\n\t\t\t\tpng: 'image/png',\n\t\t\t\t'jpg|jpeg|jpe': 'image/jpeg',\n\t\t\t\twebp: 'image/webp',\n\t\t\t},\n\t\t});\n\t};\n\n\tconst handleImageInsertion = (id, url, size) => {\n\t\tconst insertionIndex = getBlockInsertionPoint().index;\n\t\tconst newImageBlock = createBlock('core/image', {\n\t\t\tid,\n\t\t\turl,\n\t\t\tsizeSlug: size,\n\t\t});\n\t\tinsertBlock(newImageBlock, insertionIndex);\n\t};\n\n\tconst handleImageReplacement = (id, url, attachmentLink) => {\n\t\t// Check that what we're replacing is actually an image.\n\t\tif (selectedBlockIsImageBlock) {\n\t\t\t// get the attachment page\n\t\t\t// get the sizeSlug from the existing block if it exists..., otherwise default to 640-wide\n\t\t\tconst sizeSlug = selectedBlockAttrs.sizeSlug || '310-wide';\n\t\t\tconst attrs = selectedBlockAttrs;\n\t\t\tattrs.id = id;\n\t\t\tattrs.url = url;\n\t\t\tattrs.sizeSlug = sizeSlug;\n\t\t\tif (attachmentLink) {\n\t\t\t\tattrs.href = attachmentLink;\n\t\t\t}\n\t\t\tconst newImageBlock = createBlock('core/image', { ...attrs });\n\t\t\treplaceBlock(selectedBlockClientId, newImageBlock);\n\t\t}\n\t};\n\n\tconst mediaEditor = useMemo(() => {\n\t\treturn media({\n\t\t\ttitle: 'Edit Attachments',\n\t\t\tbutton: {\n\t\t\t\ttext: 'Update',\n\t\t\t},\n\t\t\tlibrary: {\n\t\t\t\tuploadedTo: postId,\n\t\t\t\tselected: [selected],\n\t\t\t},\n\t\t});\n\t}, [postId, selected]);\n\n\t// When the media library closes, refresh the attachments.\n\tmediaEditor.on('close', () => {\n\t\tupdateAttachments();\n\t});\n\n\tconst openMediaLibrary = (attachmentId = null) => {\n\t\t// set the selected to...\n\t\tsetSelected(attachmentId);\n\t\tmediaEditor.open();\n\t\tmediaEditor.on('close', () => {\n\t\t\tsetSelected(null);\n\t\t});\n\t};\n\n\tconst insertedImageIds = useMemo(() => {\n\t\tconsole.log(\n\t\t\t'mergeBlocksAndReturnIdClientPairs for insertedImageIds...',\n\t\t\tcoverBlocks,\n\t\t\timageBlocks\n\t\t);\n\t\tconst imageBlockIds = {};\n\t\tif (0 !== imageBlocks.length) {\n\t\t\timageBlocks.forEach((block) => {\n\t\t\t\timageBlockIds[block.attributes.id] = {\n\t\t\t\t\tclientId: block.clientId,\n\t\t\t\t};\n\t\t\t});\n\t\t}\n\t\tconst coverBlockIds = {};\n\t\tif (0 !== coverBlocks.length) {\n\t\t\tcoverBlocks.forEach((block) => {\n\t\t\t\tcoverBlockIds[block.attributes.id] = {\n\t\t\t\t\tclientId: block.clientId,\n\t\t\t\t};\n\t\t\t});\n\t\t}\n\n\t\t// merge the imageBlockIds and coverBlockIds objects into one object\n\t\treturn { ...imageBlockIds, ...coverBlockIds };\n\t}, [coverBlocks, imageBlocks]);\n\n\t/**\n\t * Checks for unused images attached to the post but not present in the editor.\n\t * This is just to let the user know that they have unused images.\n\t */\n\tconst flashPrePublishWarning = useMemo(() => {\n\t\tconsole.log('insertedImageIds has changed');\n\t\tif (0 < attachments.length) {\n\t\t\tconst aIds = attachments.map((d) => d.id);\n\t\t\tconst iIds = Object.keys(insertedImageIds);\n\n\t\t\t// If there are any values from aIds that are not in iIds, then we have an unused image so return true.\n\t\t\tif (0 < aIds.filter((a) => !iIds.includes(a.toString())).length) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn false;\n\t\t}\n\t\treturn false;\n\t}, [attachments, insertedImageIds]);\n\n\t/**\n\t * When imageids change or on init update attachments.\n\t */\n\tuseEffect(() => {\n\t\tconsole.log(\"attachments' effect...\");\n\t\tupdateAttachments();\n\t}, [postId]);\n\n\t/**\n\t * Handle toggling the loading state.\n\t */\n\tuseEffect(() => {\n\t\tif (0 < attachments.length) {\n\t\t\ttoggleLoading(false);\n\t\t} else {\n\t\t\ttoggleLoading(true);\n\t\t}\n\t}, [attachments]);\n\n\treturn {\n\t\tpostId,\n\t\tpostType,\n\t\tinsertedImageIds,\n\t\tattachments,\n\t\tloading,\n\t\tflashPrePublishWarning,\n\t\tsearchTerm,\n\t\tdebouncedSearchTerm,\n\t\tsetSearchTerm,\n\t\tonDropImage,\n\t\thandleImageInsertion,\n\t\thandleImageReplacement,\n\t\tmediaEditor,\n\t\topenMediaLibrary,\n\t};\n}\n\n// Hook for child components to get the context object ...\n// ... and re-render when it changes.\nconst useAttachments = () => useContext(attachmentsContext);\n\n// Available to any child component that calls useAttachments()\nfunction ProvideAttachments({ children }) {\n\tconst provider = useProvideAttachments();\n\treturn (\n\t\t<attachmentsContext.Provider value={provider}>\n\t\t\t{children}\n\t\t</attachmentsContext.Provider>\n\t);\n}\n\nexport { ProvideAttachments, useAttachments };\nexport default ProvideAttachments;\n","/**\n * WordPress Dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { DropZone } from '@wordpress/components';\nimport { MediaUploadCheck } from '@wordpress/block-editor';\n\n/**\n * Internal Dependencies\n */\nimport { useAttachments } from './context';\n\nfunction DragAndDropZone() {\n\tconst { onDropImage } = useAttachments();\n\treturn (\n\t\t<MediaUploadCheck\n\t\t\tfallback={__(\n\t\t\t\t`Drag and drop your files here and they will be attached to this post.`\n\t\t\t)}\n\t\t>\n\t\t\t<DropZone\n\t\t\t\tonFilesDrop={(a) => onDropImage(a)}\n\t\t\t\tonHTMLDrop={(b) => console.log('onHTMLDrop...', b)}\n\t\t\t\tonDrop={(c) => console.log('onDrop...', c)}\n\t\t\t/>\n\t\t</MediaUploadCheck>\n\t);\n}\n\nexport default DragAndDropZone;\n","/**\n * External Dependencies\n */\nimport classNames from 'classnames';\nimport { useKeyPress } from '@prc/hooks';\n\n/**\n * WordPress Dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { store as blockEditorStore } from '@wordpress/block-editor';\nimport { useState, useEffect, useRef } from '@wordpress/element';\nimport { useDispatch } from '@wordpress/data';\nimport {\n\tBaseControl,\n\tTooltip,\n\tSelectControl,\n\tModal,\n} from '@wordpress/components';\n\n/**\n * Internal Dependencies\n */\nimport { useAttachments } from './context';\n\nfunction File({ id, url, title, type }) {\n\tconst { openMediaLibrary } = useAttachments();\n\treturn (\n\t\t<BaseControl>\n\t\t\t<button\n\t\t\t\ttype=\"button\"\n\t\t\t\tkey={id}\n\t\t\t\tclassName={classNames('prc-attachments-list__file')}\n\t\t\t\tonClick={() => {\n\t\t\t\t\topenMediaLibrary(id);\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<div>{title}</div>\n\t\t\t</button>\n\t\t</BaseControl>\n\t);\n}\n\nexport default File;\n","/**\n * External Dependencies\n */\nimport classNames from 'classnames';\nimport { useKeyPress } from '@prc/hooks';\n\n/**\n * WordPress Dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { store as blockEditorStore } from '@wordpress/block-editor';\nimport { useState, useEffect, useRef } from '@wordpress/element';\nimport { useDispatch } from '@wordpress/data';\nimport {\n\tBaseControl,\n\tTooltip,\n\tSelectControl,\n\tModal,\n} from '@wordpress/components';\n\n/**\n * Internal Dependencies\n */\nimport { useAttachments } from './context';\n\nconst IMAGE_SIZES = [\n\t{ label: '200 Wide', value: '200-wide' },\n\t{ label: '200 Wide', value: '200-wide' },\n\t{ label: '260 Wide', value: '260-wide' },\n\t{ label: '310 Wide', value: '310-wide' },\n\t{ label: '420 Wide', value: '420-wide' },\n\t{ label: '640 Wide', value: '640-wide' },\n\t{ label: '740 Wide', value: '740-wide' },\n\t{ label: '1400 Wide', value: '1400-wide' },\n];\n\nfunction Image({ id, url, title, type, filename, editLink, attachmentLink }) {\n\tconst { insertedImageIds, handleImageInsertion, handleImageReplacement } =\n\t\tuseAttachments();\n\tconst { selectBlock } = useDispatch(blockEditorStore);\n\n\tconst isActive = Object.keys(insertedImageIds).includes(id.toString());\n\tconst [modalActive, toggleModal] = useState(false);\n\tconst leftShiftKeyPressed = useKeyPress('Shift');\n\tconst leftOptKeyPressed = useKeyPress('Alt');\n\tconst leftCommandKeyPressed = useKeyPress('metaKey');\n\n\t// const ref = useRef(null);\n\n\t// const handleRightClick = (ev) => {\n\t// \tev.preventDefault();\n\t// \talert('success!');\n\t// \t// Open image editor...\n\t// \treturn false;\n\t// };\n\n\t// useEffect(() => {\n\t// \tconst img = ref.current;\n\t// \t// subscribe event\n\t// \timg.addEventListener('contextmenu', handleRightClick, false);\n\t// \treturn () => {\n\t// \t\t// unsubscribe event\n\t// \t\timg.removeEventListener('contextmenu', handleRightClick);\n\t// \t};\n\t// }, []);\n\n\treturn (\n\t\t<BaseControl>\n\t\t\t<button\n\t\t\t\ttype=\"button\"\n\t\t\t\tkey={id}\n\t\t\t\tclassName={classNames('prc-attachments-list__image', {\n\t\t\t\t\t'prc-attachments-list__image--in-use': isActive,\n\t\t\t\t})}\n\t\t\t\tonClick={() => {\n\t\t\t\t\tif (isActive) {\n\t\t\t\t\t\tselectBlock(insertedImageIds[id].clientId);\n\t\t\t\t\t} else if (leftShiftKeyPressed) {\n\t\t\t\t\t\thandleImageInsertion(id, url, '640-wide');\n\t\t\t\t\t} else if (leftOptKeyPressed) {\n\t\t\t\t\t\thandleImageReplacement(id, url, attachmentLink);\n\t\t\t\t\t} else if (leftCommandKeyPressed) {\n\t\t\t\t\t\twindow.open(editLink, '_blank');\n\t\t\t\t\t} else {\n\t\t\t\t\t\ttoggleModal(true);\n\t\t\t\t\t}\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<img src={url} alt=\"A attachment in the editor\" />\n\t\t\t\t<div>{title}</div>\n\t\t\t</button>\n\t\t\t{modalActive && (\n\t\t\t\t<Modal\n\t\t\t\t\ttitle={__('Insert Image Into Editor', 'prc-block-plugins')}\n\t\t\t\t\tonRequestClose={() => toggleModal(false)}\n\t\t\t\t>\n\t\t\t\t\t<SelectControl\n\t\t\t\t\t\tlabel=\"Select Image Size\"\n\t\t\t\t\t\tvalue={null}\n\t\t\t\t\t\toptions={IMAGE_SIZES}\n\t\t\t\t\t\tonChange={(newSize) =>\n\t\t\t\t\t\t\thandleImageInsertion(id, url, newSize)\n\t\t\t\t\t\t}\n\t\t\t\t\t/>\n\t\t\t\t</Modal>\n\t\t\t)}\n\t\t</BaseControl>\n\t);\n}\n\nexport default Image;\n","/**\n * WordPress Dependencies\n */\nimport { registerPlugin } from '@wordpress/plugins';\n\n/**\n * Internal Dependencies\n */\nimport './style.scss';\nimport AttachmentsPanel from './attachments-panel';\n\n/**\n * A panel that displays all the attachments for this post and also provides a dropzone for bulk uploading new attachments.\n * For filtering info, see: https://github.com/WordPress/gutenberg/tree/d5915916abc45e6682f4bdb70888aa41e98aa395/packages/components/src/higher-order/with-filters\n */\nregisterPlugin('prc-platform-attachment-panel', {\n\trender: () => <AttachmentsPanel />,\n\ticon: 'admin-media',\n});\n","// extracted by mini-css-extract-plugin\nexport {};","// TODO: including these in blob-util.ts causes typedoc to generate docs for them,\n// even with --excludePrivate ¯\\_(ツ)_/¯\n/** @private */\nfunction loadImage(src, crossOrigin) {\n    return new Promise(function (resolve, reject) {\n        var img = new Image();\n        if (crossOrigin) {\n            img.crossOrigin = crossOrigin;\n        }\n        img.onload = function () {\n            resolve(img);\n        };\n        img.onerror = reject;\n        img.src = src;\n    });\n}\n/** @private */\nfunction imgToCanvas(img) {\n    var canvas = document.createElement('canvas');\n    canvas.width = img.width;\n    canvas.height = img.height;\n    // copy the image contents to the canvas\n    var context = canvas.getContext('2d');\n    context.drawImage(img, 0, 0, img.width, img.height, 0, 0, img.width, img.height);\n    return canvas;\n}\n\n/* global Promise, Image, Blob, FileReader, atob, btoa,\n   BlobBuilder, MSBlobBuilder, MozBlobBuilder, WebKitBlobBuilder, webkitURL */\n/**\n * Shim for\n * [`new Blob()`](https://developer.mozilla.org/en-US/docs/Web/API/Blob.Blob)\n * to support\n * [older browsers that use the deprecated `BlobBuilder` API](http://caniuse.com/blob).\n *\n * Example:\n *\n * ```js\n * var myBlob = blobUtil.createBlob(['hello world'], {type: 'text/plain'});\n * ```\n *\n * @param parts - content of the Blob\n * @param properties - usually `{type: myContentType}`,\n *                           you can also pass a string for the content type\n * @returns Blob\n */\nfunction createBlob(parts, properties) {\n    parts = parts || [];\n    properties = properties || {};\n    if (typeof properties === 'string') {\n        properties = { type: properties }; // infer content type\n    }\n    try {\n        return new Blob(parts, properties);\n    }\n    catch (e) {\n        if (e.name !== 'TypeError') {\n            throw e;\n        }\n        var Builder = typeof BlobBuilder !== 'undefined'\n            ? BlobBuilder : typeof MSBlobBuilder !== 'undefined'\n            ? MSBlobBuilder : typeof MozBlobBuilder !== 'undefined'\n            ? MozBlobBuilder : WebKitBlobBuilder;\n        var builder = new Builder();\n        for (var i = 0; i < parts.length; i += 1) {\n            builder.append(parts[i]);\n        }\n        return builder.getBlob(properties.type);\n    }\n}\n/**\n * Shim for\n * [`URL.createObjectURL()`](https://developer.mozilla.org/en-US/docs/Web/API/URL.createObjectURL)\n * to support browsers that only have the prefixed\n * `webkitURL` (e.g. Android <4.4).\n *\n * Example:\n *\n * ```js\n * var myUrl = blobUtil.createObjectURL(blob);\n * ```\n *\n * @param blob\n * @returns url\n */\nfunction createObjectURL(blob) {\n    return (typeof URL !== 'undefined' ? URL : webkitURL).createObjectURL(blob);\n}\n/**\n * Shim for\n * [`URL.revokeObjectURL()`](https://developer.mozilla.org/en-US/docs/Web/API/URL.revokeObjectURL)\n * to support browsers that only have the prefixed\n * `webkitURL` (e.g. Android <4.4).\n *\n * Example:\n *\n * ```js\n * blobUtil.revokeObjectURL(myUrl);\n * ```\n *\n * @param url\n */\nfunction revokeObjectURL(url) {\n    return (typeof URL !== 'undefined' ? URL : webkitURL).revokeObjectURL(url);\n}\n/**\n * Convert a `Blob` to a binary string.\n *\n * Example:\n *\n * ```js\n * blobUtil.blobToBinaryString(blob).then(function (binaryString) {\n *   // success\n * }).catch(function (err) {\n *   // error\n * });\n * ```\n *\n * @param blob\n * @returns Promise that resolves with the binary string\n */\nfunction blobToBinaryString(blob) {\n    return new Promise(function (resolve, reject) {\n        var reader = new FileReader();\n        var hasBinaryString = typeof reader.readAsBinaryString === 'function';\n        reader.onloadend = function () {\n            var result = reader.result || '';\n            if (hasBinaryString) {\n                return resolve(result);\n            }\n            resolve(arrayBufferToBinaryString(result));\n        };\n        reader.onerror = reject;\n        if (hasBinaryString) {\n            reader.readAsBinaryString(blob);\n        }\n        else {\n            reader.readAsArrayBuffer(blob);\n        }\n    });\n}\n/**\n * Convert a base64-encoded string to a `Blob`.\n *\n * Example:\n *\n * ```js\n * var blob = blobUtil.base64StringToBlob(base64String);\n * ```\n * @param base64 - base64-encoded string\n * @param type - the content type (optional)\n * @returns Blob\n */\nfunction base64StringToBlob(base64, type) {\n    var parts = [binaryStringToArrayBuffer(atob(base64))];\n    return type ? createBlob(parts, { type: type }) : createBlob(parts);\n}\n/**\n * Convert a binary string to a `Blob`.\n *\n * Example:\n *\n * ```js\n * var blob = blobUtil.binaryStringToBlob(binaryString);\n * ```\n *\n * @param binary - binary string\n * @param type - the content type (optional)\n * @returns Blob\n */\nfunction binaryStringToBlob(binary, type) {\n    return base64StringToBlob(btoa(binary), type);\n}\n/**\n * Convert a `Blob` to a binary string.\n *\n * Example:\n *\n * ```js\n * blobUtil.blobToBase64String(blob).then(function (base64String) {\n *   // success\n * }).catch(function (err) {\n *   // error\n * });\n * ```\n *\n * @param blob\n * @returns Promise that resolves with the binary string\n */\nfunction blobToBase64String(blob) {\n    return blobToBinaryString(blob).then(btoa);\n}\n/**\n * Convert a data URL string\n * (e.g. `'data:image/png;base64,iVBORw0KG...'`)\n * to a `Blob`.\n *\n * Example:\n *\n * ```js\n * var blob = blobUtil.dataURLToBlob(dataURL);\n * ```\n *\n * @param dataURL - dataURL-encoded string\n * @returns Blob\n */\nfunction dataURLToBlob(dataURL) {\n    var type = dataURL.match(/data:([^;]+)/)[1];\n    var base64 = dataURL.replace(/^[^,]+,/, '');\n    var buff = binaryStringToArrayBuffer(atob(base64));\n    return createBlob([buff], { type: type });\n}\n/**\n * Convert a `Blob` to a data URL string\n * (e.g. `'data:image/png;base64,iVBORw0KG...'`).\n *\n * Example:\n *\n * ```js\n * var dataURL = blobUtil.blobToDataURL(blob);\n * ```\n *\n * @param blob\n * @returns Promise that resolves with the data URL string\n */\nfunction blobToDataURL(blob) {\n    return blobToBase64String(blob).then(function (base64String) {\n        return 'data:' + blob.type + ';base64,' + base64String;\n    });\n}\n/**\n * Convert an image's `src` URL to a data URL by loading the image and painting\n * it to a `canvas`.\n *\n * Note: this will coerce the image to the desired content type, and it\n * will only paint the first frame of an animated GIF.\n *\n * Examples:\n *\n * ```js\n * blobUtil.imgSrcToDataURL('http://mysite.com/img.png').then(function (dataURL) {\n *   // success\n * }).catch(function (err) {\n *   // error\n * });\n * ```\n *\n * ```js\n * blobUtil.imgSrcToDataURL('http://some-other-site.com/img.jpg', 'image/jpeg',\n *                          'Anonymous', 1.0).then(function (dataURL) {\n *   // success\n * }).catch(function (err) {\n *   // error\n * });\n * ```\n *\n * @param src - image src\n * @param type - the content type (optional, defaults to 'image/png')\n * @param crossOrigin - for CORS-enabled images, set this to\n *                                         'Anonymous' to avoid \"tainted canvas\" errors\n * @param quality - a number between 0 and 1 indicating image quality\n *                                     if the requested type is 'image/jpeg' or 'image/webp'\n * @returns Promise that resolves with the data URL string\n */\nfunction imgSrcToDataURL(src, type, crossOrigin, quality) {\n    type = type || 'image/png';\n    return loadImage(src, crossOrigin).then(imgToCanvas).then(function (canvas) {\n        return canvas.toDataURL(type, quality);\n    });\n}\n/**\n * Convert a `canvas` to a `Blob`.\n *\n * Examples:\n *\n * ```js\n * blobUtil.canvasToBlob(canvas).then(function (blob) {\n *   // success\n * }).catch(function (err) {\n *   // error\n * });\n * ```\n *\n * Most browsers support converting a canvas to both `'image/png'` and `'image/jpeg'`. You may\n * also want to try `'image/webp'`, which will work in some browsers like Chrome (and in other browsers, will just fall back to `'image/png'`):\n *\n * ```js\n * blobUtil.canvasToBlob(canvas, 'image/webp').then(function (blob) {\n *   // success\n * }).catch(function (err) {\n *   // error\n * });\n * ```\n *\n * @param canvas - HTMLCanvasElement\n * @param type - the content type (optional, defaults to 'image/png')\n * @param quality - a number between 0 and 1 indicating image quality\n *                                     if the requested type is 'image/jpeg' or 'image/webp'\n * @returns Promise that resolves with the `Blob`\n */\nfunction canvasToBlob(canvas, type, quality) {\n    if (typeof canvas.toBlob === 'function') {\n        return new Promise(function (resolve) {\n            canvas.toBlob(resolve, type, quality);\n        });\n    }\n    return Promise.resolve(dataURLToBlob(canvas.toDataURL(type, quality)));\n}\n/**\n * Convert an image's `src` URL to a `Blob` by loading the image and painting\n * it to a `canvas`.\n *\n * Note: this will coerce the image to the desired content type, and it\n * will only paint the first frame of an animated GIF.\n *\n * Examples:\n *\n * ```js\n * blobUtil.imgSrcToBlob('http://mysite.com/img.png').then(function (blob) {\n *   // success\n * }).catch(function (err) {\n *   // error\n * });\n * ```\n *\n * ```js\n * blobUtil.imgSrcToBlob('http://some-other-site.com/img.jpg', 'image/jpeg',\n *                          'Anonymous', 1.0).then(function (blob) {\n *   // success\n * }).catch(function (err) {\n *   // error\n * });\n * ```\n *\n * @param src - image src\n * @param type - the content type (optional, defaults to 'image/png')\n * @param crossOrigin - for CORS-enabled images, set this to\n *                                         'Anonymous' to avoid \"tainted canvas\" errors\n * @param quality - a number between 0 and 1 indicating image quality\n *                                     if the requested type is 'image/jpeg' or 'image/webp'\n * @returns Promise that resolves with the `Blob`\n */\nfunction imgSrcToBlob(src, type, crossOrigin, quality) {\n    type = type || 'image/png';\n    return loadImage(src, crossOrigin).then(imgToCanvas).then(function (canvas) {\n        return canvasToBlob(canvas, type, quality);\n    });\n}\n/**\n * Convert an `ArrayBuffer` to a `Blob`.\n *\n * Example:\n *\n * ```js\n * var blob = blobUtil.arrayBufferToBlob(arrayBuff, 'audio/mpeg');\n * ```\n *\n * @param buffer\n * @param type - the content type (optional)\n * @returns Blob\n */\nfunction arrayBufferToBlob(buffer, type) {\n    return createBlob([buffer], type);\n}\n/**\n * Convert a `Blob` to an `ArrayBuffer`.\n *\n * Example:\n *\n * ```js\n * blobUtil.blobToArrayBuffer(blob).then(function (arrayBuff) {\n *   // success\n * }).catch(function (err) {\n *   // error\n * });\n * ```\n *\n * @param blob\n * @returns Promise that resolves with the `ArrayBuffer`\n */\nfunction blobToArrayBuffer(blob) {\n    return new Promise(function (resolve, reject) {\n        var reader = new FileReader();\n        reader.onloadend = function () {\n            var result = reader.result || new ArrayBuffer(0);\n            resolve(result);\n        };\n        reader.onerror = reject;\n        reader.readAsArrayBuffer(blob);\n    });\n}\n/**\n * Convert an `ArrayBuffer` to a binary string.\n *\n * Example:\n *\n * ```js\n * var myString = blobUtil.arrayBufferToBinaryString(arrayBuff)\n * ```\n *\n * @param buffer - array buffer\n * @returns binary string\n */\nfunction arrayBufferToBinaryString(buffer) {\n    var binary = '';\n    var bytes = new Uint8Array(buffer);\n    var length = bytes.byteLength;\n    var i = -1;\n    while (++i < length) {\n        binary += String.fromCharCode(bytes[i]);\n    }\n    return binary;\n}\n/**\n * Convert a binary string to an `ArrayBuffer`.\n *\n * ```js\n * var myBuffer = blobUtil.binaryStringToArrayBuffer(binaryString)\n * ```\n *\n * @param binary - binary string\n * @returns array buffer\n */\nfunction binaryStringToArrayBuffer(binary) {\n    var length = binary.length;\n    var buf = new ArrayBuffer(length);\n    var arr = new Uint8Array(buf);\n    var i = -1;\n    while (++i < length) {\n        arr[i] = binary.charCodeAt(i);\n    }\n    return buf;\n}\n\nexport { createBlob, createObjectURL, revokeObjectURL, blobToBinaryString, base64StringToBlob, binaryStringToBlob, blobToBase64String, dataURLToBlob, blobToDataURL, imgSrcToDataURL, canvasToBlob, imgSrcToBlob, arrayBufferToBlob, blobToArrayBuffer, arrayBufferToBinaryString, binaryStringToArrayBuffer };\n","module.exports = window[\"React\"];","module.exports = window[\"classnames\"];","module.exports = window[\"prcHooks\"];","module.exports = window[\"wp\"][\"apiFetch\"];","module.exports = window[\"wp\"][\"blockEditor\"];","module.exports = window[\"wp\"][\"blocks\"];","module.exports = window[\"wp\"][\"components\"];","module.exports = window[\"wp\"][\"coreData\"];","module.exports = window[\"wp\"][\"data\"];","module.exports = window[\"wp\"][\"editPost\"];","module.exports = window[\"wp\"][\"editor\"];","module.exports = window[\"wp\"][\"element\"];","module.exports = window[\"wp\"][\"i18n\"];","module.exports = window[\"wp\"][\"mediaUtils\"];","module.exports = window[\"wp\"][\"plugins\"];","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","var deferred = [];\n__webpack_require__.O = (result, chunkIds, fn, priority) => {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar [chunkIds, fn, priority] = deferred[i];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every((key) => (__webpack_require__.O[key](chunkIds[j])))) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t\"index\": 0,\n\t\"./style-index\": 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = (chunkId) => (installedChunks[chunkId] === 0);\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = (parentChunkLoadingFunction, data) => {\n\tvar [chunkIds, moreModules, runtime] = data;\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some((id) => (installedChunks[id] !== 0))) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = globalThis[\"webpackChunk_pewresearch_prc_platform_attachments_panel\"] = globalThis[\"webpackChunk_pewresearch_prc_platform_attachments_panel\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [\"./style-index\"], () => (__webpack_require__(\"./src/index.js\")))\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n",""],"names":["imgSrcToBlob","__","Button","BaseControl","PanelBody","Spinner","TextControl","CardDivider","Fragment","apiFetch","useSelect","select","uploadMedia","useAttachments","DragAndDropZone","Image","File","resetAttachmentsMigration","postId","console","log","path","method","data","then","success","window","location","reload","catch","error","Images","attachments","loading","debouncedSearchTerm","images","filter","attachment","type","startsWith","sortedAttachments","sort","a","b","title","toLowerCase","filteredAttachments","includes","createElement","map","image","Files","files","name","file","AttachmentsList","searchTerm","setSearchTerm","mediaEditor","getCurrentPostId","initialOpen","className","id","label","length","variant","onClick","open","value","onChange","help","isDestructive","withFilters","PluginSidebar","PluginPrePublishPanel","ProvideAttachments","HOOK_NAME","AttachmentsPanel","icon","useDebounce","useState","useContext","createContext","useEffect","useMemo","store","editorStore","blockEditorStore","createBlock","useDispatch","useEntityProp","attachmentsContext","media","wp","useProvideAttachments","postType","imageBlocks","coverBlocks","chartBlocks","videoBlocks","getBlockInsertionPoint","selectedBlockClientId","selectedBlockIsImageBlock","selectedBlockAttrs","getCurrentPostType","getBlocks","block","attributes","backgroundType","getSelectedBlockClientId","getSelectedBlock","insertBlock","replaceBlock","selected","setSelected","setAttachments","processing","toggleProcessing","toggleLoading","meta","setMeta","updateAttachments","onDropImage","filesList","allowedTypes","additionalData","post","onFileChange","onError","message","wpAllowedMimeTypes","png","webp","handleImageInsertion","url","size","insertionIndex","index","newImageBlock","sizeSlug","handleImageReplacement","attachmentLink","attrs","href","button","text","library","uploadedTo","on","openMediaLibrary","attachmentId","insertedImageIds","imageBlockIds","forEach","clientId","coverBlockIds","flashPrePublishWarning","aIds","d","iIds","Object","keys","toString","children","provider","Provider","DropZone","MediaUploadCheck","fallback","onFilesDrop","onHTMLDrop","onDrop","c","classNames","useKeyPress","useRef","Tooltip","SelectControl","Modal","key","IMAGE_SIZES","filename","editLink","selectBlock","isActive","modalActive","toggleModal","leftShiftKeyPressed","leftOptKeyPressed","leftCommandKeyPressed","src","alt","onRequestClose","options","newSize","registerPlugin","render"],"sourceRoot":""}