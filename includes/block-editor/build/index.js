(()=>{"use strict";var e={n:o=>{var t=o&&o.__esModule?()=>o.default:()=>o;return e.d(t,{a:t}),t},d:(o,t)=>{for(var r in t)e.o(t,r)&&!e.o(o,r)&&Object.defineProperty(o,r,{enumerable:!0,get:t[r]})},o:(e,o)=>Object.prototype.hasOwnProperty.call(e,o)};const o=window.React,t=window.wp.domReady;var r=e.n(t);const a=window.wp.data,n=window.wp.blocks,s=window.wp.hooks,i=window.wp.apiFetch;var l=e.n(i);const c=window.wp.url;function d(e){const o=(0,c.addQueryArgs)("/prc-api/v3/report-package/regenerate-toc",{post_id:e});return new Promise(((e,t)=>{l()({path:o,method:"POST"}).then((o=>{console.log("Regenerate TOC response",o),e(o)})).catch((e=>{console.error("Regenerate TOC error",e),t(e)}))}))}const p={post:{preview:{start:[d],end:[]},publish:{start:[d],end:[]}},"fact-sheet":{preview:{start:[d],end:[]},publish:{start:[d],end:[]}}};r()((()=>{null!==(0,a.select)("core/editor")&&((0,a.dispatch)("core/editor").removeEditorPanel("taxonomy-panel-post_tag"),(0,a.dispatch)("core/editor").removeEditorPanel("discussion-panel"),function(){console.log("prc-platform/post-preview-publish-hook: watcher activating");const e=()=>(0,a.select)("core/editor").isPreviewingPost(),o=()=>(0,a.select)("core/editor").isPublishingPost(),t=()=>(0,a.select)("core/editor").isAutosavingPost();let r=e(),n=o(),s=t();(0,a.subscribe)((()=>{const i=(0,a.select)("core/editor").getCurrentPostId(),l=(0,a.select)("core/editor").getCurrentPostType(),c=e(),d=o(),h=t();r!==c&&(console.log("start preview",i,l),function(e,o){p[o]&&p[o].preview.start&&p[o].preview.start.length&&p[o].preview.start.forEach((o=>{o(e)}))}(i,l)),n!==d&&(console.log("start publish",i,l),function(e,o){p[o]&&p[o].publish.start&&p[o].publish.start.length&&p[o].publish.start.forEach((o=>{o(e)}))}(i,l)),s!==h&&console.log("autosave",i,l),r&&!c&&(console.log("end preview",i,l),function(e,o){p[o]&&p[o].preview.end&&p[o].preview.end.length&&p[o].preview.end.forEach((o=>{o(e)}))}(i,l)),n&&!d&&(console.log("end publish",i,l),function(e,o){p[o]&&p[o].publish.end&&p[o].publish.end.length&&p[o].publish.end.forEach((o=>{o(e)}))}(i,l)),r=c,n=d,s=h}))}()),(0,n.registerBlockCollection)("prc-block",{title:"Pew Research Center Block Library",icon:()=>(0,o.createElement)("svg",{id:"tiny-logo","data-name":"Tiny PRC Logo",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 198 198",height:"20"},(0,o.createElement)("path",{d:"M142.83,131.63,174,162.77a98.58,98.58,0,0,0,12.74-19l-66.08-27.37a27.49,27.49,0,0,0,6-14.44l66.05,27.36a97.65,97.65,0,0,0,4.47-22.46h-44a56.14,56.14,0,0,0,.62-7.83,54.79,54.79,0,0,0-.63-7.84s0,0,0,0h44a97.65,97.65,0,0,0-4.47-22.46L126.63,96.08a27.43,27.43,0,0,0-6-14.44l66.09-27.37a98.58,98.58,0,0,0-12.74-19L142.83,66.38a54.89,54.89,0,0,0-11.05-11.06l31.14-31.14a98.08,98.08,0,0,0-19-12.73L116.52,77.52a27.57,27.57,0,0,0-14.45-6l27.36-66A98,98,0,0,0,107,1V45h0a53.41,53.41,0,0,0-7.85-.63,54.6,54.6,0,0,0-7.81.62V1A97.65,97.65,0,0,0,68.87,5.47L96.24,71.52a27.54,27.54,0,0,0-14.45,6L54.43,11.44a98.27,98.27,0,0,0-19,12.74L66.53,55.32A54.52,54.52,0,0,0,55.46,66.39s0,0,0,0L24.32,35.23a98.53,98.53,0,0,0-12.73,19L77.66,81.64a27.49,27.49,0,0,0-6,14.44l-66-27.36A97.65,97.65,0,0,0,1.15,91.18h44v0A56.28,56.28,0,0,0,44.57,99a56.14,56.14,0,0,0,.62,7.83h-44a97.65,97.65,0,0,0,4.47,22.46l66.05-27.36a27.49,27.49,0,0,0,6,14.44L11.59,143.73a98.53,98.53,0,0,0,12.73,19l31.15-31.14a54.94,54.94,0,0,0,11.06,11.06h0L35.39,173.83a98.23,98.23,0,0,0,19,12.73l27.36-66.08a27.46,27.46,0,0,0,14.45,6L68.87,192.54A98.18,98.18,0,0,0,91.33,197V153A49.75,49.75,0,0,0,107,153h0v44a97.46,97.46,0,0,0,22.45-4.47l-27.36-66a27.49,27.49,0,0,0,14.45-6l27.36,66.08a98.53,98.53,0,0,0,19-12.73l-31.14-31.14h0a54.68,54.68,0,0,0,11.06-11.06Z"}))}),["core/archives","core/calendar","core/latest-comments","core/tag-cloud","core/verse"].forEach((e=>{(0,n.unregisterBlockType)(e)})),["animoto","spotify","flickr","cloudup","collegehumor","issuu","kickstarter","mixcloud","reverbnation","smugmug","amazon-kindle","pinterest","loom","smartframe","descript"].forEach((e=>{(0,n.unregisterBlockVariation)("core/embed",e)})),(0,s.removeFilter)("editor.MediaUpload","external-media/replace-media-upload")}))})();
//# sourceMappingURL=index.js.map